!function(){var e={requestKey:"file",title:"Image upload",accept:"image/*",target:"",helper:!0};$.fn.uploadZone=function(t){t=$.extend(!0,{},e,t);var a=t.title,r=$(this).first(),n=$(document.createElement("input")).attr({type:"file",name:t.requestKey,accept:t.accept});if(t.helper)var o=$(document.createElement("div")).addClass("helper");return n.on("dragenter dragleave",function(e){e.stopPropagation(),e.preventDefault(),r["dragenter"===e.type?"addClass":"removeClass"]("drop")}),n.on("change drop",function(e){console.log(e);var n=e.target.files||e.originalEvent.dataTransfer.files;if("undefined"==typeof n[0]||!(n[0]instanceof File))return!0;var i=new FormData;i.append("sprite",n[0]),i.append("CSRF_TOKEN",$.getCSRFToken()),r.addClass("uploading");var s={url:t.target,type:"POST",contentType:!1,processData:!1,cache:!1,data:i,success:function(e){return"string"==typeof e?console.log(e)===$(window).trigger("ajaxerror"):void(e.status?$.Dialog.close(function(){r.children("img").fadeTo(200,0,function(){var t=$(this);t.attr("src",e.path).on("load",function(){t.fadeTo(200,1)})})}):$.Dialog.fail(a,e.message))},error:function(e){500!==e.status&&401!==e.status&&$.Dialog.fail(a,"Upload failed (HTTP "+e.status+")")},complete:function(){r.removeClass("uploading"),o.removeAttr("data-progress")}};t.helper&&(s.xhr=function(){var e=$.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){if(!e.lengthComputable)return!0;var t=e.loaded||e.position,a=e.total;o.attr("data-progress",Math.round(t/a*100))},!1),e}),$.ajax(s)}),r.append(n),t.helper&&r.append(o),r}}(jQuery);
//# sourceMappingURL=jquery.uploadzone.min.js.map