{"version":3,"sources":["index.js"],"names":["$","Bind","$li","id","type","children","off","on","$this","this","title","Dialog","wait","post","data","console","log","$w","trigger","status","close","nextAll","remove","btnhtml","insertAfter","fail","message","confirm","sure","closest","$actions","find","filter","parent","prev","addBack","appendTo","request","$form","$ErrorNotice","hide","e","preventDefault","deviation","val","handleError","html","show","attr","length","Error","updateSection","call","callback","success","SEASON","EPISODE","$unfinishBtn","deleteOnly","hasClass","Type","charAt","toUpperCase","substring","$unbind","prepend","first","checked","css","append","unbind","prop","formBind","imgCheckDisabler","disable","prevurl","$formImgInput","samevalue","trim","$formImgCheck","removeAttr","outgoing","test","replace","jQuery","$formImgPreview","$formDescInput","$formTitleInput","$notice","noticeHTML","$previewIMG","Image","is","focus","$body","animate","scrollTop","offset","top","$navbar","outerHeight","idstr","CHECK_BTN","removeClass","url","ajax","method","image_url","preview","screwchanges","sanityCheck","triggerHandler","label","$type","indexOf","tempdata","serializeArray","what","episode","season","each","i","el","name","value","addClass","removeData","dis","$render","render","rebindHandlers","window","updateTimesF","location","reload","document","body","info","select","mouseup","$yt","$dm","yt","dm","$epSection","epsection","$voting","$voteButton","$both","siblings","epid","vote","$section","newhtml","diff","past","fn","parseInt","fluidbox","immediateOpen"],"mappings":"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","file":"index.min.js","sourcesContent":["$(function(){\r\n\tvar $w = $(window),\r\n\t\t$body = $(document.body),\r\n\t\t$navbar = $('header nav'),\r\n\t\tSEASON = window.SEASON,\r\n\t\tEPISODE = window.EPISODE,\r\n\t\tidstr = 'S'+SEASON+'E'+EPISODE;\r\n\r\n\t$('#export').on('click',function(){\r\n\t\tvar title = 'Exporting posts';\r\n\r\n\t\t$.post('/episode/export/'+idstr,{},function(data){\r\n\t\t\tif (typeof data !== 'object') return console.log(data) && $w.trigger('ajaxerror');\r\n\r\n\t\t\tif (data.status) $.Dialog.info(title,'<p>Here\\'s the code you need to paste into the journal while in<br><em>HTML editing mode</em>, replacing what was there previously.</p><textarea style=\"display:block;margin:0 auto;resize:none;width:90%\"></textarea>',function(){\r\n\t\t\t\t$('#dialogContent').find('textarea')\r\n\t\t\t\t\t.val(data.export)\r\n\t\t\t\t\t.focus(function(){ $(this).select() }).focus()\r\n\t\t\t\t\t.mouseup(function(){ return false });\r\n\t\t\t});\r\n\t\t\telse $.Dialog.fail(title,data.message);\r\n\t\t});\r\n\t});\r\n\r\n\t$('#video').on('click',function(){\r\n\t\t$.post('/episode/getvideos/'+idstr,{},function(data){\r\n\t\t\tif (typeof data !== 'object') return console.log(data) && $w.trigger('ajaxerror');\r\n\r\n\t\t\tvar title = 'Video links';\r\n\t\t\t$.Dialog.request(title,'<form id=vidlinks><input type=\"text\" name=\"yt\" placeholder=\"YouTube\"><input type=\"text\" name=\"dm\" placeholder=\"Dailymotion\"></form>','vidlinks','Save',function(){\r\n\t\t\t\tvar $form = $('#vidlinks'),\r\n\t\t\t\t\t$yt = $form.find('[name=yt]'),\r\n\t\t\t\t\t$dm = $form.find('[name=dm]');\r\n\t\t\t\tif (data.yt) $yt.val(data.yt);\r\n\t\t\t\tif (data.dm) $dm.val(data.dm);\r\n\t\t\t\t$form.on('submit',function(e){\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\t$.Dialog.wait(title, 'Saving links');\r\n\t\t\t\t\t\r\n\t\t\t\t\t$.post('/episode/setvideos/'+idstr,{yt: $yt.val(), dm: $dm.val()},function(data){\r\n\t\t\t\t\t\tif (typeof data !== 'object') return console.log(data) && $w.trigger('ajaxerror');\r\n\r\n\t\t\t\t\t\tif (data.status){\r\n\t\t\t\t\t\t\tvar $epSection = $('#content').children('section.episode');\r\n\t\t\t\t\t\t\tif (data.epsection)\r\n\t\t\t\t\t\t\t\t$epSection.html($(data.epsection).filter('section').html());\r\n\t\t\t\t\t\t\t$.Dialog.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse $.Dialog.fail(title, data.message);\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n\r\n\tvar $voting = $('#voting'),\r\n\t\t$voteButton = $voting.find('button');\r\n\t$voting.on('click','button',function(e){\r\n\t\te.preventDefault();\r\n\t\tvar $this = $(this),\r\n\t\t\t$both = $this.siblings('button').addBack(),\r\n\t\t\tvalue = $this.hasClass('green') ? 1 : -1,\r\n\t\t\tepid = ''+idstr,\r\n\t\t\ttitle = (value > 0?'Up':'Down')+'voting '+epid;\r\n\r\n\t\t$both.attr('disabled', true);\r\n\r\n\t\t$.post('/episode/vote/'+epid,{vote:value},function(data){\r\n\t\t\tif (typeof data !== 'object') return console.log(data) && $w.trigger('ajaxerror');\r\n\r\n\t\t\tif (data.status){\r\n\t\t\t\t$.Dialog.close();\r\n\t\t\t\tvar $section = $this.closest('section');\r\n\t\t\t\t$section.children('h2').nextAll().remove();\r\n\t\t\t\t$section.append(data.newhtml);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$.Dialog.fail(title,data.message);\r\n\t\t\t\t$both.attr('disabled', false);\r\n\t\t\t}\r\n\t\t})\r\n\t});\r\n\r\n\t$voting.find('time').data('dyntime-beforeupdate',function(diff){\r\n\t\tif (diff.past !== true) return;\r\n\r\n\t\tif (!$voteButton.length){\r\n\t\t\t$.post('/episode/vote/'+idstr+'?html',{},function(data){\r\n\t\t\t\tif (typeof data !== 'object') return console.log(data) && $w.trigger('ajaxerror');\r\n\r\n\t\t\t\tif (data.status){\r\n\t\t\t\t\t$voting.children('h2').nextAll().remove();\r\n\t\t\t\t\t$voting.append(data.html);\r\n\t\t\t\t}\r\n\t\t\t\telse $.Dialog.fail('Display voting buttons',data.message);\r\n\t\t\t});\r\n\t\t\t$(this).removeData('dyntime-beforeupdate');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t});\r\n\r\n\t$.fn.rebindHandlers = function(){\r\n\t\tvar $this = $(this);\r\n\t\t$this.find('li[id]').each(function(){\r\n\t\t\tvar $li = $(this),\r\n\t\t\t\tid = parseInt($li.attr('id').replace(/\\D/g,'')),\r\n\t\t\t\ttype = $li.closest('section[id]').attr('id');\r\n\t\t\t\t\r\n\t\t\t$('section .unfinished .screencap > a')\r\n\t\t\t\t.fluidbox({ immediateOpen: true })\r\n\t\t\t\t.on('openstart',function(){\r\n\t\t\t\t\t$body.addClass('no-distractions');\r\n\t\t\t\t})\r\n\t\t\t\t.on('closestart', function() {\r\n\t\t\t\t\t$body.removeClass('no-distractions');\r\n\t\t\t\t});\r\n\r\n\t\t\tBind($li, id, type);\r\n\t\t});\r\n\t\treturn $this;\r\n\t};\r\n\t$('#requests, #reservations').rebindHandlers();\r\n\tfunction Bind($li, id, type){\r\n\t\t$li.children('button.reserve-request').off('click').on('click',function(){\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\ttitle = 'Reserving request';\r\n\r\n\t\t\t$.Dialog.wait(title,'Sending reservation to the server');\r\n\r\n\t\t\t$.post(\"/reserving/request/\"+id,{},function(data){\r\n\t\t\t\tif (typeof data !== 'object') return console.log(data) && $w.trigger('ajaxerror');\r\n\r\n\t\t\t\tif (data.status){\r\n\t\t\t\t\t$.Dialog.close();\r\n\t\t\t\t\t$this.nextAll().remove();\r\n\t\t\t\t\t$(data.btnhtml).insertAfter($this);\r\n\t\t\t\t\tBind($li, id, type);\r\n\t\t\t\t\t$this.remove();\r\n\t\t\t\t}\r\n\t\t\t\telse $.Dialog.fail(title,data.message);\r\n\t\t\t});\r\n\t\t});\r\n\t\t$li.children('button.delete').on('click',function(){\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\ttitle = 'Deleteing request';\r\n\r\n\t\t\t$.Dialog.confirm(title, 'You are about to permanently delete this request.<br>Are you sure about this?', function(sure){\r\n\t\t\t\tif (!sure) return;\r\n\r\n\t\t\t\t$.post('/reserving/request/'+id+'?delete',{},function(data){\r\n\t\t\t\t\tif (typeof data !== 'object') return console.log(data) && $w.trigger('ajaxerror');\r\n\r\n\t\t\t\t\tif (data.status){\r\n\t\t\t\t\t\t$.Dialog.close();\r\n\t\t\t\t\t\t$this.closest('li').remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse $.Dialog.fail(title,data.message);\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t});\r\n\t\tvar $actions = $li.find('.reserver-actions').children();\r\n\t\t$actions.filter('.cancel').off('click').on('click',function(){\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\ttitle = 'Cancel reservation';\r\n\r\n\t\t\t$.Dialog.confirm(title,'Are you sure you want to cancel this reservation?',function(sure){\r\n\t\t\t\tif (!sure) return;\r\n\r\n\t\t\t\t$.Dialog.wait(title,'Cancelling reservation');\r\n\r\n\t\t\t\t$.post('/reserving/'+type+'/'+id+'?cancel',{},function(data){\r\n\t\t\t\t\tif (typeof data !== 'object') return console.log(data) && $w.trigger('ajaxerror');\r\n\r\n\t\t\t\t\tif (data.status){\r\n\t\t\t\t\t\t$.Dialog.close();\r\n\t\t\t\t\t\tif (data.remove === true) return $li.remove();\r\n\t\t\t\t\t\t$this.parent().prev().nextAll().addBack().remove();\r\n\t\t\t\t\t\t$(data.btnhtml).appendTo($li);\r\n\r\n\t\t\t\t\t\tBind($li, id, type);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse $.Dialog.fail(title,data.message);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\t$actions.filter('.finish').off('click').on('click',function(){\r\n\t\t\tvar title = 'Finish reservation';\r\n\r\n\t\t\t$.Dialog.request(title,'<form id=\"finish-res\"><div class=\"notice fail\"><label>Error</label><p></p></div><input type=\"text\" name=\"deviation\" placeholder=\"Deviation URL\"></form>','finish-res','Finish',function(){\r\n\t\t\t\tvar $form = $('#finish-res'),\r\n\t\t\t\t\t$ErrorNotice = $form.find('.notice p');\r\n\t\t\t\t$ErrorNotice.parent().hide();\r\n\t\t\t\t$form.on('submit',function(e){\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tvar deviation = $form.find('[name=deviation]').val(),\r\n\t\t\t\t\t\thandleError = function(e){\r\n\t\t\t\t\t\t\t$ErrorNotice.html(e.message).parent().show();\r\n\t\t\t\t\t\t\t$w.trigger('resize');\r\n\t\t\t\t\t\t\t$form.find('input').attr('disabled', false);\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif (typeof deviation !== 'string' || deviation.length === 0)\r\n\t\t\t\t\t\t\tthrow new Error('Please enter a deviation URL');\r\n\r\n\t\t\t\t\t\t$.post('/reserving/'+type+'/'+id+'?finish',{deviation:deviation},function(data){\r\n\t\t\t\t\t\t\tif (typeof data !== 'object') return console.log(data) && $w.trigger('ajaxerror');\r\n\r\n\t\t\t\t\t\t\tif (data.status) updateSection.call({callback:function(){\r\n\t\t\t\t\t\t\t\tif (typeof data.message === 'string')\r\n\t\t\t\t\t\t\t\t\t$.Dialog.success(title,data.message,true);\r\n\t\t\t\t\t\t\t\telse $.Dialog.close();\r\n\t\t\t\t\t\t\t}}, type, SEASON, EPISODE);\r\n\t\t\t\t\t\t\telse handleError(data);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch(e){ handleError(e) }\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t});\r\n\t\t$actions.filter('.unfinish').off('click').on('click',function(){\r\n\t\t\tvar $unfinishBtn = $(this),\r\n\t\t\t\tdeleteOnly = $unfinishBtn.hasClass('delete-only'),\r\n\t\t\t\ttitle = (deleteOnly?'Delete':'Un-finish')+' reservation',\r\n\t\t\t\tType = type.charAt(0).toUpperCase()+type.substring(1);\r\n\r\n\t\t\t$.Dialog.request(title,'<form id=\"unbind-check\"><p>Are you sure you want to '+(deleteOnly?'delete this reservation':'mark this reservation as unfinished')+'?</p><hr><label><input type=\"checkbox\" name=\"unbind\"> Unbind reservation from user</label></form>','unbind-check','Un-finish',function(){\r\n\t\t\t\tvar $form = $('#unbind-check'),\r\n\t\t\t\t\t$unbind = $form.find('[name=unbind]');\r\n\r\n\t\t\t\tif (!deleteOnly)\r\n\t\t\t\t\t$form.prepend('<div class=\"notice info\">By removing the \"finished\" flag, the deviation will be moved back to the \"List of '+Type+'\" section</div>');\r\n\r\n\t\t\t\tif (type === 'reservations'){\r\n\t\t\t\t\t$unbind.on('click',function(){\r\n\t\t\t\t\t\t$('#dialogButtons').children().first().val(this.checked ? 'Delete' : 'Un-finish')\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (deleteOnly)\r\n\t\t\t\t\t\t$unbind.trigger('click').off('click').on('click keydown touchstart', function(){return false}).css('pointer-events','none').parent().hide();\r\n\t\t\t\t\t$form.append('<div class=\"notice warn\">Because this '+(!deleteOnly?'is a reservation, unbinding it from the user will <strong>delete</strong> it permanently.':'reservation was added directly, it cannot be marked un-finished, only deleted.')+'</div>');\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\t$form.append('<div class=\"notice info\">If this is checked, any user will be able to reserve this request again afterwards. If left unchecked, only the current reserver <em>(and Vector Inspectors)</em> will be able to mark it as finished until the reservation is cancelled.</div>');\r\n\t\t\t\t$w.trigger('resize');\r\n\t\t\t\t$form.on('submit',function(e){\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tvar unbind = $unbind.prop('checked');\r\n\r\n\t\t\t\t\t$.Dialog.wait(title,'Removing \"finished\" flag'+(unbind?' & unbinding from user':''));\r\n\r\n\t\t\t\t\t$.post('/reserving/'+type+'/'+id+'?unfinish'+(unbind?'&unbind':''),{},function(data){\r\n\t\t\t\t\t\tif (typeof data !== 'object') return console.log(data) && $w.trigger('ajaxerror');\r\n\r\n\t\t\t\t\t\tif (data.status){\r\n\t\t\t\t\t\t\t$.Dialog.success(title, typeof data.message !== 'undefined' ? data.message : '\"finished\" flag removed successfully');\r\n\t\t\t\t\t\t\tupdateSection(type, SEASON, EPISODE);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse $.Dialog.fail(title,data.message);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tfunction formBind(){\r\n\t\tvar $form = this instanceof jQuery ? this : $(this),\r\n\t\t\t$formImgCheck = $form.find('.check-img'),\r\n\t\t\t$formImgPreview = $form.find('.img-preview'),\r\n\t\t\t$formDescInput = $form.find('[name=label]'),\r\n\t\t\t$formImgInput = $form.find('[name=image_url]'),\r\n\t\t\t$formTitleInput = $form.find('[name=label]'),\r\n\t\t\t$notice = $formImgPreview.children('.notice'),\r\n\t\t\tnoticeHTML = $notice.html(),\r\n\t\t\t$previewIMG = $formImgPreview.children('img'),\r\n\t\t\ttype = $form.data('type'), Type = type.charAt(0).toUpperCase()+type.substring(1);\r\n\r\n\t\tif ($previewIMG.length === 0) $previewIMG = $(new Image()).appendTo($formImgPreview);\r\n\t\t$('#'+type+'-btn').on('click',function(){\r\n\t\t\tif (!$form.is(':visible')){\r\n\t\t\t\t$form.show();\r\n\t\t\t\t$formDescInput.focus();\r\n\t\t\t\t$body.animate({scrollTop: $form.offset().top - $navbar.outerHeight() - 10 }, 500);\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (type === 'reservation') $('#add-reservation-btn').on('click',function(){\r\n\t\t\tvar title = 'Add a reservation';\r\n\t\t\t$.Dialog.request(title,'<form id=\"add-reservation\"><div class=\"notice fail\"><label>Error</label><p></p></div><div class=\"notice info\">This feature should only be used when the vector was made before the episode was displayed here, and all you want to do is link your already-made vector under the newly posted episode.</div><div class=\"notice warn\">If you already posted the reservation, use the <strong class=\"typcn typcn-attachment\">I\\'m done</strong> button to mark it as finished instead of adding it here.</div><input type=\"text\" name=\"deviation\" placeholder=\"Deviation URL\"></form>','add-reservation','Finish',function(){\r\n\t\t\t\tvar $form = $('#add-reservation'),\r\n\t\t\t\t\t$ErrorNotice = $form.find('.notice.fail').hide().children('p');\r\n\t\t\t\t$form.on('submit',function(e){\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tvar deviation = $form.find('[name=deviation]').val(),\r\n\t\t\t\t\t\thandleError = function(e){\r\n\t\t\t\t\t\t\t$ErrorNotice.html(e.message).parent().show();\r\n\t\t\t\t\t\t\t$w.trigger('resize');\r\n\t\t\t\t\t\t\t$form.find('input').attr('disabled', false);\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif (typeof deviation !== 'string' || deviation.length === 0)\r\n\t\t\t\t\t\t\tthrow new Error('Please enter a deviation URL');\r\n\r\n\t\t\t\t\t\t$.post('/reserving/reservation?add='+idstr,{deviation:deviation},function(data){\r\n\t\t\t\t\t\t\tif (typeof data !== 'object') return console.log(data) && $w.trigger('ajaxerror');\r\n\r\n\t\t\t\t\t\t\tif (data.status){\r\n\t\t\t\t\t\t\t\t$.Dialog.success(title,data.message);\r\n\t\t\t\t\t\t\t\tupdateSection(type, SEASON, EPISODE);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse  handleError(data);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch(e){ handleError(e) }\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t});\r\n\t\t$formImgInput.on('keyup change paste',imgCheckDisabler);\r\n\t\tvar outgoing =  /^https?:\\/\\/www\\.deviantart\\.com\\/users\\/outgoing\\?/;\r\n\t\tfunction imgCheckDisabler(disable){\r\n\t\t\tvar prevurl = $formImgInput.data('prev-url'),\r\n\t\t\t\tsamevalue = typeof prevurl === 'string' && prevurl.trim() === $formImgInput.val().trim();\r\n\t\t\t$formImgCheck.attr('disabled',disable === true || samevalue);\r\n\t\t\tif (disable === true || samevalue) $formImgCheck.attr('title', 'You need to change the URL before chacking again.');\r\n\t\t\telse $formImgCheck.removeAttr('title');\r\n\r\n\t\t\tif (disable.type === 'keyup'){\r\n\t\t\t\tvar val = $formImgInput.val();\r\n\t\t\t\tif (outgoing.test(val))\r\n\t\t\t\t\t$formImgInput.val($formImgInput.val().replace(outgoing,''));\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar CHECK_BTN = '<strong class=\"typcn typcn-arrow-repeat\">Check image</strong>';\r\n\t\t$formImgCheck.on('click',function(e){\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\t$formImgCheck.removeClass('red');\r\n\t\t\timgCheckDisabler(true);\r\n\t\t\tvar url = $formImgInput.val();\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\tmethod:'POST',\r\n\t\t\t\turl:'/post',\r\n\t\t\t\tdata: { image_url: url },\r\n\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\tif (typeof data !== 'object') return console.log(data) && $w.trigger('ajaxerror');\r\n\r\n\t\t\t\t\tif (data.status){\r\n\t\t\t\t\t\t$previewIMG.attr('src',data.preview).show().on('load',function(){\r\n\t\t\t\t\t\t\t$notice.hide();\r\n\r\n\t\t\t\t\t\t\t$formImgInput.data('prev-url', url);\r\n\r\n\t\t\t\t\t\t\tif (!!data.title && !$formTitleInput.val().trim())\r\n\t\t\t\t\t\t\t\t$.Dialog.confirm(\r\n\t\t\t\t\t\t\t\t\t'Confirm '+type+' title',\r\n\t\t\t\t\t\t\t\t\t'The image you just checked had the following title:<br><br><p class=align-center><strong>'+data.title+'</strong></p>'\r\n\t\t\t\t\t\t\t\t\t +'<br>Would you like to use this as the '+type+'\\'s description?<br>Keep in mind that it should describe the thing(s) '\r\n\t\t\t\t\t\t\t\t\t +(type==='request'?'being requested':'you plan to vector')+'.<br>'\r\n\t\t\t\t\t\t\t\t\t +'This dialog will not appear if you give your '+type+' a description before clicking the '+CHECK_BTN+' button.',\r\n\t\t\t\t\t\t\t\t\tfunction(sure){\r\n\t\t\t\t\t\t\t\t\t\tif (!sure) return $form.find('input[name=label]').focus();\r\n\t\t\t\t\t\t\t\t\t\t$formTitleInput.val(data.title);\r\n\t\t\t\t\t\t\t\t\t\t$.Dialog.close();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}).on('error',function(){\r\n\t\t\t\t\t\t\t$.Dialog.fail(\"Can't load image\",\"There was an error while attempting to load the image. Make sure the URL is correct and try again!\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t$notice.html(data.message).show();\r\n\t\t\t\t\t\t$previewIMG.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r\n\t\t$form.on('submit',function(e, screwchanges, sanityCheck){\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tif (!screwchanges && $formImgInput.data('prev-url') !== $formImgInput.val())\r\n\t\t\t\treturn $.Dialog.confirm(\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\t'You modified the image URL without clicking the '+CHECK_BTN+' button.<br>Do you want to continue with the last checked URL?',\r\n\t\t\t\t\tfunction(sure){\r\n\t\t\t\t\t\tif (!sure) return;\r\n\r\n\t\t\t\t\t\t$form.triggerHandler('submit',[true]);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\tif (typeof $formImgInput.data('prev-url') === 'undefined')\r\n\t\t\t\treturn $.Dialog.fail(Type, 'Please click the '+CHECK_BTN+' button before submitting your '+type+'!');\r\n\r\n\t\t\tif (!sanityCheck && type === 'request'){\r\n\t\t\t\tvar label = $formDescInput.val(),\r\n\t\t\t\t\t$type = $form.find('select');\r\n\r\n\t\t\t\tif (label.indexOf('character') > -1 && $type.val() !== 'chr')\r\n\t\t\t\t\treturn $.Dialog.confirm(Type, 'Your request label contains the word \"character\", but the request type isn\\'t set to Character.<br>Are you sure you\\'re not requesting one (or more) character(s)?',['Let me change the type', 'Carray on'],function(sure){\r\n\t\t\t\t\t\tif (!sure) return $form.triggerHandler('submit',[screwchanges, true]);\r\n\r\n\t\t\t\t\t\t$.Dialog.close(function(){\r\n\t\t\t\t\t\t\t$type.focus();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t$.Dialog.wait(Type,'Submitting '+type);\r\n\r\n\t\t\tvar tempdata = $form.serializeArray(), data = {what: type, episode: EPISODE, season: SEASON};\r\n\t\t\ttempdata['image_url'] = $formImgInput.data('prev-url');\r\n\t\t\t$.each(tempdata,function(i,el){\r\n\t\t\t\tdata[el.name] = el.value;\r\n\t\t\t});\r\n\r\n\t\t\t$.post('/post',data,function(data){\r\n\t\t\t\tif (typeof data !== 'object') return console.log(data) && $w.trigger('ajaxerror');\r\n\r\n\t\t\t\tif (data.status) updateSection(type, SEASON, EPISODE);\r\n\t\t\t\telse $.Dialog.fail(Type, data.message);\r\n\t\t\t})\r\n\t\t}).on('reset',function(){\r\n\t\t\t$formImgCheck.attr('disabled', false).addClass('red');\r\n\t\t\t$notice.html(noticeHTML).show();\r\n\t\t\t$previewIMG.hide();\r\n\t\t\t$formImgInput.removeData('prev-url');\r\n\t\t\t$(this).hide();\r\n\t\t});\r\n\t}\r\n\tfunction updateSection(type, SEASON, EPISODE){\r\n\t\tvar Type = type.charAt(0).toUpperCase()+type.substring(1), dis = this;\r\n\t\t$.Dialog.wait(Type, 'Updating list');\r\n\t\t$.post('/episode/'+type.replace(/([^s])$/,'$1s')+'/S'+SEASON+'E'+EPISODE,{},function(data){\r\n\t\t\tif (typeof data !== 'object') return console.log(data) && $w.trigger('ajaxerror');\r\n\r\n\t\t\tif (data.status){\r\n\t\t\t\tvar $render = $(data.render);\r\n\r\n\t\t\t\tformBind.call($('#'+type.replace(/([^s])$/,'$1s')).html($render.filter('section').html()).rebindHandlers().find('.post-form').data('type',type));\r\n\t\t\t\twindow.updateTimesF();\r\n\t\t\t\tconsole.log(dis);\r\n\t\t\t\tif (typeof dis === 'object' && typeof dis.callback == 'function') dis.callback();\r\n\t\t\t\telse $.Dialog.close();\r\n\t\t\t}\r\n\t\t\telse window.location.reload();\r\n\t\t});\r\n\t}\r\n\t$('.post-form').each(function(){\r\n\t\tformBind.call(this);\r\n\t});\r\n});\r\n"],"sourceRoot":"/source/"}