$(function(){$("#logs").find("tbody").children().each(function(){var e=$(this);e.find(".expand-section").on("click",function(){var n=$(this),t="Log entry details";if(n.hasClass("expanded"))n.removeClass("expanded").next().stop().slideUp();else if(1===n.next().length)n.addClass("expanded").next().stop().slideDown();else{var s=parseInt(e.children().first().text());$.ajax({method:"POST",url:"/logs/details/"+s,success:function(e){if("string"==typeof e)return console.log(e)===$(window).trigger("ajaxerror");if(e.status){var s=$(document.createElement("div")).attr("class","expandable-section").css("display","none");$.each(e.details,function(e,n){"boolean"==typeof n[1]&&(n[1]='<span class="color-'+(n[1]?"green":"red")+'">'+(n[1]?"yes":"no")+"</span>"),n[0]="<strong>"+n[0]+(/[\wáéíóöőúüű]$/.test(n[0])?":":"")+"</strong>",s.append("<p>"+n.join(" ")+"</p>")}),s.insertAfter(n).slideDown(),n.addClass("expanded")}else $.Dialog.fail(t,e.message)}})}})}),$(".dynt-el").on("click",function(){var e=$(window).width();if(650>e){var n=$(this),t=n.parent(),s=t.parent(),a=s.children(".ip").clone();a.children(".self").html(function(){return" ("+$(this).text()+")"}),a=a.html().split("<br>"),$.Dialog.info(s.children(".entryid").text()+". bejegyzés rejtett adatai","\r\n				<b>Időpont:</b> "+t.children("time").html().trim().replace(/<br>/," ")+'\r\n				<span class="modal-ip"><br>\r\n					<b>Kezdeményező:</b> '+a[0]+"<br>\r\n					<b>IP Cím:</b> "+$(document.createElement("div")).html(a[1]).text()+"\r\n				</span>")}}),$("#clearlogs").on("click",function(){var e=this.value;$.Dialog.confirm(e,"A teljes rendszernapló végleges kürítésére készül, innen nincs visszaút.<br>Biztos, hogy ezt szeretné tenni?",function(n){n&&($.Dialog.wait("A rendszernapló ürítése folyamatban van"),$.ajax({method:"POST",url:"/napló/ürít",success:function(n){return"string"==typeof n?console.log(n)===$(window).trigger("ajaxerror"):void(n.status?($.Dialog.success(e,n.message),setTimeout(function(){window.location.reload()},1500)):$.Dialog.fail(e,n.message))}}))})})});