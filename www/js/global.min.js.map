{"version":3,"sources":["global.js"],"names":["DocumentIsReady","$d","triggerHandler","OAUTH_URL","window","consent","localStorage","getItem","$","off","on","$this","this","opener","sure","setItem","attr","Dialog","wait","location","href","undefined","confirm","title","post","mkAjaxHandler","status","success","message","setTimeout","HandleNav","close","fail","l","DocReady","length","i","call","OpenSidebarByDefault","matchMedia","matches","mk","document","createElement","apply","arguments","urlToAbsolute","url","a","$w","CommonElements","extend","$header","$sbToggle","$main","$content","$sidebar","$footer","$body","$head","$navbar","find","f","data","console","log","trigger","fn","mkData","obj","tempdata","serializeArray","each","el","name","value","getCSRFToken","n","cookie","match","Error","ajaxPrefilter","event","origEvent","type","toUpperCase","t","r","split","push","join","CSRF_TOKEN","ajaxSetup","statusCode",401,404,500,"copy","text","queryCommandSupported","prompt","$helper","css","opacity","width","height","position","left","top","display","appendTo","focus","get","select","execCommand","e","remove","URL","me","_","pathString","pathname","search","hash","jQuery","DocReadyOnce","pad","cdupdate","cdExists","$cd","parent","now","Date","airs","diff","getTimeDiff","past","parents","clearInterval","cdtimer","setCD","time","one","month","week","day","hour","minute","second","createTimeStr","LinkClick","which","link","hostname","REWRITE_REGEX","test","preventDefault","callback","xhr","abort","addClass","ajax","via-js","removeClass","responseURL","js","content","sidebar","footer","pagetitle","avatar","empty","doreload","ParsedLocation","reload","children","src","pos","indexOf","splice","clear","LoadCSS","item","html","updateTimes","$headerNav","first","append","clone","SITE_TITLE","history","LoadJS","requrl","dataType","hasClass","substring","months","$uc","$lis","setInterval","$calendar","d","getMonth","getDate","state","originalEvent","delay"],"mappings":"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","file":"global.min.js","sourcesContent":["(function($){\r\n\t// document.createElement shortcut\r\n\tvar mk = function(){ return document.createElement.apply(document,arguments) };\r\n\twindow.mk = function(){return mk.apply(window,arguments)};\r\n\r\n\t// $(document.createElement) shortcut\r\n\t$.mk = function(){ return $(document.createElement.apply(document,arguments)) };\r\n\r\n\t// Convert relative URL to absolute\r\n\t$.urlToAbsolute = function(url){\r\n\t\tvar a = mk('a');\r\n\t\ta.href = url;\r\n\t\treturn a.href;\r\n\t};\r\n\r\n\t// Globalize common elements\r\n\r\n\twindow.$w = $(window);\r\n\twindow.$d = $(document);\r\n\twindow.CommonElements = function(){\r\n\t\t$.extend(window, {\r\n\t\t\t$header: $('header'),\r\n\t\t\t$sbToggle: $('.sidebar-toggle'),\r\n\t\t\t$main: $('#main'),\r\n\t\t\t$content: $('#content'),\r\n\t\t\t$sidebar: $('#sidebar'),\r\n\t\t\t$footer: $('footer'),\r\n\t\t\t$body: $('body'),\r\n\t\t\t$head: $('head'),\r\n\t\t});\r\n\t\twindow.$navbar = $header.find('nav');\r\n\t};\r\n\twindow.CommonElements();\r\n\r\n\t// Create AJAX response handling function\r\n\t$w.on('ajaxerror',function(){\r\n\t\t$.Dialog.fail(false,'There was an error while processing your request. You may find additional details in the browser\\'s console.');\r\n\t});\r\n\t$.mkAjaxHandler = function(f){\r\n\t\treturn function(data){\r\n\t\t\tif (typeof data !== 'object'){\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t\t$w.trigger('ajaxerror');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof f === 'function') f.call(data);\r\n\t\t};\r\n\t};\r\n\r\n\t// Convert .serializeArray() result to object\r\n\t$.fn.mkData = function(obj){\r\n\t\tvar tempdata = $(this).serializeArray(), data = {};\r\n\t\t$.each(tempdata,function(i,el){\r\n\t\t\tdata[el.name] = el.value;\r\n\t\t});\r\n\t\tif (typeof obj === 'object')\r\n\t\t\t$.extend(data, obj);\r\n\t\treturn data;\r\n\t};\r\n\r\n\t// Get CSRF token from cookies\r\n\t$.getCSRFToken = function(){\r\n\t\tvar n = document.cookie.match(/CSRF_TOKEN=([a-z\\d]+)/i);\r\n\t\tif (n && n.length)\r\n\t\t\treturn n[1];\r\n\t\telse throw new Error('Missing CSRF_TOKEN');\r\n\t};\r\n\t$.ajaxPrefilter(function(event, origEvent){\r\n\t\tif ((origEvent.type||event.type).toUpperCase() !== 'POST')\r\n\t\t\treturn;\r\n\r\n\t\tvar t = $.getCSRFToken();\r\n\t\tif (typeof event.data === \"undefined\")\r\n\t\t\tevent.data = \"\";\r\n\t\tif (typeof event.data === \"string\"){\r\n\t\t\tvar r = event.data.length > 0 ? event.data.split(\"&\") : [];\r\n\t\t\tr.push(\"CSRF_TOKEN=\" + t);\r\n\t\t\tevent.data = r.join(\"&\");\r\n\t\t}\r\n\t\telse event.data.CSRF_TOKEN = t;\r\n\t});\r\n\t$.ajaxSetup({\r\n\t\tstatusCode: {\r\n\t\t\t401: function(){\r\n\t\t\t\t$.Dialog.fail(undefined, \"Cross-site Request Forgery attack detected. Please notify the site administartors.\");\r\n\t\t\t},\r\n\t\t\t404: function(){\r\n\t\t\t\t$.Dialog.fail(undefined, \"Error 404: The requested endpoint could not be found\");\r\n\t\t\t},\r\n\t\t\t500: function(){\r\n\t\t\t\t$.Dialog.fail(false, 'The request failed due to an internal server error. If this persists, please open an issue on GitHub using the link in the footer!');\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t// Copy any text to clipboard\r\n\t// Must be called from within an event handler\r\n\t$.copy = function(text){\r\n\t\tif (!document.queryCommandSupported('copy')){\r\n\t\t\tprompt('Copy with Ctrl+C, close with Enter', text);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tvar $helper = $.mk('textarea'),\r\n\t\t\tsuccess = false;\r\n\t\t$helper\r\n\t\t\t.css({\r\n\t\t\t\topacity: 0,\r\n\t\t\t\twidth: 0,\r\n\t\t\t\theight: 0,\r\n\t\t\t\tposition: 'fixed',\r\n\t\t\t\tleft: '-10px',\r\n\t\t\t\ttop: '50%',\r\n\t\t\t\tdisplay: 'block',\r\n\t\t\t})\r\n\t\t\t.text(text)\r\n\t\t\t.appendTo('body')\r\n\t\t\t.focus();\r\n\t\t$helper.get(0).select();\r\n\r\n\t\ttry {\r\n\t\t\tsuccess = document.execCommand('copy');\r\n\t\t} catch(e){}\r\n\r\n\t\tif (!success)\r\n\t\t\t$.Dialog.fail('Copy to clipboard', 'Copying text to clipboard failed!');\r\n\t\tsetTimeout(function(){\r\n\t\t\t$helper.remove();\r\n\t\t}, 1);\r\n\t};\r\n\r\n\twindow.URL = function(url){\r\n\t\tvar a = document.createElement('a'),\r\n\t\t\tme = this;\r\n\t\ta.href = url;\r\n\t\t$.each(['hash','host','hostname','href','origin','pathname','port','protocol','search'],function(_,el){\r\n\t\t\tme[el] = a[el];\r\n\t\t});\r\n\t\tme.pathString = me.pathname+me.search+me.hash;\r\n\t};\r\n})(jQuery);\r\n\r\nfunction DocumentIsReady(){\r\n\t$d.triggerHandler('paginate-refresh');\r\n\r\n\t// Sign in button handler\r\n\tvar OAUTH_URL = window.OAUTH_URL,\r\n\t\tconsent = localStorage.getItem('cookie_consent');\r\n\r\n\t$('#signin').off('click').on('click',function(){\r\n\t\tvar $this = $(this),\r\n\t\t\topener = function(sure){\r\n\t\t\t\tif (!sure) return;\r\n\r\n\t\t\t\tlocalStorage.setItem('cookie_consent',1);\r\n\t\t\t\t$this.attr('disabled', true);\r\n\t\t\t\t$.Dialog.wait('Sign-in process', 'Redirecting you to DeviantArt', function(){\r\n\t\t\t\t\twindow.location.href = OAUTH_URL;\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\tif (consent == undefined) $.Dialog.confirm('EU Cookie Policy Notice','In compliance with the <a href=\"http://ec.europa.eu/ipg/basics/legal/cookies/index_en.htm\">EU Cookie Policy</a> we must inform you that our website will store cookies on your device to remember your logged in status between browser sessions.<br><br>If you would like to avoid these completly harmless pieces of information required to use this website, click \"Decline\" and continue browsing as a guest.<br><br>This warning will not appear again if you accept our use of persistent cookies.',['Accept','Decline'],opener);\r\n\t\telse opener(true);\r\n\t});\r\n\r\n\t// Sign out button handler\r\n\t$('#signout').off('click').on('click',function(){\r\n\t\tvar title = 'Sign out';\r\n\t\t$.Dialog.confirm(title,'Are you sure you want to sign out?',function(sure){\r\n\t\t\tif (!sure) return;\r\n\r\n\t\t\t$.Dialog.wait(title,'Signing out');\r\n\r\n\t\t\t$.post('/signout',$.mkAjaxHandler(function(){\r\n\t\t\t\tif (this.status){\r\n\t\t\t\t\t$.Dialog.success(title,this.message);\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tHandleNav(location.href, function(){\r\n\t\t\t\t\t\t\t$.Dialog.close();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},1000);\r\n\t\t\t\t}\r\n\t\t\t\telse $.Dialog.fail(title,this.message);\r\n\t\t\t}));\r\n\t\t});\r\n\t});\r\n\r\n\tvar l = window.DocReady.length;\r\n\tif (l) for (var i = 0; i<l; i++)\r\n\t\twindow.DocReady[i].call(window);\r\n}\r\nfunction OpenSidebarByDefault(){\r\n\treturn window.matchMedia('all and (min-width: 1200px)').matches;\r\n}\r\nvar DocReadyOnce = false;\r\n$(function(){\r\n\tif (DocReadyOnce) return;\r\n\tDocReadyOnce = true;\r\n\r\n\t// Sidebar toggle handler\r\n\tvar xhr = false;\r\n\t$sbToggle.off('click').on('click',function(e){\r\n\t\te.preventDefault();\r\n\r\n\t\tif (xhr !== false) return;\r\n\t\t$sbToggle.trigger('sb-'+($body.hasClass('sidebar-open')?'close':'open'));\r\n\t}).on('sb-open sb-close',function(e){\r\n\t\tvar close = e.type.substring(3) === 'close';\r\n\t\t$body[close ? 'removeClass' : 'addClass']('sidebar-open');\r\n\t\tlocalStorage[close ? 'setItem' : 'removeItem']('sidebar-closed', 'true');\r\n\t});\r\n\tif (localStorage.getItem('sidebar-closed') !== 'true' && OpenSidebarByDefault())\r\n\t\t$body.addClass('sidebar-open');\r\n\r\n\t// Upcoming Episode Countdown\r\n\tvar $cd, cdtimer,\r\n\t\tmonths = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\r\n\twindow.setCD = function(){\r\n\t\tvar $uc = $('#upcoming');\r\n\t\tif (!$uc.length)\r\n\t\t\treturn;\r\n\r\n\t\tvar $lis = $uc.children('ul').children();\r\n\t\tif (!$lis.length)\r\n\t\t\treturn $uc.remove();\r\n\r\n\t\t$cd = $lis.first().find('time').addClass('nodt');\r\n\t\tcdtimer = setInterval(cdupdate, 1000);\r\n\t\tcdupdate();\r\n\r\n\t\t$uc.find('li').each(function(){\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\t$calendar = $this.children('.calendar'),\r\n\t\t\t\td = new Date($this.find('.countdown').data('airs') || $this.find('time').attr('datetime'));\r\n\t\t\t$calendar.children('.top').text(months[d.getMonth()]);\r\n\t\t\t$calendar.children('.bottom').text(d.getDate());\r\n\t\t});\r\n\t\twindow.updateTimes();\r\n\t};\r\n\twindow.setCD();\r\n\tfunction pad(n){return n<10?'0'+n:n}\r\n\tfunction cdupdate(){\r\n\t\tvar cdExists = typeof $cd.parent === \"function\" && $cd.parent().length > 0;\r\n\t\tif (cdExists){\r\n\t\t\tvar now = new Date(),\r\n\t\t\t\tairs = new Date($cd.attr('datetime')),\r\n\t\t\t\tdiff = getTimeDiff(now, airs);\r\n\t\t}\r\n\t\tif (!cdExists || diff.past){\r\n\t\t\tif (cdExists)\r\n\t\t\t\t$cd.parents('li').remove();\r\n\t\t\tclearInterval(cdtimer);\r\n\t\t\treturn window.setCD();\r\n\t\t}\r\n\t\tvar text = 'in ';\r\n\t\tif (diff.time < one.month){\r\n\t\t\tif (diff.week > 0)\r\n\t\t\t\tdiff.day += diff.week * 7;\r\n\t\t\tif (diff.day > 0)\r\n\t\t\t\ttext += diff.day+' day'+(diff.day!==1?'s':'')+' & ';\r\n\t\t\tif (diff.hour > 0)\r\n\t\t\t\ttext += diff.hour+':';\r\n\t\t\ttext += pad(diff.minute)+':'+pad(diff.second);\r\n\t\t}\r\n\t\telse text = createTimeStr(now, airs);\r\n\t\t$cd.text(text);\r\n\t}\r\n\t$w.on('unload',function(){\r\n\t\t$cd = {length:0};\r\n\t});\r\n\r\n\t// AJAX page loader\r\n\tvar REWRITE_REGEX = window.REWRITE_REGEX,\r\n\t\tSITE_TITLE = window.SITE_TITLE;\r\n\r\n\tfunction LinkClick(e){\r\n\t\tif (e.which > 2) return true;\r\n\r\n\t\tvar link = this;\r\n\t\tif (link.hostname !== location.hostname || !REWRITE_REGEX.test(link.pathname))\r\n\t\t\treturn true;\r\n\r\n\t\tif (link.pathname === location.pathname && link.search === location.search)\r\n\t\t\treturn true;\r\n\r\n\t\te.preventDefault();\r\n\t\tHandleNav(this.href);\r\n\t}\r\n\t$d.off('click','a[href]',LinkClick).on('click','a[href]',LinkClick);\r\n\r\n\t$w.off('popstate').on('popstate',function(e){\r\n\t\tvar state = e.originalEvent.state;\r\n\r\n\t\tif (state !== null && !state['via-js'])\r\n\t\t\treturn $w.trigger('nav-popstate', [state]);\r\n\t\tHandleNav(location.href);\r\n\t});\r\n\r\n\tfunction HandleNav(url, callback){\r\n\t\tif (xhr !== false){\r\n\t\t\txhr.abort();\r\n\t\t\txhr = false;\r\n\t\t}\r\n\r\n\t\tvar title = 'Navigation';\r\n\t\t$body.addClass('loading');\r\n\t\txhr = $.ajax({\r\n\t\t\turl: url,\r\n\t\t\tdata: {'via-js': true},\r\n\t\t\tsuccess: $.mkAjaxHandler(function(){\r\n\t\t\t\tif (xhr == false) return;\r\n\t\t\t\tif (!this.status){\r\n\t\t\t\t\t$body.removeClass('loading');\r\n\t\t\t\t\txhr = false;\r\n\t\t\t\t\treturn $.Dialog.fail(title+' error', this.message);\r\n\t\t\t\t}\r\n\r\n\t\t\t\turl = new URL(this.responseURL+(new URL(url).hash)).pathString;\r\n\t\t\t\t$w.triggerHandler('unload');\r\n\t\t\t\tif (!OpenSidebarByDefault())\r\n\t\t\t\t\t$sbToggle.trigger('sb-close');\r\n\r\n\t\t\t\tvar css = this.css,\r\n\t\t\t\t\tjs = this.js,\r\n\t\t\t\t\tcontent = this.content,\r\n\t\t\t\t\tsidebar = this.sidebar,\r\n\t\t\t\t\tfooter = this.footer,\r\n\t\t\t\t\tpagetitle = this.title,\r\n\t\t\t\t\tavatar = this.avatar;\r\n\r\n\t\t\t\t$main.empty();\r\n\t\t\t\tvar doreload = false,\r\n\t\t\t\t\tParsedLocation = new URL(location.href),\r\n\t\t\t\t\treload = ParsedLocation.pathString === url;\r\n\r\n\t\t\t\t$body.children('script[src], script[data-src]').each(function(){\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\tif (reload){\r\n\t\t\t\t\t\t$this.remove();\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar src = $this.attr('src') || $this.attr('data-src'),\r\n\t\t\t\t\t\tpos = js.indexOf(src);\r\n\r\n\t\t\t\t\tif (pos !== -1)\r\n\t\t\t\t\t\tjs.splice(pos, 1);\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (src.indexOf('global') !== -1)\r\n\t\t\t\t\t\t\treturn !(doreload = true);\r\n\t\t\t\t\t\t$this.remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (doreload !== false)\r\n\t\t\t\t\treturn location.href = url;\r\n\r\n\t\t\t\t$head.children('link[href], style[href]').each(function(){\r\n\t\t\t\t\tvar $this = $(this),\r\n\t\t\t\t\t\thref = $this.attr('href'),\r\n\t\t\t\t\t\tpos = css.indexOf(href);\r\n\r\n\t\t\t\t\tif (pos !== -1)\r\n\t\t\t\t\t\tcss.splice(pos, 1);\r\n\t\t\t\t\telse $this.remove();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconsole.clear();\r\n\r\n\t\t\t\t(function LoadCSS(item){\r\n\t\t\t\t\tif (item >= css.length){\r\n\t\t\t\t\t\t$main.addClass('pls-wait').html(content);\r\n\t\t\t\t\t\t$sidebar.html(sidebar);\r\n\t\t\t\t\t\t$footer.html(footer);\r\n\t\t\t\t\t\twindow.updateTimes();\r\n\t\t\t\t\t\twindow.setCD();\r\n\t\t\t\t\t\tvar $headerNav = $header.find('nav').children();\r\n\t\t\t\t\t\t$headerNav.children().first().children('img').attr('src', avatar);\r\n\t\t\t\t\t\t$headerNav.children(':not(:first-child)').remove();\r\n\t\t\t\t\t\t$headerNav.append($sidebar.find('nav').children().children().clone());\r\n\t\t\t\t\t\tdocument.title = (pagetitle?pagetitle+' - ':'')+SITE_TITLE;\r\n\r\n\t\t\t\t\t\twindow.CommonElements();\r\n\t\t\t\t\t\thistory[ParsedLocation.pathString === url?'replaceState':'pushState']({'via-js':true},'',url);\r\n\r\n\t\t\t\t\t\twindow.DocReady = [];\r\n\r\n\t\t\t\t\t\treturn (function LoadJS(item){\r\n\t\t\t\t\t\t\tif (item >= js.length){\r\n\t\t\t\t\t\t\t\tDocumentIsReady();\r\n\t\t\t\t\t\t\t\t$body.removeClass('loading');\r\n\t\t\t\t\t\t\t\t$main.removeClass('pls-wait');\r\n\t\t\t\t\t\t\t\tif (typeof callback === 'function')\r\n\t\t\t\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t\t\t\t//noinspection JSUnusedAssignment\r\n\t\t\t\t\t\t\t\txhr = false;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar requrl = js[item];\r\n\t\t\t\t\t\t\txhr = $.ajax({\r\n\t\t\t\t\t\t\t\turl: requrl,\r\n\t\t\t\t\t\t\t\tdataType: 'text',\r\n\t\t\t\t\t\t\t\tsuccess:function(data){\r\n\t\t\t\t\t\t\t\t\t$body.append($.mk('script').attr('data-src', requrl).text(data));\r\n\t\t\t\t\t\t\t\t\tLoadJS(item+1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})(0);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar requrl = css[item];\r\n\t\t\t\t\txhr = $.ajax({\r\n\t\t\t\t\t\turl: requrl,\r\n\t\t\t\t\t\tdataType: 'text',\r\n\t\t\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\t\t\t$head.append($.mk('style').attr('href',requrl).text(data));\r\n\t\t\t\t\t\t\tLoadCSS(item+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t})(0);\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\twindow.HandleNav = function(){ HandleNav.apply(window, arguments) };\r\n\tHandleNav.reload = function(callback, delay){\r\n\t\tvar f = (typeof delay === 'number' && delay > 0)\r\n\t\t\t\t? function(){ setTimeout(callback, delay) }\r\n\t\t\t\t: callback;\r\n\t\tHandleNav(location.pathname, f);\r\n\t};\r\n\twindow.HandleNav.reload = function(){ HandleNav.reload.apply(window, arguments) };\r\n\r\n\tDocumentIsReady();\r\n});\r\n\r\n// Remove loading animation from header on load\r\n$w.on('load',function(){\r\n\t$body.removeClass('loading');\r\n});\r\n"],"sourceRoot":"/source/"}