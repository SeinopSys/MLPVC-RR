{"version":3,"sources":["global.js"],"names":["$","mk","document","createElement","apply","arguments","urlToAbsolute","url","a","href","window","on","Dialog","fail","mkAjaxHandler","f","data","console","log","trigger","call","fn","mkData","obj","tempdata","this","serializeArray","each","i","el","name","value","extend","getCSRFToken","n","cookie","match","length","Error","ajaxPrefilter","e","t","r","split","push","join","CSRF_TOKEN","ajaxSetup","statusCode",401,"undefined",404,500,"copy","text","queryCommandSupported","prompt","$helper","success","css","opacity","width","height","position","left","top","display","appendTo","focus","get","select","execCommand","setTimeout","remove","jQuery","pad","cdupdate","$cd","now","Date","airs","attr","diff","getTimeDiff","past","$oldcd","$nextime","parents","next","find","clearInterval","cdtimer","setCD","time","one","month","week","day","hour","minute","second","createTimeStr","unCamelCase","str","replace","charAt","substring","random","arr","Math","floor","getQuote","$quote","fadeTo","qs","quotes","pony","qskeys","Object","keys","ponyQuotes","html","OAUTH_URL","consent","localStorage","getItem","$this","opener","sure","setItem","wait","location","confirm","months","$uc","first","addClass","setInterval","$calendar","children","d","getMonth","getDate","updateTimesF","Applejack","Fluttershy","PinkiePie","RainbowDash","Rarity","TwilightSparkle","StarlightGlimmer","Applebloom","BigMacintosh","WinterWrapUp","MaudPie","ScrewLoose","ButtonMash","TheGreatandPowerfulTrixie","quoteInterval"],"mappings":"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","file":"global.min.js","sourcesContent":["(function($){\r\n\t// document.createElement shortcut\r\n\t$.mk = function(){ return $(document.createElement.apply(document,arguments)) };\r\n\r\n\t// Convert relative URL to absolute\r\n\t$.urlToAbsolute = function(url){\r\n\t\tvar a = $.mk('a');\r\n\t\ta.href = url;\r\n\t\treturn a.href;\r\n\t};\r\n\r\n\t// Create AJAX response handling function\r\n\t$(window).on('ajaxerror',function(){\r\n\t\t$.Dialog.fail(false,'There was an error while processing your request. You may find additional details in the browser\\'s console.');\r\n\t});\r\n\t$.mkAjaxHandler = function(f){\r\n\t\treturn function(data){\r\n\t\t\tif (typeof data !== 'object'){\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t\t$(window).trigger('ajaxerror');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof f === 'function') f.call(data);\r\n\t\t};\r\n\t};\r\n\r\n\t// Convert .serializeArray() result to object\r\n\t$.fn.mkData = function(obj){\r\n\t\tvar tempdata = $(this).serializeArray(), data = {};\r\n\t\t$.each(tempdata,function(i,el){\r\n\t\t\tdata[el.name] = el.value;\r\n\t\t});\r\n\t\tif (typeof obj === 'object')\r\n\t\t\t$.extend(data, obj);\r\n\t\treturn data;\r\n\t};\r\n\r\n\t// Get CSRF token from cookies\r\n\t$.getCSRFToken = function(){\r\n\t\tvar n = document.cookie.match(/CSRF_TOKEN=([a-z\\d]+)/i);\r\n\t\tif (n && n.length)\r\n\t\t\treturn n[1];\r\n\t\telse throw new Error('Missing CSRF_TOKEN');\r\n\t};\r\n\t$.ajaxPrefilter(function(e){\r\n\t\tvar t = $.getCSRFToken();\r\n\t\tif (typeof e.data === \"undefined\")\r\n\t\t\te.data = \"\";\r\n\t\tif (typeof e.data === \"string\"){\r\n\t\t\tvar r = e.data.length > 0 ? e.data.split(\"&\") : [];\r\n\t\t\tr.push(\"CSRF_TOKEN=\" + t);\r\n\t\t\te.data = r.join(\"&\");\r\n\t\t}\r\n\t\telse e.data.CSRF_TOKEN = t;\r\n\t});\r\n\t$.ajaxSetup({\r\n\t\tstatusCode: {\r\n\t\t\t401: function(){\r\n\t\t\t\t$.Dialog.fail(undefined, \"Cross-site Request Forgery attack detected. Please notify the site administartors.\");\r\n\t\t\t},\r\n\t\t\t404: function(){\r\n\t\t\t\t$.Dialog.fail(undefined, \"Error 404: The requested endpoint could not be found\");\r\n\t\t\t},\r\n\t\t\t500: function(){\r\n\t\t\t\t$.Dialog.fail(false, 'The request failed due to an internal server error. If this persists, please open an issue on GitHub using the link in the footer!');\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t// Copy any text to clipboard\r\n\t// Must be called from within an event handler\r\n\t$.copy = function(text){\r\n\t\tif (!document.queryCommandSupported('copy')){\r\n\t\t\tprompt('Copy with Ctrl+C, close with Enter', text);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tvar $helper = $.mk('textarea'),\r\n\t\t\tsuccess = false;\r\n\t\t$helper\r\n\t\t\t.css({\r\n\t\t\t\topacity: 0,\r\n\t\t\t\twidth: 0,\r\n\t\t\t\theight: 0,\r\n\t\t\t\tposition: 'fixed',\r\n\t\t\t\tleft: '-10px',\r\n\t\t\t\ttop: '50%',\r\n\t\t\t\tdisplay: 'block',\r\n\t\t\t})\r\n\t\t\t.text(text)\r\n\t\t\t.appendTo('body')\r\n\t\t\t.focus();\r\n\t\t$helper.get(0).select();\r\n\r\n\t\ttry {\r\n\t\t\tsuccess = document.execCommand('copy');\r\n\t\t} catch(e){}\r\n\r\n\t\tif (!success)\r\n\t\t\t$.Dialog.fail('Copy to clipboard', 'Copying text to clipboard failed!');\r\n\t\tsetTimeout(function(){\r\n\t\t\t$helper.remove();\r\n\t\t}, 1);\r\n\t};\r\n})(jQuery);\r\n\r\n$(function(){\r\n\t// Sign in button handler\r\n\tvar OAUTH_URL = window.OAUTH_URL,\r\n\t\tconsent = localStorage.getItem('cookie_consent');\r\n\r\n\t$('#signin').on('click',function(){\r\n\t\tvar $this = $(this),\r\n\t\t\topener = function(sure){\r\n\t\t\t\tif (!sure) return;\r\n\r\n\t\t\t\tlocalStorage.setItem('cookie_consent',1);\r\n\t\t\t\t$this.attr('disabled', true);\r\n\t\t\t\t$.Dialog.wait('Sign-in process', 'Redirecting you to DeviantArt', function(){\r\n\t\t\t\t\twindow.location.href = OAUTH_URL;\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\tif (consent == undefined) $.Dialog.confirm('EU Cookie Policy Notice','In compliance with the <a href=\"http://ec.europa.eu/ipg/basics/legal/cookies/index_en.htm\">EU Cookie Policy</a> we must inform you that our website will store cookies on your device to remember your logged in status between browser sessions.<br><br>If you would like to avoid these completly harmless pieces of information required to use this website, click \"Decline\" and continue browsing as a guest.<br><br>This warning will not appear again if you accept our use of persistent cookies.',['Accept','Decline'],opener);\r\n\t\telse opener(true);\r\n\t});\r\n\r\n\t// Countdown\r\n\tvar $cd, cdtimer,\r\n\t\tmonths = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\r\n\twindow.setCD = function(){\r\n\t\tvar $uc = $('#upcoming');\r\n\t\tif ($uc.length === 0) return;\r\n\t\t$cd = $uc.find('li').first().find('time').addClass('nodt');\r\n\t\tcdtimer = setInterval(function(){\r\n\t\t\tcdupdate($cd);\r\n\t\t}, 1000);\r\n\t\tcdupdate($cd);\r\n\r\n\t\t$uc.find('li').each(function(){\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\t$calendar = $this.children('.calendar'),\r\n\t\t\t\td = new Date($this.find('.countdown').data('airs') || $this.find('time').attr('datetime'));\r\n\t\t\t$calendar.children('.top').text(months[d.getMonth()]);\r\n\t\t\t$calendar.children('.bottom').text(d.getDate());\r\n\t\t});\r\n\t\twindow.updateTimesF();\r\n\t};\r\n\twindow.setCD();\r\n\tfunction pad(n){return n<10?'0'+n:n}\r\n\tfunction cdupdate($cd){\r\n\t\tvar now = new Date(),\r\n\t\t\tairs = new Date($cd.attr('datetime')),\r\n\t\t\tdiff = getTimeDiff(now, airs);\r\n\t\tif (diff.past === true || $cd.length === 0){\r\n\t\t\tif ($cd.length > 0){\r\n\t\t\t\tvar $oldcd = $cd,\r\n\t\t\t\t\t$nextime = $oldcd.parents('li').next().find('time');\r\n\t\t\t\t$oldcd.parents('li').remove();\r\n\t\t\t}\r\n\t\t\tclearInterval(cdtimer);\r\n\t\t\tif ($cd.length === 0 || $nextime.length === 0) return $('#upcoming').remove();\r\n\t\t\treturn window.setCD();\r\n\t\t}\r\n\t\tvar text = 'in ';\r\n\t\tif (diff.time < one.month){\r\n\t\t\tif (diff.week > 0)\r\n\t\t\t\tdiff.day += diff.week * 7;\r\n\t\t\tif (diff.day > 0)\r\n\t\t\t\ttext += diff.day+' day'+(diff.day!==1?'s':'')+' & ';\r\n\t\t\tif (diff.hour > 0)\r\n\t\t\t\ttext += diff.hour+':';\r\n\t\t\ttext += +pad(diff.minute)+':'+pad(diff.second);\r\n\t\t}\r\n\t\telse text = createTimeStr(now, airs);\r\n\t\t$cd.text(text);\r\n\t}\r\n\r\n\t// Quotes\r\n\tvar quotes = {\r\n\t\t\tApplejack: [\r\n\t\t\t\t\"Alright, sugarcube.\",\r\n\t\t\t\t\"A good night's sleep cures just about everythin'!\",\r\n\t\t\t],\r\n\t\t\tFluttershy: [\r\n\t\t\t\t\"<small>you rock! woo hoo!</small>\",\r\n\t\t\t\t\"<small>yay</small>\",\r\n\t\t\t\t\"<small>*squee*</small>\",\r\n\t\t\t\t\"You're sooo cute!\",\r\n\t\t\t\t\"<small>I'd like to be a tree</small>\",\r\n\t\t\t\t\"<strong>Your face!</strong>\",\r\n\t\t\t],\r\n\t\t\tPinkiePie: [\r\n\t\t\t\t\"It was under E!\",\r\n\t\t\t\t\"Make a wish!\",\r\n\t\t\t\t\"<em>Forever!</em>\",\r\n\t\t\t\t\"She's not a tree, Dashie!\",\r\n\t\t\t],\r\n\t\t\tRainbowDash: \"<strong>The</strong> one and only.\",\r\n\t\t\tRarity: \"Gorgeous!\",\r\n\t\t\tTwilightSparkle: [\r\n\t\t\t\t\"Together, we're friends.\",\r\n\t\t\t\t\"A mark of one's destiny singled out alone, fulfilled.\",\r\n\t\t\t\t\"You know she's not a tree, right?\",\r\n\t\t\t\t\"Huh?! I'm pancake! I mean, awake...\",\r\n\t\t\t],\r\n\t\t\tStarlightGlimmer: \"We're so pleased to have you here!\",\r\n\t\t\tApplebloom: [\r\n\t\t\t\t\"Buy some apples?\",\r\n\t\t\t\t\"But ah want it naaow!\",\r\n\t\t\t],\r\n\t\t\tBigMacintosh: \"Eeyup\",\r\n\t\t\tWinterWrapUp: \"We must work so very hard, it's just so much to do!\",\r\n\t\t\tMaudPie: \"Rocks.\",\r\n\t\t\tScrewLoose: \"woof woof\",\r\n\t\t\tButtonMash: [\r\n\t\t\t\t\"I don't get it\",\r\n\t\t\t\t\"But it looks <strong>sooo</strong> kewl!\"\r\n\t\t\t],\r\n\t\t\tTheGreatandPowerfulTrixie: [\r\n\t\t\t\t\"It seems we have some NEIGH-sayers in the audience.\",\r\n\t\t\t\t\"The Great and Powerful Trixie doesn't trust wheels.\",\r\n\t\t\t]\r\n\t\t}, $quote = $('#quote');\r\n\tfunction unCamelCase(str){\r\n\t\tstr = str.replace(/(\\w)and/g, '$1 and');\r\n\t\treturn str.charAt(0)+str.substring(1).replace(/([A-Z])/g,' $1');\r\n\t}\r\n\tfunction random(arr){\r\n\t\treturn arr[Math.floor(Math.random()*arr.length)]\r\n\t}\r\n\tfunction getQuote(){\r\n\t\t$quote.fadeTo(500,0,function(){\r\n\t\t\tvar qs = $.extend(true,{},quotes),\r\n\t\t\t\tpony = $quote.data('pony');\r\n\t\t\tif (typeof pony !== 'undefined') delete qs[pony];\r\n\t\t\tvar qskeys = Object.keys(qs);\r\n\t\t\tpony = random(qskeys);\r\n\t\t\tvar ponyQuotes = qs[pony];\r\n\t\t\t$quote.data('index', pony).attr('data-cite', unCamelCase(pony));\r\n\t\t\t$quote.html(typeof ponyQuotes === 'string' ? ponyQuotes : random(ponyQuotes)).fadeTo(500,1);\r\n\t\t});\r\n\t}\r\n\tgetQuote();\r\n\tvar quoteInterval;\r\n\t$('#sidebar').on('mouseenter',function(){\r\n\t\tclearInterval(quoteInterval);\r\n\t}).on('mouseleave',function(){\r\n\t\tquoteInterval = setInterval(getQuote,11000);\r\n\t}).trigger('mouseleave');\r\n});\r\n"],"sourceRoot":"/source/"}