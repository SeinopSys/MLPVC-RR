DocReady.push(function(){"use strict";var i=$("#signout"),e=$content.children("h1"),n=$(".session-list"),t=e.text().trim(),s=t===$sidebar.children(".welcome").find(".un").text().trim();n.find("button.remove").off("click").on("click",function(e){e.preventDefault();var n="Deleting session",o=$(this),a=o.closest("li"),l=a.children(".browser").text().trim(),c=a.children(".platform"),r=c.length?" on <em>"+c.children("strong").text().trim()+"</em>":"";if(0===a.index()&&/current/i.test(a.children().last().text()))return i.triggerHandler("click");var u=a.attr("id").replace(/\D/g,"");return"undefined"==typeof u||isNaN(u)||!isFinite(u)?$.Dialog.fail(n,"Could not locate Session ID, please reload the page and try again."):void $.Dialog.confirm(n,(s?"You":t)+" will be signed out of <em>"+l+"</em>"+r+".<br>Continue?",function(i){i&&($.Dialog.wait(n,"Signing out of "+l),$.post("/user/sessiondel/"+u,$.mkAjaxHandler(function(){return this.status?void(0!==a.siblings().length?(a.remove(),$.Dialog.close()):($.Dialog.success(n,"Session removed successfully"),HandleNav.reload(function(){$.Dialog.close()},2e3))):$.Dialog.fail(n,this.message)})))})}),n.find("button.useragent").on("click",function(i){i.preventDefault();var e=$(this);$.Dialog.info("User Agent string for session #"+e.parents("li").attr("id").replace(/\D/g,""),"<code>"+e.data("agent")+"</code>")}),$("#signout-everywhere").on("click",function(){var i="Sign out from ALL sessions";$.Dialog.confirm(i,"This will invalidate ALL sessions. Continue?",function(e){e&&($.Dialog.wait(i,"Signing out"),$.post("/signout?everywhere",$.mkAjaxHandler(function(){this.status?($.Dialog.success(i,this.message),HandleNav.reload(function(){$.Dialog.close()},1e3)):$.Dialog.fail(i,this.message)})))})}),$("#unlink").on("click",function(){var i="Unlink account & sign out";$.Dialog.confirm(i,"Are you sure you want to unlink your account?",function(e){e&&($.Dialog.wait(i,"Removing account link"),$.post("/signout?unlink",$.mkAjaxHandler(function(){this.status?($.Dialog.success(i,this.message),HandleNav.reload(function(){$.Dialog.close()},1e3)):$.Dialog.fail(i,this.message)})))})}),$("#awaiting-deviations").children("li").children(":last-child").children("button.check").on("click",function(i){i.preventDefault();var e=$(this).parents("li"),n=e.attr("id").split("-"),t=n[0],s=n[1];$.Dialog.wait("Deviation acceptance status","Checking"),$.post("/reserving/"+t+"s/"+s+"?lock",$.mkAjaxHandler(function(){if(!this.status)return $.Dialog.fail(!1,this.message);var i=this.message;$.Dialog.success(!1,"Sure looks like it."),$.Dialog.wait(!1,"Updating page"),HandleNav.reload(function(){$.Dialog.success(!1,i,!0)})}))})});
//# sourceMappingURL=user.min.js.map
