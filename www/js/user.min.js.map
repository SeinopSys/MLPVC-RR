{"version":3,"sources":["user.js"],"names":["DocReady","push","$signoutBtn","$","find","on","e","preventDefault","title","$btn","this","$li","closest","$browser","parent","browser","text","trim","platform","next","children","index","current","test","last","trigger","SessionID","parseInt","attr","isNaN","isFinite","Dialog","fail","confirm","sure","wait","post","mkAjaxHandler","status","remove","close","message","success","setTimeout","window","location","reload"],"mappings":"AAAAA,SAASC,KAAK,WACb,GAAIC,GAAcC,EAAE,WACpBA,GAAE,iBAAiBC,KAAK,iBAAiBC,GAAG,QAAQ,SAASC,GAC5DA,EAAEC,gBAEF,IAAIC,GAAQ,mBACXC,EAAON,EAAEO,MACTC,EAAMF,EAAKG,QAAQ,MACnBC,EAAWJ,EAAKK,SAChBC,EAAUF,EAASG,OAAOC,OAC1BC,EAAWL,EAASM,OAAOC,SAAS,UAAUJ,OAAOC,MAGtD,IAAoB,IAAhBN,EAAIU,QAAc,CACrB,GAAIC,GAAU,WAAWC,KAAKV,EAASC,SAASM,WAAWI,OAAOR,OAClE,IAAIM,EACH,MAAOpB,GAAYuB,QAAQ,SAG7B,GAAIC,GAAYC,SAASlB,EAAKmB,KAAK,YAEnC,OAAyB,mBAAdF,IAA6BG,MAAMH,KAAeI,SAASJ,GAC9DvB,EAAE4B,OAAOC,KAAKxB,EAAM,0EAE5BL,GAAE4B,OAAOE,QAAQzB,EAAM,iCAAkCO,EAAQ,gBAAgBG,EAAS,qBAAqB,SAASgB,GAClHA,IAEL/B,EAAE4B,OAAOI,KAAK3B,EAAM,oBAAoBO,GAExCZ,EAAEiC,KAAK,oBAAoBV,EAAWvB,EAAEkC,cAAc,WACjD3B,KAAK4B,QACR3B,EAAI4B,SACJpC,EAAE4B,OAAOS,SAELrC,EAAE4B,OAAOC,KAAKxB,EAAME,KAAK+B,iBAIjCtC,EAAE,uBAAuBE,GAAG,QAAQ,WACnC,GAAIG,GAAQ,4BAEZL,GAAE4B,OAAOE,QAAQzB,EAAM,+CAA+C,SAAS0B,GACzEA,IAEL/B,EAAE4B,OAAOI,KAAK3B,EAAM,eAEpBL,EAAEiC,KAAK,sBAAsBjC,EAAEkC,cAAc,WACxC3B,KAAK4B,QACRnC,EAAE4B,OAAOW,QAAQlC,EAAME,KAAK+B,SAC5BE,WAAW,WACVC,OAAOC,SAASC,UACf,MAEE3C,EAAE4B,OAAOC,KAAKxB,EAAME,KAAK+B,iBAIjCtC,EAAE,WAAWE,GAAG,QAAQ,WACvB,GAAIG,GAAQ,2BACZL,GAAE4B,OAAOE,QAAQzB,EAAM,gDAAgD,SAAS0B,GAC1EA,IAEL/B,EAAE4B,OAAOI,KAAK3B,EAAM,yBAEpBL,EAAEiC,KAAK,kBAAmBjC,EAAEkC,cAAc,WACrC3B,KAAK4B,QACRnC,EAAE4B,OAAOW,QAAQlC,EAAME,KAAK+B,SAC5BE,WAAW,WACVC,OAAOC,SAASC,UACf,MAEE3C,EAAE4B,OAAOC,KAAKxB,EAAME,KAAK+B","file":"user.min.js","sourcesContent":["DocReady.push(function User(){\r\n\tvar $signoutBtn = $('#signout');\r\n\t$('.session-list').find('button.remove').on('click',function(e){\r\n\t\te.preventDefault();\r\n\r\n\t\tvar title = 'Removing session',\r\n\t\t\t$btn = $(this),\r\n\t\t\t$li = $btn.closest('li'),\r\n\t\t\t$browser = $btn.parent(),\r\n\t\t\tbrowser = $browser.text().trim(),\r\n\t\t\tplatform = $browser.next().children('strong').text().trim();\r\n\r\n\t\t// First item is sometimes the current session, trigger logout button instead\r\n\t\tif ($li.index() === 0){\r\n\t\t\tvar current = /current/i.test($browser.parent().children().last().text());\r\n\t\t\tif (current)\r\n\t\t\t\treturn $signoutBtn.trigger('click');\r\n\t\t}\r\n\r\n\t\tvar SessionID = parseInt($btn.attr('data-sid'));\r\n\r\n\t\tif (typeof SessionID === 'undefined' || isNaN(SessionID) || !isFinite(SessionID))\r\n\t\t\treturn $.Dialog.fail(title,'Could not locate Session ID, please reload the page and try again.');\r\n\r\n\t\t$.Dialog.confirm(title,'You\\'ll be logged out form <em>'+browser+'</em> on <em>'+platform+'</em><br>Continue?',function(sure){\r\n\t\t\tif (!sure) return;\r\n\r\n\t\t\t$.Dialog.wait(title,'Signing out from '+browser);\r\n\r\n\t\t\t$.post('/user/sessiondel/'+SessionID, $.mkAjaxHandler(function(){\r\n\t\t\t\tif (this.status){\r\n\t\t\t\t\t$li.remove();\r\n\t\t\t\t\t$.Dialog.close();\r\n\t\t\t\t}\r\n\t\t\t\telse $.Dialog.fail(title,this.message);\r\n\t\t\t}));\r\n\t\t});\r\n\t});\r\n\t$('#signout-everywhere').on('click',function(){\r\n\t\tvar title = 'Sign out from ALL sessions';\r\n\r\n\t\t$.Dialog.confirm(title,\"This will invalidate ALL sessions. Continue?\",function(sure){\r\n\t\t\tif (!sure) return;\r\n\r\n\t\t\t$.Dialog.wait(title,'Signing out');\r\n\r\n\t\t\t$.post('/signout?everywhere',$.mkAjaxHandler(function(){\r\n\t\t\t\tif (this.status){\r\n\t\t\t\t\t$.Dialog.success(title,this.message);\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t},1000);\r\n\t\t\t\t}\r\n\t\t\t\telse $.Dialog.fail(title,this.message);\r\n\t\t\t}));\r\n\t\t});\r\n\t});\r\n\t$('#unlink').on('click',function(){\r\n\t\tvar title = 'Unlink account & sign out';\r\n\t\t$.Dialog.confirm(title,'Are you sure you want to unlink your account?',function(sure){\r\n\t\t\tif (!sure) return;\r\n\r\n\t\t\t$.Dialog.wait(title,'Removing account link');\r\n\r\n\t\t\t$.post('/signout?unlink', $.mkAjaxHandler(function(){\r\n\t\t\t\tif (this.status){\r\n\t\t\t\t\t$.Dialog.success(title,this.message);\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t},1000);\r\n\t\t\t\t}\r\n\t\t\t\telse $.Dialog.fail(title,this.message);\r\n\t\t\t}));\r\n\t\t});\r\n\t});\r\n});\r\n"],"sourceRoot":"/source/"}