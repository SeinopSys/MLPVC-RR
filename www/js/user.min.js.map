{"version":3,"sources":["user.js"],"names":["$","$signoutBtn","find","on","e","preventDefault","title","$btn","this","$li","closest","browser","parent","text","trim","index","test","trigger","sid","parseInt","attr","isNaN","Dialog","fail","confirm","sure","wait","post","mkAjaxHandler","status","remove","close","message","success","setTimeout","window","location","reload"],"mappings":"AAAAA,EAAE,WACD,GAAIC,GAAcD,EAAE,WACpBA,GAAE,iBAAiBE,KAAK,iBAAiBC,GAAG,QAAQ,SAASC,GAC5DA,EAAEC,gBAEF,IAAIC,GAAQ,mBACXC,EAAOP,EAAEQ,MACTC,EAAMF,EAAKG,QAAQ,MACnBC,EAAUJ,EAAKK,SAASC,OAAOC,MAGhC,IAAoB,IAAhBL,EAAIM,SAAiB,eAAeC,KAAKL,GAC5C,MAAOV,GAAYgB,QAAQ,QAE5B,IAAIC,GAAMC,SAASZ,EAAKa,KAAK,YAE7B,OAAmB,mBAARF,IAAuBG,MAAMH,GAChClB,EAAEsB,OAAOC,KAAKjB,EAAM,0EAE5BN,GAAEsB,OAAOE,QAAQlB,EAAM,yEAAyEK,EAAQ,yBAAyB,SAASc,GACpIA,IAELzB,EAAEsB,OAAOI,KAAKpB,EAAM,oBAAoBK,GAExCX,EAAE2B,KAAK,oBAAoBT,EAAKlB,EAAE4B,cAAc,WAC3CpB,KAAKqB,QACRpB,EAAIqB,SACJ9B,EAAEsB,OAAOS,SAEL/B,EAAEsB,OAAOC,KAAKjB,EAAME,KAAKwB,iBAIjChC,EAAE,uBAAuBG,GAAG,QAAQ,WACnC,GAAIG,GAAQ,4BAEZN,GAAEsB,OAAOE,QAAQlB,EAAM,+CAA+C,SAASmB,GACzEA,IAELzB,EAAEsB,OAAOI,KAAKpB,EAAM,eAEpBN,EAAE2B,KAAK,sBAAsB3B,EAAE4B,cAAc,WACxCpB,KAAKqB,QACR7B,EAAEsB,OAAOW,QAAQ3B,EAAME,KAAKwB,SAC5BE,WAAW,WACVC,OAAOC,SAASC,UACf,MAEErC,EAAEsB,OAAOC,KAAKjB,EAAME,KAAKwB,iBAIjChC,EAAE,WAAWG,GAAG,QAAQ,WACvB,GAAIG,GAAQ,2BACZN,GAAEsB,OAAOE,QAAQlB,EAAM,gDAAgD,SAASmB,GAC1EA,IAELzB,EAAEsB,OAAOI,KAAKpB,EAAM,yBAEpBN,EAAE2B,KAAK,kBAAmB3B,EAAE4B,cAAc,WACrCpB,KAAKqB,QACR7B,EAAEsB,OAAOW,QAAQ3B,EAAME,KAAKwB,SAC5BE,WAAW,WACVC,OAAOC,SAASC,UACf,MAEErC,EAAEsB,OAAOC,KAAKjB,EAAME,KAAKwB","file":"user.min.js","sourcesContent":["$(function(){\r\n\tvar $signoutBtn = $('#signout');\r\n\t$('.session-list').find('button.remove').on('click',function(e){\r\n\t\te.preventDefault();\r\n\r\n\t\tvar title = 'Sign out session',\r\n\t\t\t$btn = $(this),\r\n\t\t\t$li = $btn.closest('li'),\r\n\t\t\tbrowser = $btn.parent().text().trim();\r\n\r\n\t\t// First item is sometimes the current session, trigger logout button instead\r\n\t\tif ($li.index() === 0 && /\\(current\\)$/.test(browser))\r\n\t\t\treturn $signoutBtn.trigger('click');\r\n\r\n\t\tvar sid = parseInt($btn.attr('data-sid'));\r\n\r\n\t\tif (typeof sid === 'undefined' || isNaN(sid))\r\n\t\t\treturn $.Dialog.fail(title,'Could not locate Session ID, please reload the page and try again.');\r\n\r\n\t\t$.Dialog.confirm(title,'This will invalidate the active session in the following browser: <em>'+browser+'</em><br>Are you sure?',function(sure){\r\n\t\t\tif (!sure) return;\r\n\r\n\t\t\t$.Dialog.wait(title,'Signing out from '+browser);\r\n\r\n\t\t\t$.post('/user/sessiondel/'+sid, $.mkAjaxHandler(function(){\r\n\t\t\t\tif (this.status){\r\n\t\t\t\t\t$li.remove();\r\n\t\t\t\t\t$.Dialog.close();\r\n\t\t\t\t}\r\n\t\t\t\telse $.Dialog.fail(title,this.message);\r\n\t\t\t}));\r\n\t\t});\r\n\t});\r\n\t$('#signout-everywhere').on('click',function(){\r\n\t\tvar title = 'Sign out from ALL sessions';\r\n\r\n\t\t$.Dialog.confirm(title,\"This will invalidate ALL sessions. Continue?\",function(sure){\r\n\t\t\tif (!sure) return;\r\n\r\n\t\t\t$.Dialog.wait(title,'Signing out');\r\n\r\n\t\t\t$.post('/signout?everywhere',$.mkAjaxHandler(function(){\r\n\t\t\t\tif (this.status){\r\n\t\t\t\t\t$.Dialog.success(title,this.message);\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t},1000);\r\n\t\t\t\t}\r\n\t\t\t\telse $.Dialog.fail(title,this.message);\r\n\t\t\t}));\r\n\t\t});\r\n\t});\r\n\t$('#unlink').on('click',function(){\r\n\t\tvar title = 'Unlink account & sign out';\r\n\t\t$.Dialog.confirm(title,'Are you sure you want to unlink your account?',function(sure){\r\n\t\t\tif (!sure) return;\r\n\r\n\t\t\t$.Dialog.wait(title,'Removing account link');\r\n\r\n\t\t\t$.post('/signout?unlink', $.mkAjaxHandler(function(){\r\n\t\t\t\tif (this.status){\r\n\t\t\t\t\t$.Dialog.success(title,this.message);\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t},1000);\r\n\t\t\t\t}\r\n\t\t\t\telse $.Dialog.fail(title,this.message);\r\n\t\t\t}));\r\n\t\t});\r\n\t});\r\n});\r\n"],"sourceRoot":"/source/"}