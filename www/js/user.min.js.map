{"version":3,"sources":["user.js"],"names":["DocReady","push","$signoutBtn","$","find","on","e","preventDefault","title","$btn","this","$li","closest","browser","parent","text","trim","index","test","trigger","sid","parseInt","attr","isNaN","Dialog","fail","confirm","sure","wait","post","mkAjaxHandler","status","remove","close","message","success","setTimeout","window","location","reload"],"mappings":"AAAAA,SAASC,KAAK,WACb,GAAIC,GAAcC,EAAE,WACpBA,GAAE,iBAAiBC,KAAK,iBAAiBC,GAAG,QAAQ,SAASC,GAC5DA,EAAEC,gBAEF,IAAIC,GAAQ,mBACXC,EAAON,EAAEO,MACTC,EAAMF,EAAKG,QAAQ,MACnBC,EAAUJ,EAAKK,SAASC,OAAOC,MAGhC,IAAoB,IAAhBL,EAAIM,SAAiB,eAAeC,KAAKL,GAC5C,MAAOX,GAAYiB,QAAQ,QAE5B,IAAIC,GAAMC,SAASZ,EAAKa,KAAK,YAE7B,OAAmB,mBAARF,IAAuBG,MAAMH,GAChCjB,EAAEqB,OAAOC,KAAKjB,EAAM,0EAE5BL,GAAEqB,OAAOE,QAAQlB,EAAM,yEAAyEK,EAAQ,yBAAyB,SAASc,GACpIA,IAELxB,EAAEqB,OAAOI,KAAKpB,EAAM,oBAAoBK,GAExCV,EAAE0B,KAAK,oBAAoBT,EAAKjB,EAAE2B,cAAc,WAC3CpB,KAAKqB,QACRpB,EAAIqB,SACJ7B,EAAEqB,OAAOS,SAEL9B,EAAEqB,OAAOC,KAAKjB,EAAME,KAAKwB,iBAIjC/B,EAAE,uBAAuBE,GAAG,QAAQ,WACnC,GAAIG,GAAQ,4BAEZL,GAAEqB,OAAOE,QAAQlB,EAAM,+CAA+C,SAASmB,GACzEA,IAELxB,EAAEqB,OAAOI,KAAKpB,EAAM,eAEpBL,EAAE0B,KAAK,sBAAsB1B,EAAE2B,cAAc,WACxCpB,KAAKqB,QACR5B,EAAEqB,OAAOW,QAAQ3B,EAAME,KAAKwB,SAC5BE,WAAW,WACVC,OAAOC,SAASC,UACf,MAEEpC,EAAEqB,OAAOC,KAAKjB,EAAME,KAAKwB,iBAIjC/B,EAAE,WAAWE,GAAG,QAAQ,WACvB,GAAIG,GAAQ,2BACZL,GAAEqB,OAAOE,QAAQlB,EAAM,gDAAgD,SAASmB,GAC1EA,IAELxB,EAAEqB,OAAOI,KAAKpB,EAAM,yBAEpBL,EAAE0B,KAAK,kBAAmB1B,EAAE2B,cAAc,WACrCpB,KAAKqB,QACR5B,EAAEqB,OAAOW,QAAQ3B,EAAME,KAAKwB,SAC5BE,WAAW,WACVC,OAAOC,SAASC,UACf,MAEEpC,EAAEqB,OAAOC,KAAKjB,EAAME,KAAKwB","file":"user.min.js","sourcesContent":["DocReady.push(function User(){\r\n\tvar $signoutBtn = $('#signout');\r\n\t$('.session-list').find('button.remove').on('click',function(e){\r\n\t\te.preventDefault();\r\n\r\n\t\tvar title = 'Sign out session',\r\n\t\t\t$btn = $(this),\r\n\t\t\t$li = $btn.closest('li'),\r\n\t\t\tbrowser = $btn.parent().text().trim();\r\n\r\n\t\t// First item is sometimes the current session, trigger logout button instead\r\n\t\tif ($li.index() === 0 && /\\(current\\)$/.test(browser))\r\n\t\t\treturn $signoutBtn.trigger('click');\r\n\r\n\t\tvar sid = parseInt($btn.attr('data-sid'));\r\n\r\n\t\tif (typeof sid === 'undefined' || isNaN(sid))\r\n\t\t\treturn $.Dialog.fail(title,'Could not locate Session ID, please reload the page and try again.');\r\n\r\n\t\t$.Dialog.confirm(title,'This will invalidate the active session in the following browser: <em>'+browser+'</em><br>Are you sure?',function(sure){\r\n\t\t\tif (!sure) return;\r\n\r\n\t\t\t$.Dialog.wait(title,'Signing out from '+browser);\r\n\r\n\t\t\t$.post('/user/sessiondel/'+sid, $.mkAjaxHandler(function(){\r\n\t\t\t\tif (this.status){\r\n\t\t\t\t\t$li.remove();\r\n\t\t\t\t\t$.Dialog.close();\r\n\t\t\t\t}\r\n\t\t\t\telse $.Dialog.fail(title,this.message);\r\n\t\t\t}));\r\n\t\t});\r\n\t});\r\n\t$('#signout-everywhere').on('click',function(){\r\n\t\tvar title = 'Sign out from ALL sessions';\r\n\r\n\t\t$.Dialog.confirm(title,\"This will invalidate ALL sessions. Continue?\",function(sure){\r\n\t\t\tif (!sure) return;\r\n\r\n\t\t\t$.Dialog.wait(title,'Signing out');\r\n\r\n\t\t\t$.post('/signout?everywhere',$.mkAjaxHandler(function(){\r\n\t\t\t\tif (this.status){\r\n\t\t\t\t\t$.Dialog.success(title,this.message);\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t},1000);\r\n\t\t\t\t}\r\n\t\t\t\telse $.Dialog.fail(title,this.message);\r\n\t\t\t}));\r\n\t\t});\r\n\t});\r\n\t$('#unlink').on('click',function(){\r\n\t\tvar title = 'Unlink account & sign out';\r\n\t\t$.Dialog.confirm(title,'Are you sure you want to unlink your account?',function(sure){\r\n\t\t\tif (!sure) return;\r\n\r\n\t\t\t$.Dialog.wait(title,'Removing account link');\r\n\r\n\t\t\t$.post('/signout?unlink', $.mkAjaxHandler(function(){\r\n\t\t\t\tif (this.status){\r\n\t\t\t\t\t$.Dialog.success(title,this.message);\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t},1000);\r\n\t\t\t\t}\r\n\t\t\t\telse $.Dialog.fail(title,this.message);\r\n\t\t\t}));\r\n\t\t});\r\n\t});\r\n});\r\n"],"sourceRoot":"/source/"}