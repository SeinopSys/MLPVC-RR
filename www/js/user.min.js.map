{"version":3,"sources":["user.js"],"names":["DocReady","push","$signoutBtn","$","$name","$content","children","name","text","trim","sameUser","$sidebar","find","on","e","preventDefault","title","$btn","this","$li","closest","$browser","parent","browser","$platform","next","platform","length","index","current","test","last","trigger","SessionID","parseInt","attr","isNaN","isFinite","Dialog","fail","confirm","sure","wait","post","mkAjaxHandler","status","siblings","remove","close","success","HandleNav","reload","message"],"mappings":"AAAAA,SAASC,KAAK,WACb,GAAIC,GAAcC,EAAE,YACnBC,EAAQC,SAASC,SAAS,MAC1BC,EAAOH,EAAMI,OAAOC,OACpBC,EAAWH,IAASI,SAASL,SAAS,YAAYM,KAAK,OAAOJ,OAAOC,MACtEN,GAAE,iBAAiBS,KAAK,iBAAiBC,GAAG,QAAQ,SAASC,GAC5DA,EAAEC,gBAEF,IAAIC,GAAQ,mBACXC,EAAOd,EAAEe,MACTC,EAAMF,EAAKG,QAAQ,MACnBC,EAAWJ,EAAKK,SAChBC,EAAUF,EAASb,OAAOC,OAC1Be,EAAYH,EAASI,OAAOnB,SAAS,UACrCoB,EAAWF,EAAUG,OAAS,WAAWH,EAAUhB,OAAOC,OAAO,QAAU,EAG5E,IAAoB,IAAhBU,EAAIS,QAAc,CACrB,GAAIC,GAAU,WAAWC,KAAKT,EAASC,SAAShB,WAAWyB,OAAOvB,OAClE,IAAIqB,EACH,MAAO3B,GAAY8B,QAAQ,SAG7B,GAAIC,GAAYC,SAASjB,EAAKkB,KAAK,YAEnC,OAAyB,mBAAdF,IAA6BG,MAAMH,KAAeI,SAASJ,GAC9D9B,EAAEmC,OAAOC,KAAKvB,EAAM,0EAE5Bb,GAAEmC,OAAOE,QAAQxB,GAAON,EAAS,MAAMH,GAAM,gCAAgCgB,EAAQ,QAAQG,EAAS,iBAAiB,SAASe,GAC1HA,IAELtC,EAAEmC,OAAOI,KAAK1B,EAAM,oBAAoBO,GAExCpB,EAAEwC,KAAK,oBAAoBV,EAAW9B,EAAEyC,cAAc,WACrD,MAAK1B,MAAK2B,YAEoB,IAA1B1B,EAAI2B,WAAWnB,QAClBR,EAAI4B,SACJ5C,EAAEmC,OAAOU,UAGT7C,EAAEmC,OAAOW,QAAQjC,EAAO,gCACxBkC,UAAUC,OAAO,WAChBhD,EAAEmC,OAAOU,SACR,OAVsB7C,EAAEmC,OAAOC,KAAKvB,EAAME,KAAKkC,iBAerDjD,EAAE,uBAAuBU,GAAG,QAAQ,WACnC,GAAIG,GAAQ,4BAEZb,GAAEmC,OAAOE,QAAQxB,EAAM,+CAA+C,SAASyB,GACzEA,IAELtC,EAAEmC,OAAOI,KAAK1B,EAAM,eAEpBb,EAAEwC,KAAK,sBAAsBxC,EAAEyC,cAAc,WACxC1B,KAAK2B,QACR1C,EAAEmC,OAAOW,QAAQjC,EAAME,KAAKkC,SAC5BF,UAAUC,OAAO,WAChBhD,EAAEmC,OAAOU,SACR,MAEE7C,EAAEmC,OAAOC,KAAKvB,EAAME,KAAKkC,iBAIjCjD,EAAE,WAAWU,GAAG,QAAQ,WACvB,GAAIG,GAAQ,2BACZb,GAAEmC,OAAOE,QAAQxB,EAAM,gDAAgD,SAASyB,GAC1EA,IAELtC,EAAEmC,OAAOI,KAAK1B,EAAM,yBAEpBb,EAAEwC,KAAK,kBAAmBxC,EAAEyC,cAAc,WACrC1B,KAAK2B,QACR1C,EAAEmC,OAAOW,QAAQjC,EAAME,KAAKkC,SAC5BF,UAAUC,OAAO,WAChBhD,EAAEmC,OAAOU,SACR,MAEE7C,EAAEmC,OAAOC,KAAKvB,EAAME,KAAKkC","file":"user.min.js","sourcesContent":["DocReady.push(function User(){\r\n\tvar $signoutBtn = $('#signout'),\r\n\t\t$name = $content.children('h1'),\r\n\t\tname = $name.text().trim(),\r\n\t\tsameUser = name === $sidebar.children('.welcome').find('.un').text().trim();\r\n\t$('.session-list').find('button.remove').on('click',function(e){\r\n\t\te.preventDefault();\r\n\r\n\t\tvar title = 'Removing session',\r\n\t\t\t$btn = $(this),\r\n\t\t\t$li = $btn.closest('li'),\r\n\t\t\t$browser = $btn.parent(),\r\n\t\t\tbrowser = $browser.text().trim(),\r\n\t\t\t$platform = $browser.next().children('strong'),\r\n\t\t\tplatform = $platform.length ? ' on <em>'+$platform.text().trim()+'</em>' : '';\r\n\r\n\t\t// First item is sometimes the current session, trigger logout button instead\r\n\t\tif ($li.index() === 0){\r\n\t\t\tvar current = /current/i.test($browser.parent().children().last().text());\r\n\t\t\tif (current)\r\n\t\t\t\treturn $signoutBtn.trigger('click');\r\n\t\t}\r\n\r\n\t\tvar SessionID = parseInt($btn.attr('data-sid'));\r\n\r\n\t\tif (typeof SessionID === 'undefined' || isNaN(SessionID) || !isFinite(SessionID))\r\n\t\t\treturn $.Dialog.fail(title,'Could not locate Session ID, please reload the page and try again.');\r\n\r\n\t\t$.Dialog.confirm(title,(sameUser?'You':name)+' will be logged out form <em>'+browser+'</em>'+platform+'.<br>Continue?',function(sure){\r\n\t\t\tif (!sure) return;\r\n\r\n\t\t\t$.Dialog.wait(title,'Signing out from '+browser);\r\n\r\n\t\t\t$.post('/user/sessiondel/'+SessionID, $.mkAjaxHandler(function(){\r\n\t\t\t\tif (!this.status) return $.Dialog.fail(title,this.message);\r\n\r\n\t\t\t\tif ($li.siblings().length !== 0){\r\n\t\t\t\t\t$li.remove();\r\n\t\t\t\t\t$.Dialog.close();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t$.Dialog.success(title, 'Session removed successfully');\r\n\t\t\t\t\tHandleNav.reload(function(){\r\n\t\t\t\t\t\t$.Dialog.close();\r\n\t\t\t\t\t},2000);\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t});\r\n\t});\r\n\t$('#signout-everywhere').on('click',function(){\r\n\t\tvar title = 'Sign out from ALL sessions';\r\n\r\n\t\t$.Dialog.confirm(title,\"This will invalidate ALL sessions. Continue?\",function(sure){\r\n\t\t\tif (!sure) return;\r\n\r\n\t\t\t$.Dialog.wait(title,'Signing out');\r\n\r\n\t\t\t$.post('/signout?everywhere',$.mkAjaxHandler(function(){\r\n\t\t\t\tif (this.status){\r\n\t\t\t\t\t$.Dialog.success(title,this.message);\r\n\t\t\t\t\tHandleNav.reload(function(){\r\n\t\t\t\t\t\t$.Dialog.close();\r\n\t\t\t\t\t},1000);\r\n\t\t\t\t}\r\n\t\t\t\telse $.Dialog.fail(title,this.message);\r\n\t\t\t}));\r\n\t\t});\r\n\t});\r\n\t$('#unlink').on('click',function(){\r\n\t\tvar title = 'Unlink account & sign out';\r\n\t\t$.Dialog.confirm(title,'Are you sure you want to unlink your account?',function(sure){\r\n\t\t\tif (!sure) return;\r\n\r\n\t\t\t$.Dialog.wait(title,'Removing account link');\r\n\r\n\t\t\t$.post('/signout?unlink', $.mkAjaxHandler(function(){\r\n\t\t\t\tif (this.status){\r\n\t\t\t\t\t$.Dialog.success(title,this.message);\r\n\t\t\t\t\tHandleNav.reload(function(){\r\n\t\t\t\t\t\t$.Dialog.close();\r\n\t\t\t\t\t},1000);\r\n\t\t\t\t}\r\n\t\t\t\telse $.Dialog.fail(title,this.message);\r\n\t\t\t}));\r\n\t\t});\r\n\t});\r\n});\r\n"],"sourceRoot":"/source/"}