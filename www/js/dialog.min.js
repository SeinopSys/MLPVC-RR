!function(e,t){"use strict";function n(t){return e.mk("div").attr("id",t)}var i={fail:"red",success:"green",wait:"blue",request:"",confirm:"orange",info:"darkblue"},o={fail:"fail",success:"success",wait:"info",request:"warn",confirm:"caution",info:"info"},a={fail:"Error",success:"Success",wait:"Sending request",request:"Input required",confirm:"Confirmation",info:"Info"},l={fail:"There was an issue while processing the request.",success:"Whatever you just did, it was completed successfully.",request:"The request did not require any additional info.",confirm:"Are you sure?",info:"No message provided."},r=e("#dialogOverlay"),f=e("#dialogContent"),s=e("#dialogHeader"),c=e("#dialogBox"),d=e("#dialogWrap"),u=e("#dialogScroll"),p=e("#dialogButtons");e.Dialog=function(){function y(){if(!("undefined"!=typeof K&&K instanceof jQuery)){var n=e(":focus");K=n.length>0?n.last():t}}function g(){"undefined"!=typeof K&&K instanceof jQuery&&(K.focus(),K=t)}function v(){var t=e("#dialogContent").find("input,select,textarea").filter(":visible"),n=e("#dialogButtons").children();t.length>0?t.first().focus():n.length>0&&n.first().focus()}function b(e){var t=f.children(":not(#dialogButtons)").last().add(p).find("input, button, select, textarea");e===q?t.filter(":not(:disabled)").addClass("temp-disable").attr("disabled",q):t.filter(".temp-disable").removeClass("temp-disable").attr("disabled",x)}function h(g,h,m,C,k){if("string"!=typeof g||"undefined"==typeof i[g])throw new TypeError("Invalid dialog type: "+typeof g);"function"==typeof C&&"function"!=typeof k&&(k=C,C=t);var K=!1;"boolean"==typeof k?(K=k,k=t):"boolean"==typeof C&&"undefined"==typeof k&&(K=C,C=t),"undefined"==typeof h?h=a[g]:h===!1&&(h=t),m||(m=l[g]);var B,T={type:g,title:h,content:m||l[g],buttons:C,color:i[g]},D=Boolean(w),O=n().append(T.content),S=D&&"request"===w.type&&["fail","wait"].includes(T.type);if(T.color.length&&O.addClass(T.color),D)if(r=e("#dialogOverlay"),c=e("#dialogBox"),s=e("#dialogHeader"),"string"==typeof T.title&&s.text(T.title),f=e("#dialogContent"),S&&!K){B=f.children(":not(#dialogButtons)").last();var j=B.children(".notice");j.length||(j=e.mk("div").append(e.mk("p")),B.append(j)),j.attr("class","notice "+o[T.type]).children("p").html(T.content).show(),b("wait"===T.type?q:x)}else w=T,p=e("#dialogButtons").empty(),b(q),f.append(O),T.buttons&&(0===p.length&&(p=n("dialogButtons")),p.appendTo(f));else y(),w=T,r=n("dialogOverlay"),s=n("dialogHeader").text(T.title||a[g]),f=n("dialogContent"),c=n("dialogBox"),u=n("dialogScroll"),d=n("dialogWrap"),f.append(O),p=n("dialogButtons").appendTo(f),c.append(s).append(f),r.append(u.append(d.append(c))).appendTo($body),$body.addClass("dialog-open");!S&&T.color&&(s.attr("class",T.color+"-bg"),f.attr("class",T.color+"-border")),!S&&T.buttons&&e.each(T.buttons,function(t,n){var i=e.mk("input").attr({type:"button","class":T.color+"-bg"});"function"==typeof n?n={action:n}:n.form&&(B=e("#"+n.form),1===B.length&&(i.on("click",function(){B.find("input[type=submit]").first().trigger("click")}),B.prepend(e.mk("input").attr("type","submit").hide()))),i.val(t).on("keydown",function(t){if(-1!==[Key.Enter,Key.Space].indexOf(t.keyCode))t.preventDefault(),i.trigger("click");else if([Key.Tab,Key.LeftArrow,Key.RightArrow].includes(t.keyCode)){t.preventDefault();var n=p.children(),o=n.filter(":focus"),a=f.find(":input");e.isKey(Key.LeftArrow,t)&&(t.shiftKey=!0),o.length?t.shiftKey?o.prev().length?o.prev().focus():e.isKey(Key.Tab,t)&&(a.length>0?a:n).filter(":visible").last().focus():o.next().length?o.next().focus():e.isKey(Key.Tab,t)&&a.add(n).filter(":visible").first().focus():a.add(n)[t.shiftKey?"last":"first"]().focus()}}).on("click",function(t){t.preventDefault(),e.callCallback(n.action,[t])}),p.append(i)}),v(),$w.trigger("dialog-opened"),e.callCallback(k,[B])}function m(n){return C.isOpen()?(r.remove(),w=t,g(),e.callCallback(n),void $body.removeClass("dialog-open")):e.callCallback(n,!1)}var w=f.length?{}:t,C={isOpen:function(){return"object"==typeof w}},k={Close:function(){m()}};C.fail=function(e,t,n){h("fail",e,t,k,n===!0)},C.success=function(e,n,i,o){h("success",e,n,i===!0?k:t,o)},C.wait=function(n,i,o){"boolean"==typeof i&&"undefined"==typeof o&&(o=i,i=t),"string"!=typeof i&&(i="Sending request"),h("wait",n,e.capitalize(i)+"&hellip;",o===!0)},C.request=function(e,n,i,o,a){"function"==typeof o&&"undefined"==typeof a&&(a=o,o=t);var l={};o!==!1?(i&&(l[o||"Submit"]={submit:!0,form:i}),l.Cancel=function(){m()}):l.Close={action:function(){m()},form:i},h("request",e,n,l,a)},C.confirm=function(t,n,i,o){"function"==typeof i&&"undefined"==typeof o&&(o=i),"function"!=typeof o&&(o=function(){m()}),e.isArray(i)||(i=["Eeyup","Nope"]);var a={};a[i[0]]=function(){o(!0)},a[i[1]]=function(){o(!1),m.call()},h("confirm",t,n,a)},C.info=function(e,t,n){h("info",e,t,k,n)};var K;C.setFocusedElement=function(e){e instanceof jQuery&&(K=e)};var q=!0,x=!1;return C.close=function(){m.apply(C,arguments)},C.clearNotice=function(e){var t=f.find(".notice");return t.length?"undefined"==typeof e?(t.hide(),!0):e.test(t.html())?(t.hide(),!0):!1:!1},C}(),$body.on("keydown",function(t){if(!e.Dialog.isOpen()||t.keyCode!==Key.Tab)return!0;var n=f.find(":input"),i=n.filter(t.target),o=n.index(i);if(0===i.length)t.preventDefault(),n.first().focus();else if(t.shiftKey)if(0===o)t.preventDefault(),p.find(":last").focus();else{var a=i.parent();if(!a.is(p))return!0;a.children().first().is(i)&&(t.preventDefault(),n.eq(n.index(i)-1).focus())}})}(jQuery);
//# sourceMappingURL=dialog.min.js.map
