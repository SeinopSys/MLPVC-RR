"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},_createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}();!function(t,e){var o={fail:"red",success:"green",wait:"blue",request:"",confirm:"orange",info:"darkblue"},i={fail:"fail",success:"success",wait:"info",request:"warn",confirm:"caution",info:"info"},n={fail:"Error",success:"Success",wait:"Sending request",request:"Input required",confirm:"Confirmation",info:"Info"},s={fail:"There was an issue while processing the request.",success:"Whatever you just did, it was completed successfully.",request:"The request did not require any additional info.",confirm:"Are you sure?",info:"No message provided."},l=function(){function l(){_classCallCheck(this,l),this.$dialogOverlay=t("#dialogOverlay"),this.$dialogContent=t("#dialogContent"),this.$dialogHeader=t("#dialogHeader"),this.$dialogBox=t("#dialogBox"),this.$dialogWrap=t("#dialogWrap"),this.$dialogScroll=t("#dialogScroll"),this.$dialogButtons=t("#dialogButtons"),this._open=this.$dialogContent.length?{}:e,this._CloseButton={Close:function(){t.Dialog.close()}},this._$focusedElement=e}return _createClass(l,[{key:"isOpen",value:function(){return"object"===_typeof(this._open)}},{key:"_display",value:function(l,a,d,r,u){if("string"!=typeof l||"undefined"==typeof o[l])throw new TypeError("Invalid dialog type: "+("undefined"==typeof l?"undefined":_typeof(l)));"function"==typeof r&&"function"!=typeof u&&(u=r,r=e);var c=!1;"boolean"==typeof u?(c=u,u=e):"boolean"==typeof r&&"undefined"==typeof u&&(c=r,r=e),"undefined"==typeof a?a=n[l]:a===!1&&(a=e),d||(d=s[l]);var f={type:l,title:a,content:d||s[l],buttons:r,color:o[l]},p=Boolean(this._open),h=t.mk("div").append(f.content),g=p&&"request"===this._open.type&&["fail","wait"].includes(f.type)&&!c,y=void 0;if(f.color.length&&h.addClass(f.color),p)if(this.$dialogOverlay=t("#dialogOverlay"),this.$dialogBox=t("#dialogBox"),this.$dialogHeader=t("#dialogHeader"),"string"==typeof f.title&&this.$dialogHeader.text(f.title),this.$dialogContent=t("#dialogContent"),g){y=this.$dialogContent.children(":not(#dialogButtons)").last();var v=y.children(".notice:last-child");v.length?v.show():(v=t.mk("div").append(t.mk("p")),y.append(v)),v.attr("class","notice "+i[f.type]).children("p").html(f.content).show(),this._controlInputs("wait"===f.type)}else this._open=f,this.$dialogButtons=t("#dialogButtons").empty(),this._controlInputs(!0),this.$dialogContent.append(h),f.buttons&&(0===this.$dialogButtons.length&&(this.$dialogButtons=t.mk("div","dialogButtons")),this.$dialogButtons.appendTo(this.$dialogContent));else this._storeFocus(),this._open=f,this.$dialogOverlay=t.mk("div","dialogOverlay"),this.$dialogHeader=t.mk("div","dialogHeader").text(f.title||n[l]),this.$dialogContent=t.mk("div","dialogContent"),this.$dialogBox=t.mk("div","dialogBox"),this.$dialogScroll=t.mk("div","dialogScroll"),this.$dialogWrap=t.mk("div","dialogWrap"),this.$dialogContent.append(h),this.$dialogButtons=t.mk("div","dialogButtons").appendTo(this.$dialogContent),this.$dialogBox.append(this.$dialogHeader).append(this.$dialogContent),this.$dialogOverlay.append(this.$dialogScroll.append(this.$dialogWrap.append(this.$dialogBox))).appendTo($body),$body.addClass("dialog-open");g||(this.$dialogHeader.attr("class",f.color?f.color+"-bg":""),this.$dialogContent.attr("class",f.color?f.color+"-border":""));var $=this;if(!g&&f.buttons&&t.each(f.buttons,function(e,o){var i=t.mk("input").attr({type:"button","class":f.color+"-bg"});"function"==typeof o?o={action:o}:o.form&&(y=t("#"+o.form),1===y.length&&(i.on("click",function(){y.find("input[type=submit]").first().trigger("click")}),y.prepend(t.mk("input").attr("type","submit").hide()))),i.val(e).on("keydown",function(e){if([Key.Enter,Key.Space].includes(e.keyCode))e.preventDefault(),i.trigger("click");else if([Key.Tab,Key.LeftArrow,Key.RightArrow].includes(e.keyCode)){e.preventDefault();var o=$.$dialogButtons.children(),n=o.filter(":focus"),s=$.$dialogContent.find(":input");t.isKey(Key.LeftArrow,e)&&(e.shiftKey=!0),n.length?e.shiftKey?n.prev().length?n.prev().focus():t.isKey(Key.Tab,e)&&(s.length>0?s:o).filter(":visible").last().focus():n.next().length?n.next().focus():t.isKey(Key.Tab,e)&&s.add(o).filter(":visible").first().focus():s.add(o)[e.shiftKey?"last":"first"]().focus()}}).on("click",function(e){e.preventDefault(),t.callCallback(o.action,[e])}),$.$dialogButtons.append(i)}),this._setFocus(),$w.trigger("dialog-opened"),t.callCallback(u,[y]),p){var m=this.$dialogContent.children(":not(#dialogButtons)").last();g&&(m=m.children(".notice").last()),this.$dialogOverlay.stop().animate({scrollTop:"+="+(m.position().top+parseFloat(m.css("margin-top"),10)+parseFloat(m.css("border-top-width"),10))},"fast")}}},{key:"fail",value:function(t,e,o){this._display("fail",t,e,this._CloseButton,o===!0)}},{key:"success",value:function(t,o,i,n){this._display("success",t,o,i===!0?this._CloseButton:e,n)}},{key:"wait",value:function(o,i,n){"boolean"==typeof i&&"undefined"==typeof n&&(n=i,i=e),"string"!=typeof i&&(i="Sending request"),this._display("wait",o,t.capitalize(i)+"&hellip;",n===!0)}},{key:"request",value:function(t,o,i,n){"function"==typeof i&&"undefined"==typeof n&&(n=i,i=e);var s={},l=void 0;if(o instanceof jQuery)l=o.attr("id");else if("string"==typeof o){var a=o.match(/<form\sid=["']([^"']+)["']/);a&&(l=a[1])}i!==!1?(l&&(s[i||"Submit"]={submit:!0,form:l}),s.Cancel=this._CloseButton.Close):s.Close={action:this._CloseButton.Close,form:l},this._display("request",t,o,s,n)}},{key:"confirm",value:function(e,o,i,n){"function"==typeof i&&"undefined"==typeof n&&(n=i),"function"!=typeof n&&(n=this._CloseButton.Close),t.isArray(i)||(i=["Eeyup","Nope"]);var s={},l=this;s[i[0]]=function(){n(!0)},s[i[1]]=function(){n(!1),l._CloseButton.Close()},this._display("confirm",e,o,s)}},{key:"info",value:function(t,e,o){this._display("info",t,e,this._CloseButton,o)}},{key:"setFocusedElement",value:function(t){t instanceof jQuery&&(this._$focusedElement=t)}},{key:"_storeFocus",value:function(){if(!("undefined"!=typeof this._$focusedElement&&this._$focusedElement instanceof jQuery)){var o=t(":focus");this._$focusedElement=o.length>0?o.last():e}}},{key:"_restoreFocus",value:function(){"undefined"!=typeof this._$focusedElement&&this._$focusedElement instanceof jQuery&&(this._$focusedElement.focus(),this._$focusedElement=e)}},{key:"_setFocus",value:function(){var t=this.$dialogContent.find("input,select,textarea").filter(":visible"),e=this.$dialogButtons.children();t.length>0?t.first().focus():e.length>0&&e.first().focus()}},{key:"_controlInputs",value:function(t){var e=this.$dialogContent.children(":not(#dialogButtons)").last().add(this.$dialogButtons).find("input, button, select, textarea");t?e.filter(":not(:disabled)").addClass("temp-disable").disable():e.filter(".temp-disable").removeClass("temp-disable").enable()}},{key:"close",value:function(o){return this.isOpen()?(this.$dialogOverlay.remove(),this._open=e,this._restoreFocus(),t.callCallback(o),void $body.removeClass("dialog-open")):t.callCallback(o,!1)}},{key:"clearNotice",value:function(t){var e=this.$dialogContent.children(":not(#dialogButtons)").children(".notice:last-child");return!!e.length&&(!("undefined"!=typeof t&&!t.test(e.html()))&&(e.hide(),this._controlInputs(!1),!0))}}]),l}();t.Dialog=new l,$body.on("keydown",function(e){if(!t.Dialog.isOpen()||e.keyCode!==Key.Tab)return!0;var o=t.Dialog.$dialogContent.find(":input"),i=o.filter(e.target),n=o.index(i);if(0===i.length)e.preventDefault(),o.first().focus();else if(e.shiftKey)if(0===n)e.preventDefault(),t.Dialog.$dialogButtons.find(":last").focus();else{var s=i.parent();if(!s.is(t.Dialog.$dialogButtons))return!0;s.children().first().is(i)&&(e.preventDefault(),o.eq(o.index(i)-1).focus())}})}(jQuery);
//# sourceMappingURL=/js/dialog.min.js.map
