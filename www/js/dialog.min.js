!function(e,t){function o(t){return e(document.createElement("div")).attr("id",t)}var n,i,a,f,l,s=e("html"),c={fail:"red",success:"green",wait:"blue",request:"yellow",confirm:"orange",info:"darkblue"},u={fail:"Error",success:"Success",wait:"Sending request",request:"Input required",confirm:"Confirmation",info:"Info"},d={fail:"There was an issue while processing the request.",success:"Whatever you just did, it was completed successfully.",request:"The request did not require any additional info.",confirm:"Are you sure?",info:"No message provided."},r=e(window);e.Dialog={open:t,fail:function(t,o,n){e.Dialog.display("fail",t,o,{Close:{action:function(){e.Dialog.close()}}},n)},success:function(o,n,i,a){e.Dialog.display("success",o,n,i===!0?{Close:{action:function(){e.Dialog.close()}}}:t,a)},wait:function(t,o,n){"function"==typeof o&&"undefined"===n&&(n=o),("string"!=typeof o||o.length<2)&&(o="Sending request"),e.Dialog.display("wait",t,o[0].toUpperCase()+o.substring(1)+"...",n)},request:function(t,o,n,i,a){"function"==typeof i&&"undefined"==typeof a&&(a=i,i="ElkÃ¼ld");var f={};f[i]={submit:!0,form:n},f.Cancel={action:function(){e.Dialog.close()}},e.Dialog.display("request",t,o,f,a)},confirm:function(t,o,n,i){"function"==typeof n&&"undefined"==typeof i&&(i=n),"function"!=typeof i&&(i=new Function),e.isArray(n)||(n=["Eeyup","Nope"]);var a={};a[n[0]]={action:function(){i(!0)}},a[n[1]]={action:function(){i(!1),e.Dialog.close()}},e.Dialog.display("confirm",t,o,a)},info:function(t,o,n){e.Dialog.display("info",t,o,{Close:{action:function(){e.Dialog.close()}}},n)},display:function(r,p,g,y,h,m){function w(){var o=e(":focus");o.length>0?window._focusedElement=o.last():window._focusedElement=t;var n=e("#dialogContent").find("input,select,textarea").filter(":visible"),i=e("#dialogButtons").children();n.length>0?n.first().focus():i.length>0&&i.first().focus()}function v(c){var d=o().addClass(h.color);c?(n=e("#dialogOverlay"),f=e("#dialogBox"),a=e("#dialogHeader"),"string"==typeof h.title&&a.text(h.title),i=e("#dialogContent"),l=e("#dialogButtons"),i.children(":not(:last-child)").find("input, select, textarea").attr("disabled",!0),i.append(d.html(h.content)),h.buttons&&(0===l.length&&(l=o("dialogButtons")),l.appendTo(i)),l.empty()):(n=o("dialogOverlay"),a=o("dialogHeader").text(h.title||u[r]),i=o("dialogContent"),f=o("dialogBox"),i.append(d.html(h.content)),f.append(a).append(i),l=o("dialogButtons").appendTo(i),n.css("opacity",0).appendTo(document.body),f.appendTo(n),n.css("opacity",1),w(),s.addClass("dialog-open")),a.attr("class",h.color+"-bg"),h.buttons&&e.each(h.buttons,function(o,n){var a=e(document.createElement("input")).attr("type","button");if(a.attr("class",h.color+"-bg"),n.form){var f=e("#"+n.form);1==f.length&&(a.click(function(){f.find("input[type=submit]").trigger("click")}),f.prepend(e(document.createElement("input")).attr("type","submit").hide()))}a.val(o).on("keydown",function(e){if(-1!==[13,32].indexOf(e.keyCode))e.preventDefault(),e.stopPropagation(),a.trigger("click");else if(9===e.keyCode){e.preventDefault(),e.stopPropagation();var t=l.children(),o=t.filter(":focus"),n=i.find(":input");o.length?e.shiftKey?o.prev().length?o.prev().focus():(n.length>0?n:t).last().focus():o.next().length?o.next().focus():n.add(t).first().focus():n.add(t)[e.shiftKey?"last":"first"]().focus()}}).on("click",function(o){o.preventDefault(),o.stopPropagation(),"function"==typeof n.action&&n.action(o),"close"===n.type&&e.Dialog.close("function"==typeof n.callback?n.callback:t)}),l.append(a)}),e.Dialog.center(),w(),"function"==typeof m&&m()}if("string"!=typeof r||"undefined"==typeof c[r])throw new TypeError("Invalid dialog type: "+typeof r);"function"==typeof y&&"undefined"==typeof h&&"undefined"==typeof m?m=y:"object"==typeof y&&"function"==typeof h&&"undefined"==typeof m&&(m=h),"undefined"==typeof h&&(h={}),"undefined"==typeof p?p=u[r]:p===!1&&(p=t),"undefined"==typeof g&&(g=d[r]),h={type:r,title:p,content:g,buttons:y,color:c[r]},"undefined"==typeof e.Dialog.open?(e.Dialog.open=h,v()):v(!!e.Dialog.open)},close:function(t){return"undefined"==typeof e.Dialog.open?"function"==typeof t?t():!1:(n.remove(),e.Dialog.open=void 0,window._focusedElement instanceof jQuery&&window._focusedElement.focus(),"function"==typeof t&&t(),void s.removeClass("dialog-open"))},center:function(){var e={w:n.width(),h:n.height()},t={w:f.outerWidth(),h:f.outerHeight()};f.css("top",Math.max((e.h-t.h)/2,0)),f.css("left",Math.max((e.w-t.w)/2,0))}},r.on("resize",function(){"undefined"!=typeof e.Dialog.open}).on("ajaxerror",function(){e.Dialog.fail(!1,"There was an error while processing your request. You may find additional details in the browser's console.")}),e(document.body).on("keydown",function(t){if(9===t.keyCode&&"undefined"!=typeof e.Dialog.open){var o=e(t.target),n=e("#dialogContent").find(":input"),i=o.index("#dialogContent :input");t.shiftKey&&0===i?(t.preventDefault(),e("#dialogButtons").find(":last").focus()):1!==n.filter(":focus").length&&(t.preventDefault(),n.first().focus())}})}(jQuery);