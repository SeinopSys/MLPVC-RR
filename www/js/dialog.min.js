!function(e,t){function o(t){return e.mk("div").attr("id",t)}var n,i,f,l,a,s=e("html"),u={fail:"red",success:"green",wait:"blue",request:"yellow",confirm:"orange",info:"darkblue"},c={fail:"Error",success:"Success",wait:"Sending request",request:"Input required",confirm:"Confirmation",info:"Info"},d={fail:"There was an issue while processing the request.",success:"Whatever you just did, it was completed successfully.",request:"The request did not require any additional info.",confirm:"Are you sure?",info:"No message provided."},r=e(window);e.Dialog={open:t,fail:function(t,o,n){e.Dialog.display("fail",t,o,{Close:{action:function(){e.Dialog.close()}}},n)},success:function(o,n,i,f){e.Dialog.display("success",o,n,i===!0?{Close:{action:function(){e.Dialog.close()}}}:t,f)},wait:function(t,o,n){"function"==typeof o&&"undefined"===n&&(n=o),("string"!=typeof o||o.length<2)&&(o="Sending request"),e.Dialog.display("wait",t,o[0].toUpperCase()+o.substring(1)+"...",n)},request:function(t,o,n,i,f){"function"==typeof i&&"undefined"==typeof f&&(f=i,i="ElkÃ¼ld");var l={};l[i]={submit:!0,form:n},l.Cancel={action:function(){e.Dialog.close()}},e.Dialog.display("request",t,o,l,f)},confirm:function(t,o,n,i){"function"==typeof n&&"undefined"==typeof i&&(i=n),"function"!=typeof i&&(i=new Function),e.isArray(n)||(n=["Eeyup","Nope"]);var f={};f[n[0]]={action:function(){i(!0)}},f[n[1]]={action:function(){i(!1),e.Dialog.close()}},e.Dialog.display("confirm",t,o,f)},info:function(t,o,n){e.Dialog.display("info",t,o,{Close:{action:function(){e.Dialog.close()}}},n)},_storeFocus:function(){if(!("undefined"!=typeof e.Dialog._focusedElement&&e.Dialog._focusedElement instanceof jQuery)){var o=e(":focus");e.Dialog._focusedElement=o.length>0?o.last():t}},_restoreFocus:function(){"undefined"!=typeof e.Dialog._focusedElement&&e.Dialog._focusedElement instanceof jQuery&&e.Dialog._focusedElement.focus()},_setFocus:function(){var t=e("#dialogContent").find("input,select,textarea").filter(":visible"),o=e("#dialogButtons").children();t.length>0?t.first().focus():o.length>0&&o.first().focus()},display:function(r,p,g,y,h,D){function m(u){var d=o().addClass(h.color);u?(n=e("#dialogOverlay"),l=e("#dialogBox"),f=e("#dialogHeader"),"string"==typeof h.title&&f.text(h.title),i=e("#dialogContent"),a=e("#dialogButtons"),i.children(":not(:last-child)").find("input, select, textarea").attr("disabled",!0),i.append(d.html(h.content)),h.buttons&&(0===a.length&&(a=o("dialogButtons")),a.appendTo(i)),a.empty()):(e.Dialog._storeFocus(),n=o("dialogOverlay"),f=o("dialogHeader").text(h.title||c[r]),i=o("dialogContent"),l=o("dialogBox"),i.append(d.html(h.content)),a=o("dialogButtons").appendTo(i),l.append(f).append(i),n.append(l).appendTo(document.body),s.addClass("dialog-open")),f.attr("class",h.color+"-bg");var p=!1;h.buttons&&e.each(h.buttons,function(o,n){var f=e.mk("input").attr("type","button");f.attr("class",h.color+"-bg"),n.form&&(p=e("#"+n.form),1==p.length&&(f.on("click",function(){p.find("input[type=submit]").trigger("click")}),p.prepend(e.mk("input").attr("type","submit").hide()))),f.val(o).on("keydown",function(e){if(-1!==[13,32].indexOf(e.keyCode))e.preventDefault(),f.trigger("click");else if(-1!==[9,37,39].indexOf(e.keyCode)){e.preventDefault();var t=a.children(),o=t.filter(":focus"),n=i.find(":input");37===e.keyCode&&(e.shiftKey=!0),o.length?e.shiftKey?o.prev().length?o.prev().focus():9===e.keyCode&&(n.length>0?n:t).filter(":visible").last().focus():o.next().length?o.next().focus():9===e.keyCode&&n.add(t).filter(":visible").first().focus():n.add(t)[e.shiftKey?"last":"first"]().focus()}}).on("click",function(o){o.preventDefault(),"function"==typeof n.action&&n.action(o),"close"===n.type&&e.Dialog.close("function"==typeof n.callback?n.callback:t)}),a.append(f)}),e.Dialog.center(),e.Dialog._setFocus(),"function"==typeof D&&D(p)}if("string"!=typeof r||"undefined"==typeof u[r])throw new TypeError("Invalid dialog type: "+typeof r);"function"==typeof y&&"undefined"==typeof h&&"undefined"==typeof D?D=y:"object"==typeof y&&"function"==typeof h&&"undefined"==typeof D&&(D=h),"undefined"==typeof h&&(h={}),"undefined"==typeof p?p=c[r]:p===!1&&(p=t),"undefined"==typeof g&&(g=d[r]),h={type:r,title:p,content:g,buttons:y,color:u[r]},"undefined"==typeof e.Dialog.open?(e.Dialog.open=h,m()):m(!!e.Dialog.open)},close:function(t){return"undefined"==typeof e.Dialog.open?"function"==typeof t?t():!1:(n.remove(),e.Dialog.open=void 0,e.Dialog._restoreFocus(),"function"==typeof t&&t(),void s.removeClass("dialog-open"))},center:function(){if("undefined"!=typeof e.Dialog.open){var t={w:n.width(),h:n.height()},o={w:l.outerWidth(!0),h:l.outerHeight(!0)};l.css("top",Math.max((t.h-o.h)/2,0)),l.css("left",Math.max((t.w-o.w)/2,0))}}},r.on("resize",e.Dialog.center),e(document.body).on("keydown",function(t){if(9===t.keyCode&&"undefined"!=typeof e.Dialog.open){var o=e(t.target),n=e("#dialogContent").find(":input"),i=o.index("#dialogContent :input");t.shiftKey&&0===i?(t.preventDefault(),e("#dialogButtons").find(":last").focus()):1!==n.filter(":focus").length&&(t.preventDefault(),n.first().focus())}})}(jQuery);
//# sourceMappingURL=dialog.min.js.map