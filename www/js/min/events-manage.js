"use strict";DocReady.push(function(){var t=window.PRINTABLE_ASCII_PATTERN,e=window.EVENT_TYPES,a=$("#event-list"),n=$("#add-event"),i=$.mk("select").attr({name:"type",required:!0}).append('<option value="" style="display:none">(choose event type)</option>'),o=$.mk("optgroup").attr("label","Available types").appendTo(i);$.each(e,function(t,e){o.append('<option value="'+t+'">'+e+"</option>")});var s=$.mk("form","add-event-form").append($.mk("label").append("<span>Event name (2-64 chars.)</span>",$.mk("input").attr({type:"text",name:"name",minlength:2,maxlength:64,required:!0}).patternAttr(t)),'<div class="label">\n\t\t\t\t<span>Description (3000 chars. max, optional)</span>\n\t\t\t\t<div class="ace_editor"></div>\n\t\t\t</div>',$.mk("label").append("<span>Event type</span>",i),$.mk("div").attr("class","label").append("<span>Start date & time</span>",$.mk("div").attr("class","input-group-2").append('<input type="date" name="start_date">','<input type="time" name="start_time">')),$.mk("div").attr("class","notice info align-center").html("Leave <q>Start date & time</q> blank if you want the event to start immediately after you press Add. Always specify times in your computer's timezone."),$.mk("div").attr("class","label").append("<span>End date & time</span>",$.mk("div").attr("class","input-group-2").append('<input type="date" name="end_date" required>','<input type="time" name="end_time" required>')),$.mk("div").attr("class","label").append("<span>Who can enter & how many times?</span>",$.mk("div").attr("class","input-group-2").append('<select name="entry_role" required>\n\t\t\t\t\t\t<optgroup label="Role in the group">\n\t\t\t\t\t\t\t<option value="user" selected>Any DeviantArt User</option>\n\t\t\t\t\t\t\t<option value="member">Club Members</option>\n\t\t\t\t\t\t\t<option value="staff">Staff Members</option>\n\t\t\t\t\t\t</optgroup>\n\t\t\t\t\t\t<optgroup label="Special">\n\t\t\t\t\t\t\t<option disabled value="spec_discord">Discord Server Members</option>\n\t\t\t\t\t\t\t<option disabled value="spec_ai">Illustrator Users</option>\n\t\t\t\t\t\t\t<option disabled value="spec_inkscape">Inkscape Users</option>\n\t\t\t\t\t\t\t<option disabled value="spec_ponyscape">Ponyscape Users</option>\n\t\t\t\t\t\t</optgroup>\n\t\t\t\t\t</select>','<input type="text" name="max_entries" pattern="^(0*[1-9]\\d*|[Uu]nlimited|0)$" list="max_entries-list" value="1">\n\t\t\t\t\t<datalist id="max_entries-list" required>\n\t\t\t\t\t\t<option value="Unlimited">\n\t\t\t\t\t\t<option value="1">\n\t\t\t\t\t\t<option value="2">\n\t\t\t\t\t\t<option value="5">\n\t\t\t\t\t\t<option value="10">\n\t\t\t\t\t</datalist>')),$.mk("div").attr("class","notice info align-center").html("Enter <q>0</q> or <q>Unlimited</q> to remove the number of entries cap."));n.on("click",function(t){t.preventDefault(),$.Dialog.request("Add new event",s.clone(),"Add",function(t){var e=void 0;$.getAceEditor(!1,"html",function(a){try{var n=t.find(".ace_editor").get(0),i=ace.edit(n);e=$.aceInit(i,a),e.setMode(a),e.setUseWrapMode(!0)}catch(t){console.error(t)}}),t.on("submit",function(a){a.preventDefault();var n=t.mkData();if(n.description=e.getValue(),n.start_date&&n.start_time){var i=$.mkMoment(n.start_date,n.start_time);n.starts_at=i.toISOString()}var o=$.mkMoment(n.end_date,n.end_time);n.ends_at=o.toISOString(),delete n.start_date,delete n.start_time,delete n.end_date,delete n.end_time,$.Dialog.wait(!1),$.post("/event/add",n,$.mkAjaxHandler(function(){return this.status?($.Dialog.success(!1,"Event added"),$.Dialog.wait(!1,"Loading event page"),void(window.location.href=this.url)):$.Dialog.fail(!1,this.message)}))})})}),a.on("click",".delete-event",function(t){t.preventDefault();var e=$(this).closest("li[id]"),a=e.attr("id").split("-")[1],n=e.find(".event-name").html();$.Dialog.confirm("Delete event #"+a,"Are you sure yo uwant to delete "+n+" along with all submissions?",function(t){t&&($.Dialog.wait(!1),$.post("/event/del/"+a,$.mkAjaxHandler(function(){return this.status?($.Dialog.wait(!1,"Reloading page",!0),void $.Navigation.reload(function(){$.Dialog.close()})):$.Dialog.fail(!1,this.message)})))})})});
//# sourceMappingURL=/js/min/events-manage.js.map
