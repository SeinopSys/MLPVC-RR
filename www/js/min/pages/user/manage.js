"use strict";$(function(){if(void 0!==window.ROLES){var e=$content.children(".briefing"),t=e.find(".username").text().trim(),n=e.find(".role-label").text().trim(),i=$.mk("form").attr("id","rolemod").html('<select name="newrole" required><optgroup label="Possible roles"></optgroup></select>'),o=i.find("optgroup"),a=$("#change-role"),r=$("#change-dev-role-mask");$.each(window.ROLES,function(e,t){o.append("<option value="+e+">"+t+"</option>")}),a.on("click",function(){$.Dialog.request("Change group",i.clone(),"Change",function(e){var i=e.find("option").filter(function(){return this.innerHTML===n}).attr("selected",!0);e.on("submit",function(n){if(n.preventDefault(),e.children("select").val()===i.attr("value"))return $.Dialog.close();var o=e.mkData();$.Dialog.wait(!1,"Moving user to the new group"),$.post("/user/setgroup/"+t,o,$.mkAjaxHandler(function(){return!0===this.already_in?$.Dialog.close():this.status?void $.Navigation.reload(!0):$.Dialog.fail(!1,this.message)}))})})}),r.on("click",function(){$.Dialog.request(r.attr("title"),i.clone(),"Change",function(e){var t=e.find("option").filter(function(){return this.innerHTML===n}).attr("selected",!0);e.on("submit",function(n){if(n.preventDefault(),e.children("select").val()===t.attr("value"))return $.Dialog.close();var i=e.mkData();$.Dialog.wait(!1,"Changing role mask"),$.post("/user/setdevrolemask",i,$.mkAjaxHandler(function(){if(!this.status)return $.Dialog.fail(!1,this.message);$.Navigation.reload(!0)}))})})})}});
//# sourceMappingURL=/js/min/pages/user/manage.js.map
