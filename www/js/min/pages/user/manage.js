"use strict";!function(){if(void 0!==window.ROLES){var e=$content.children(".briefing"),t=(e.find(".username").text().trim(),e.find(".role-label").text().trim()),i=$.mk("form").attr("id","rolemod").html('<select name="value" required><optgroup label="Possible roles"></optgroup></select>'),n=i.find("optgroup"),o=$("#change-role"),a=$("#change-dev-role-mask");$.each(window.ROLES,function(e,t){n.append("<option value="+e+">"+t+"</option>")}),o.on("click",function(){var a=o.attr("data-for");$.Dialog.request("Change group",i.clone(),"Change",function(i){var n=i.find("option").filter(function(){return this.innerHTML===t}).attr("selected",!0);i.on("submit",function(e){if(e.preventDefault(),i.children("select").val()===n.attr("value"))return $.Dialog.close();var t=i.mkData();$.Dialog.wait(!1,"Moving user to the new group"),$.API.put("/user/"+a+"/role",t,$.mkAjaxHandler(function(){return!0===this.already_in?$.Dialog.close():this.status?void $.Navigation.reload(!0):$.Dialog.fail(!1,this.message)}))})})}),a.on("click",function(){$.Dialog.request(a.attr("title"),i.clone(),"Change",function(i){var n=i.find("option").filter(function(){return this.innerHTML===t}).attr("selected",!0);i.on("submit",function(e){if(e.preventDefault(),i.children("select").val()===n.attr("value"))return $.Dialog.close();var t=i.mkData();$.Dialog.wait(!1,"Changing role mask"),$.API.put("/setting/dev_role_label",t,$.mkAjaxHandler(function(){if(!this.status)return $.Dialog.fail(!1,this.message);$.Navigation.reload(!0)}))})})})}}();
//# sourceMappingURL=/js/min/pages/user/manage.js.map
