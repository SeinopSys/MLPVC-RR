"use strict";$(function(){if(void 0!==window.ROLES){var e=$content.children(".briefing"),t=e.find(".username").text().trim(),o=e.find(".rolelabel").text().trim(),i=$.mk("form").attr("id","rolemod").html('<select name="newrole" required><optgroup label="Possible roles"></optgroup></select>'),n=i.find("optgroup"),r=$("#change-role");$.each(window.ROLES,function(e,t){n.append("<option value="+e+">"+t+"</option>")}),r.on("click",function(){$.Dialog.request("Change group",i.clone(),"Change",function(e){var i=e.find("option").filter(function(){return this.innerHTML===o}).attr("selected",!0);e.on("submit",function(o){if(o.preventDefault(),e.children("select").val()===i.attr("value"))return $.Dialog.close();var n=e.mkData();$.Dialog.wait(!1,"Moving user to the new group"),$.post("/user/setgroup/"+t,n,$.mkAjaxHandler(function(){return!0===this.already_in?$.Dialog.close():this.status?void $.Navigation.reload(!0):$.Dialog.fail(!1,this.message)}))})})})}});
//# sourceMappingURL=/js/min/pages/user/manage.js.map
