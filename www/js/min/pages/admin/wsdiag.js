"use strict";$(function(){var e=void 0,s=$("#send-hello"),t=$("#wss-status").children(),i=$("#wss-heartbeat"),l=function(){if(t.parent().is(":hover"))i.addClass("paused");else{if(i.removeClass("paused"),$.WS.down)return clearInterval(e),t.text("Socket.IO server is down and/or client library failed to load"),i.addClass("dead"),void s.disable();$.WS.devquery("status",{},function(e){i.removeClass("beat"),setTimeout(function(){i.addClass("beat")},20),delete e.status,t.text(JSON.stringify(e,null,4))})}};l(),e=setInterval(l,1e3),s.on("click",function(){$.Dialog.wait("Test PHP to WS server connectivity","Sending hello");var e=$.randomString(),s=$.WS.getClientId(),t=!1;$w.on("ws-hello",function(s,i){i.priv===e&&($w.off("ws-hello"),t=!0,$.Dialog.success(!1,"Hello response received",!0))}),$.post("/admin/wsdiag/hello",{priv:e,clientid:s},$.mkAjaxHandler(function(){if(!this.status)return $.Dialog.fail(!1,this.message);t||$.Dialog.success(!1,"Hello sent successfully"),t||$.Dialog.wait(!1,"Waiting for reply (timeout 5s)"),setTimeout(function(){t||($w.off("ws-hello"),$.Dialog.fail(!1,"Hello response timed out"))},5e3)}))})});
//# sourceMappingURL=/js/min/pages/admin/wsdiag.js.map
