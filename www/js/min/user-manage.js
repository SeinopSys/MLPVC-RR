'use strict';DocReady.push(function(){'use strict';if('undefined'!=typeof window.ROLES){var a=$content.children('.briefing'),b=a.find('.username').text().trim(),c=a.find('.rolelabel'),d=c.text().trim(),e=$.mk('form').attr('id','rolemod').html('<select name="newrole" required><optgroup label="Possible roles"></optgroup></select>'),f=e.find('optgroup'),g=$('#ban-toggle'),h=$('#change-role');$.each(window.ROLES,function(a,b){f.append('<option value='+a+'>'+b+'</option>')}),h.on('click',function(){$.Dialog.request('Change group',e.clone(),'Change',function(a){var c=a.find('option').filter(function(){return this.innerHTML===d}).attr('selected',!0);a.on('submit',function(d){if(d.preventDefault(),a.children('select').val()===c.attr('value'))return $.Dialog.close();var e=a.mkData();$.Dialog.wait(!1,'Moving user to the new group'),$.post('/user/setgroup/'+b,e,$.mkAjaxHandler(function(){return!0===this.already_in?$.Dialog.close():this.status?void($.Dialog.wait(!1,'Reloading page',!0),$.Navigation.reload(function(){$.Dialog.close()})):$.Dialog.fail(!1,this.message)}))})})}),g.on('click',function(){var a=(g.hasClass('un-banish')?'Un-ban':'Ban')+'ish',c=a.toLowerCase(),d=a+'ing '+b+('banish'===c?' to the moon':'');$.Dialog.request(d,$.mk('form',c+'-form').html('<p>'+a+'ing '+b+' will '+('banish'===c?'immediately sign them out of every session and won\u2019t allow them to log in again. Please, only do this if it\u2019s absolutely necessary.':'allow them to sign in to the site again.')+'</p>\n\t\t\t\t<p>You must provide a reason (5-255 chars.) for the '+c.replace(/ish$/,'')+' which will be added to the log entry and appear in the user\u2019s banishment history.</p>\n\t\t\t\t<input type="text" name="reason" placeholder="Enter a reason" required pattern="^.{5,255}$" value="'+a+'ing because ">\n\t\t\t\t'+('banish'===c?'<img src="/img/pre-ban.svg" alt="Sad twilight">':'')),a,function(a){a.on('submit',function(a){a.preventDefault();var e=$(this).mkData();$.Dialog.wait(!1,'Gathering the Elements of Harmony'),$.post('/user/'+c+'/'+b,e,$.mkAjaxHandler(function(){if(!this.status)return $.Dialog.fail(d,this.message);var a=this.message;$.Dialog.wait(!1,'Reloading page',!0),$.Navigation.reload(function(){'banish'===c?$.Dialog.success(d,'<p>What had to be done, has been done.</p><img src="/img/post-ban.svg">',!0):$.Dialog.success(d,a,!0)})}))})})})}});
//# sourceMappingURL=/js/min/user-manage.js.map
