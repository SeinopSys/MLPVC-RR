'use strict';(function(a){'use strict';function b(b,c){return'function'==typeof c&&(c=c(b)),b.data('ctxmenu-items')instanceof jQuery?c&&b.data('ctxmenu-items').children().first().text(c):b.data('ctxmenu-items',new jQuery().add(a.mk('li').text(c||'Context menu'))),b}function c(b,c){if(b){var d=a.mk('li');if(b===a.ctxmenu.separator)d.addClass('sep');else{var e=a.mk('a');b.text&&e.text(b.text),b.icon&&e.addClass('typcn typcn-'+b.icon),!0===b.default&&e.addClass('default'),'undefined'!=typeof b.attr&&('string'==typeof b.attr?e.attr(b.attr,!0):e.attr(b.attr)),'function'==typeof b.click&&e.on('click',function(a){a.stopPropagation(),a.preventDefault(),b.click.call(c.get(0),a),f.hide()}),e.appendTo(d)}c.data('ctxmenu-items',c.data('ctxmenu-items').add(d))}}var f=a.mk('div').attr('id','ctxmenu');f.appendTo($body).on('click',function(a){a.stopPropagation(),f.hide()}).on('contextmenu',function(b){var c=a(b.target);switch(b.target.nodeName.toLowerCase()){case'li':c.children('a').trigger('click');break;case'a':c.trigger('click');}return!1}),a.ctxmenu={separator:!0},a.ctxmenu.setTitle=function(){return b.apply(this,arguments)},a.fn.ctxmenu=function(d,e){return a(this).each(function(){var g=a(this);b(g,e),a.each(d,function(a,b){c(b,g)}),g.on('contextmenu',function(b){var c=Math.max;if(!b.shiftKey){b.preventDefault(),b.stopPropagation(),g.trigger('mouseleave'),f.html(g.data('ctxmenu-items').clone(!0,!0)).css({top:b.pageY,left:b.pageX,opacity:0}).show();var e=c(document.documentElement.clientWidth,window.innerWidth||0),i=c(document.documentElement.clientHeight,window.innerHeight||0),h=a(document).scrollTop(),d=f.position(),j=(d.top>i+h||d.top>i-h)&&b.pageY-f.outerHeight(),k=(d.left<0-f.width()||d.left>e)&&b.pageX-f.outerWidth();!1!==j&&f.css('top',j),!1!==k&&f.css('left',k),f.css('opacity',1)}}).addClass('ctxmenu-bound')})},a.ctxmenu.addItem=a.ctxmenu.addItems=function(d){var e=arguments.length;if(2>e)throw new Error('Invalud number of arguments ('+e+') for $.ctxmenu.addItems');var f=a.toArray(arguments);f.splice(0,1),d.each(function(){var d=a(this);return'undefined'==typeof d.data('ctxmenu-items')?d.ctxmenu(f):void(b(d),a.each(f,function(a,b){return c(b,d)}))})},a.ctxmenu.triggerItem=function(a,b){var c=a.data('ctxmenu-items').filter(':not(.sep)');if(1>b||c.length-1<b)throw new Error('There\u2019s no such menu option: '+b);c.eq(b).children('a').triggerHandler('click')},a.ctxmenu.setDefault=function(a,b){var c=a.data('ctxmenu-items').filter(':not(.sep)');c.find('a').removeClass('default'),c.eq(b).children('a').addClass('default')},a.ctxmenu.runDefault=function(a){return a.data('ctxmenu-items').find('a.default').trigger('click')},$body.on('click contextmenu',function(){f.hide()}),$w.on('blur resize',function(){f.hide()})})(jQuery);
//# sourceMappingURL=/js/min/jquery.ctxmenu.js.map
