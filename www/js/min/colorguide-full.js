'use strict';DocReady.push(function(){'use strict';var a=$('#sort-by'),b=$('#full-list'),c=$('#guide-reorder'),d=$('#guide-reorder-cancel');a.on('change',function(){var d=a.data('baseurl'),e=a.val(),f=(d+'?ajax&'+e).replace(/&$/,''),g=(d+'?'+e).replace(/\?$/,'');$.Dialog.wait('Changing sort order'),$.get(f,$.mkAjaxHandler(function(){return this.status?void(b.html(this.html),c.attr('disabled',!!e.length),history.replaceState(history.state,'',g),$.Dialog.close()):$.Dialog.fail(!1,this.message)}))});'function'!=typeof window.Sortable||(b.on('click','.sort-alpha',function(){var a=$(this).closest('section'),b=a.children('ul');b.children().sort(function(c,a){return $(c).text().trim().localeCompare($(a).text().trim())}).appendTo(b)}),c.on('click',function(){if(!c.hasClass('typcn-tick'))c.removeClass('typcn-arrow-unsorted darkblue').addClass('typcn-tick green').html('Save'),b.addClass('sorting').children().each(function(){var a=$(this).children('ul');a.children().each(function(){var a=$(this);a.data('orig-index',a.index())}).children().moveAttr('href','data-href'),a.data('sortable-instance',new Sortable(a.get(0),{ghostClass:'moving',animation:300}))}),$('.sort-alpha').show(),d.removeClass('hidden');else{$.Dialog.wait('Re-ordering appearances');var a=[];b.children().children('ul').children().each(function(){a.push($(this).children().attr('data-href').split('/').pop().replace(/^(\d+)\D.*$/,'$1'))}),$.post('/cg/full/reorder',{list:a.join(',')},$.mkAjaxHandler(function(){return this.status?void(b.removeClass('sorting').html(this.html),c.removeClass('typcn-tick green').addClass('typcn-arrow-unsorted darkblue').html('Re-order'),$.Dialog.close()):$.Dialog.fail(!1,this.message)}))}}),d.on('click',function(){c.removeClass('typcn-tick green').addClass('typcn-arrow-unsorted darkblue').html('Re-order'),b.removeClass('sorting').children().each(function(){var a=$(this).children('ul');a.children().sort(function(c,a){return c=$(c).data('orig-index'),a=$(a).data('orig-index'),c>a?1:c<a?-1:0}).appendTo(a).removeData('orig-index').children().moveAttr('data-href','href'),a.data('sortable-instance').destroy(),a.removeData('sortable-instance')}),$('.sort-alpha').hide(),d.addClass('hidden')}))});
//# sourceMappingURL=/js/min/colorguide-full.js.map
