"use strict";DocReady.push(function(){var e=$("#sort-by"),t=$("#full-list"),a=$("#guide-reorder");e.on("change",function(){var r=e.data("baseurl"),l=e.val(),i=(r+"?ajax&"+l).replace(/&$/,""),s=(r+"?"+l).replace(/\?$/,"");$.Dialog.wait("Changing sort order"),$.get(i,$.mkAjaxHandler(function(){return this.status?(t.html(this.html),a.attr("disabled",Boolean(l.length)),history.replaceState(history.state,"",s),void $.Dialog.close()):$.Dialog.fail(!1,this.message)}))}),"function"==typeof window.Sortable&&a.on("click",function(){a.hasClass("typcn-tick")?!function(){$.Dialog.wait("Re-ordering appearances");var e=[];t.children().children("ul").children().each(function(){e.push($(this).children().attr("data-href").split("/").pop().replace(/^(\d+)\D.*$/,"$1"))}),$.post("/cg/full?reorder",{list:e.join(",")},$.mkAjaxHandler(function(){return this.status?(t.removeClass("sorting").html(this.html),a.removeClass("typcn-tick green").addClass("typcn-arrow-unsorted darkblue").html("Re-order"),void $.Dialog.close()):$.Dialog.fail(!1,this.message)}))}():(a.removeClass("typcn-arrow-unsorted darkblue").addClass("typcn-tick green").html("Save"),t.addClass("sorting").children().each(function(){var e=$(this).children("ul");e.children().children().moveAttr("href","data-href"),Sortable.create(e.get(0),{ghostClass:"moving",scroll:!0,animation:150})}))})});
//# sourceMappingURL=/js/min/colorguide-full.js.map
