"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){var e=t(document),o=window.parent.Key,n=t(window);t.fn.polyEditor=function(a){if(!a.image)throw new Error("Missing image");var i,l,r,p=t(new Image).attr({src:a.image,class:"poly-image"}).attr("class","poly-image-element"),s=t(document.createElementNS("http://www.w3.org/2000/svg","svg")).attr({class:"poly-svg-element",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}),c=t.mk("div").attr("class","poly-svg-wrap").append(s),f=this.first().addClass("poly-wrap"),u=t.mk("span").attr("title","Mouse position").attr("class","poly-mousepos").text("?, ?"),d=t.mk("span").attr("title","Image top left").attr("class","poly-imgtl").text("?, ?"),m=t.mk("span").attr("title","Image center").attr("class","poly-imgc").text("?, ?"),h=t.mk("span").attr("title","Wrapper center").attr("class","poly-wrapc").text("?, ?"),g=t.mk("cpan").attr("class","poly-imgc-expected"),y=function(t,e){var o=b(),n=t.left,a=t.top,i=o.left,l=o.top;return{top:l+e*(a-l),left:i+e*(n-i)}},v=function(t){var e=k();return{top:t.top-e.top,left:t.left-e.left}},w=function(t,e){var o=k();return{top:t.top-o.top+e.height/2,left:t.left-o.left+e.width/2}},b=function(){return{top:l/2,left:i/2}},k=function(){var t=f.offset();return t.top-=(l-f.outerHeight())/2,t.left-=(i-f.outerWidth())/2,t},x=function(){S.text(t.roundTo(100*T,2)+"%"),document.activeElement.blur(),K[T<=.1?"disable":"enable"](),H[T>=2.5?"disable":"enable"]()},z=function(e,o,n){if(x(),"number"==typeof e){d.text(t.roundTo(e,2)+","+t.roundTo(o,2));var a=w(p.offset(),n);m.text(t.roundTo(a.top,2)+","+t.roundTo(a.left,2)),g.css({top:a.top-5,left:a.left-5});var i=b();h.text(t.roundTo(i.top,2)+","+t.roundTo(i.left,2))}},T=1,D=function(e){var o=p.data("size");if("object"===(void 0===o?"undefined":_typeof(o))){var n=t.rangeLimit(e,!1,.1,2.5),a=void 0,i=void 0;n!==T?(a=t.scaleResize(o.width,o.height,{scale:n}),i=T,T=a.scale):(a={width:p.width(),height:p.height()},i=T);var l=p.offset(),r=y(v(l),n/i);j.add(p).css({top:r.top,left:r.left,width:a.width,height:a.height}),z(r.top,r.left,a)}},S=t.mk("span").attr({class:"poly-zoom-perc",contenteditable:!0}).text("100%").on("keydown",function(e){if(t.isKey(o.Enter,e)){e.preventDefault();var n=parseFloat(S.text(),10);isNaN(n)||D(n/100),z()}}).on("mousedown",function(){S.data("mousedown",!0)}).on("mouseup",function(){S.data("mousedown",!1)}).on("click",function(){!0!==S.data("focused")&&(S.data("focused",!0),S.select())}).on("dblclick",function(t){t.preventDefault(),S.select()}).on("blur",function(){S.data("mousedown")||S.data("focused",!1),0===S.html().trim().length&&x(),t.clearSelection()}),E=t.mk("button").attr("class","poly-zoom-fit typcn typcn typcn-arrow-minimise").on("click",function(e){var o=p.data("size");if("object"===(void 0===o?"undefined":_typeof(o))){e.preventDefault();var n=o.width>o.height,a=t.scaleResize(o.width,o.height,n?{height:l}:{width:i}),r=n?0:(l-a.height)/2,s=n?(i-a.width)/2:0;j.add(p).css({top:r,left:s,width:a.width,height:a.height}),T=a.scale,D(T)}}),H=t.mk("button").attr("class","poly-zoom-in typcn typcn-zoom-in").on("click",function(t){t.preventDefault(),D((Math.floor(10*T)+1)/10)}),K=t.mk("button").attr("class","poly-zoom-out typcn typcn-zoom-out").on("click",function(t){t.preventDefault(),D((Math.ceil(10*T)-1)/10)}),M=t.mk("div").attr("class","poly-actions poly-actions-tl").append(H,K,E,S).on("mousedown",function(t){t.stopPropagation(),S.triggerHandler("blur")}),Y=t.mk("div").attr("class","poly-actions poly-actions-bl").append(d,m,h,u).on("mousedown",function(t){t.stopPropagation(),S.triggerHandler("blur")}),j=t.mk("div").attr("class","poly-image-overlay").appendTo(f),I=t.mk("div").attr("class","poly-loader").html("Loading&hellip;"),N=t.throttle(250,function(){i=f.innerWidth(),l=f.innerHeight(),"number"==typeof T&&D(T);var t=b();h.text(t.top+","+t.left),s.attr("viewBox","0 0 "+i+" "+l)});return n.on("resize",N),N(),f.append(M,Y,I,g,c),p.on("load",function(){j.css("opacity",0),p.appendTo(f).data("size",{width:p.width(),height:p.height()}),I.detach(),E.triggerHandler("click"),j.fadeTo(500,1);var o=void 0,n=void 0;r=t.throttle(100,function(t){t.preventDefault();var e={top:t.pageY,left:t.pageX},a=k(),i=o.top+(e.top-n.top)-a.top,l=o.left+(e.left-n.left)-a.left;j.add(p).css({top:i,left:l});var r={width:p.width(),height:p.height()};z(i,l,r)}),e.on("mousedown",function(a){t(a.target).is(j)&&(a.preventDefault(),o=j.offset(),n={top:a.pageY,left:a.pageX},e.on("mousemove",r))}),e.on("mouseup mouseleave blur",function(){e.off("mousemove",r)})}),e.on("mousemove",t.throttle(50,function(t){var e=k();u.text(t.pageX-e.left+","+(t.pageY-e.top))})),n.on("mousewheel",function(t){t.ctrlKey&&!t.altKey&&t.preventDefault(),t.originalEvent.deltaY>0?K.trigger("click"):H.trigger("click")}),{destroy:function(){"function"==typeof r&&e.off("mousemove",r),n.off("resize",N),f.empty().removeClass("poly-wrap")}}}}(jQuery);
//# sourceMappingURL=/js/min/colorpicker.js.map
