'use strict';DocReady.push(function(){'use strict';var a=$('#butwhy'),b=$('#thisiswhy');a.on('click',function(c){c.preventDefault(),c.stopPropagation(),a.addClass('hidden'),b.removeClass('hidden')}),Chart.defaults.global.responsive=!0,Chart.defaults.global.maintainAspectRatio=!1,Chart.defaults.global.animation=!1;var c,d=$('#stats'),e=function(b){var c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0.2,a=b.r+','+b.g+','+b.b,d='rgb('+a+')';return{lineTension:0,backgroundColor:0===c?'transparent':'rgba('+a+','+c+')',borderColor:d,borderWidth:2,pointBackgroundColor:d,pointRadius:3,pointHitRadius:6,pointBorderColor:'#fff',pointBorderWidth:2,pointHoverBackgroundColor:'#fff',pointHoverBorderColor:d}},f={position:'bottom',labels:{boxWidth:12}},g=[{type:'time',time:{unit:'day',unitStepSize:1,displayFormats:{day:'Do MMM'}},ticks:{autoSkip:!0,maxTicksLimit:15}}],h=[{type:'linear',ticks:{autoSkip:!0,maxTicksLimit:6}}],i='Do MMMM, YYYY',j=d.children('.stats-posts'),k=j.children('h3'),l=j.children('.legend'),m=j.find('canvas').get(0).getContext('2d'),n=['#46ACD3','#5240C3'];$.post('/about/stats?stat=posts',$.mkAjaxHandler(function(){if(!this.status)return j.remove();var a=this.data;return $.mk('p').append('Last updated: ',$.mk('time').attr('datetime',a.timestamp)).insertAfter(k),Time.Update(),0===a.datasets.length?l.html('<strong>No data available</strong>'):void(l.remove(),$.each(a.datasets,function(b,c){var d=$.hex2rgb(n[c.clrkey]);$.extend(a.datasets[b],e(d))}),c=new Chart.Line(m,{data:a,options:{tooltips:{mode:'label',callbacks:{title:function title(a){return moment(a[0].xLabel).format(i)}}},legend:f,scales:{xAxes:g,yAxes:h}}}),$w.on('resize',function(){c.resize()}))}));var o,p=d.children('.stats-approvals'),q=p.children('h3'),r=p.children('.legend'),s=p.find('canvas').get(0).getContext('2d'),t=$.hex2rgb('#4DC742');$.post('/about/stats?stat=approvals',$.mkAjaxHandler(function(){if(!this.status)return p.remove();var a=this.data;return $.mk('p').append('Last updated: ',$.mk('time').attr('datetime',a.timestamp)).insertAfter(q),Time.Update(),0===a.datasets.length?r.html('<strong>No data available</strong>'):void(r.remove(),$.extend(a.datasets[0],e(t)),o=new Chart.Line(s,{data:a,options:{tooltips:{mode:'label',callbacks:{title:function title(a){return moment(a[0].xLabel).format(i)},label:function label(a){var b=parseInt(a.yLabel,10);return(0===b?'No':b)+' post'+(1===b?'':'s')+' approved'}}},legend:f,scales:{xAxes:g,yAxes:h}}}),$w.on('resize',function(){o.resize()}))}));var u,v=d.children('.stats-alltimeposts'),w=v.children('h3'),x=v.children('.legend'),y=v.find('canvas').get(0).getContext('2d'),z=['#E64C8D','#46ACD3','#5240C3'];$.post('/about/stats?stat=alltimeposts',$.mkAjaxHandler(function(){if(!this.status)return v.remove();var a=this.data;return $.mk('p').append('Last updated: ',$.mk('time').attr('datetime',a.timestamp)).insertAfter(w),Time.Update(),0===a.datasets.length?x.html('<strong>No data available</strong>'):void(x.remove(),$.each(a.datasets,function(b,c){var d=$.hex2rgb(z[c.clrkey]);$.extend(a.datasets[b],e(d,0===b?0:0.1))}),u=new Chart.Line(y,{data:a,options:{tooltips:{mode:'label',callbacks:{title:function title(a){return'Totals as of '+moment(a[0].xLabel).format('MMM \'YY')},label:function label(a){var b=parseInt(a.yLabel,10);return 0===a.datasetIndex?(0===b?'No':b)+' approved post'+(1===b?'':'s'):(0===b?'No':b)+' '+(1===a.datasetIndex?'request':'reservation')+(1===b?'':'s')}}},legend:f,scales:{xAxes:[{type:'time',time:{unit:'month',unitStepSize:1,displayFormats:{month:'MMM \'YY'}},ticks:{autoSkip:!0}}],yAxes:h}}}),$w.on('resize',function(){u.resize()}))}))},function(){'use strict';delete window.Chart,$('script').filter('[src^="/js/Chart.min.js"], [data-src^="/js/Chart.min.js"]').remove()});
//# sourceMappingURL=/js/min/about.js.map
