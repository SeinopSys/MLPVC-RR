{"version":3,"sources":["episodes-manage.js"],"names":["$","pad","n","parseIntArray","arr","each","i","el","parseInt","mkDateArray","datestr","s","split","mkTimeArray","timestr","mkDate","utc","dateArr","timeArr","d","Date","UpcomingUpdate","ulContent","$uc","length","document","createElement","attr","insertBefore","children","append","text","html","remove","window","setCD","updateTimesF","EpisodeForm","id","$form","EP_TITLE_HTML_REGEX","time","on","e","preventDefault","this","parent","prev","first","val","date","next","appendTo","Bind","tbody","$eptableBody","$pageTitle","data","show","hide","trigger","$eptable","find","$this","epid","removeAttr","off","closest","title","Dialog","wait","ajax","method","url","success","console","log","$w","status","$editepWithData","$editep","clone","prop","ep","twoparter","airdate","airtime","toAirDate","toAirTime","k","v","request","tempdata","serializeArray","name","value","airs","toISOString","upcoming","close","fail","message","confirm","sure","call","init","today","saturday","getTime","setDate","getDate","getDay","setUTCHours","setUTCMinutes","prototype","getFullYear","getMonth","getHours","getMinutes","EP_TITLE_REGEX","toString","$content","$addep","$airdate","$airtime"],"mappings":"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","file":"episodes-manage.min.js","sourcesContent":["$(function(){\r\n\tvar $eptable = $('#episodes'),\r\n\t\t$eptableBody = $eptable.children('tbody');\r\n\tBind.call({init:true});\r\n\r\n\tvar today = new Date(),\r\n\t\tsaturday = new Date(today.getTime());\r\n\tsaturday.setDate(saturday.getDate() + 6 - saturday.getDay());\r\n\tsaturday.setUTCHours(15);\r\n\tsaturday.setUTCMinutes(30);\r\n\tfunction pad(n){return n<10?'0'+n:n}\r\n\tfunction parseIntArray(arr){\r\n\t\t$.each(arr,function(i,el){\r\n\t\t\tarr[i] = parseInt(el, 10);\r\n\t\t});\r\n\t\treturn arr;\r\n\t}\r\n\tfunction mkDateArray(datestr){\r\n\t\tvar s = parseIntArray(datestr.split('-'));\r\n\t\ts[1]--;\r\n\t\treturn s;\r\n\t}\r\n\tfunction mkTimeArray(timestr){ return parseIntArray(timestr.split(':')) }\r\n\tfunction mkDate(datestr, timestr, utc){\r\n\t\tvar dateArr = mkDateArray(datestr),\r\n\t\t\ttimeArr = mkTimeArray(timestr),\r\n\t\t\td = new Date(dateArr[0], dateArr[1], dateArr[2], 10);\r\n\t\td['set'+(utc?'UTC':'')+'Hours'](timeArr[0]);\r\n\t\td['set'+(utc?'UTC':'')+'Minutes'](timeArr[1]);\r\n\t\treturn d;\r\n\t}\r\n\tDate.prototype.toAirDate = function(){ return pad(this.getFullYear())+'-'+pad(this.getMonth()+1)+'-'+pad(this.getDate()) };\r\n\tDate.prototype.toAirTime = function(){ return pad(this.getHours())+':'+pad(this.getMinutes()) };\r\n\tvar date = saturday.toAirDate(), time = saturday.toAirTime();\r\n\r\n\tfunction UpcomingUpdate(ulContent){\r\n\t\tvar $uc = $('#upcoming');\r\n\t\tif ($uc.length === 0 && !!ulContent){\r\n\t\t\t$uc = $(document.createElement('section')).attr('id', 'upcoming').insertBefore($('#sidebar').children('.welcome, .login'));\r\n\t\t\t$uc.append($(document.createElement('h2')).text('Upcoming episodes'),document.createElement('ul'));\r\n\t\t}\r\n\r\n\t\tif (ulContent)\r\n\t\t\t$uc.children('ul').html(ulContent);\r\n\t\telse $uc.remove();\r\n\r\n\t\twindow.setCD();\r\n\t\twindow.updateTimesF();\r\n\t}\r\n\r\n\tvar EP_TITLE_REGEX = window.EP_TITLE_REGEX,\r\n\t\tEP_TITLE_HTML_REGEX = EP_TITLE_REGEX.toString().split('/')[1],\r\n\t\t$content = $('#content'),\r\n\t\t$pageTitle = $content.children('h1');\r\n\r\n\tfunction EpisodeForm(id){\r\n\t\tvar $form = $(document.createElement('form')).attr('id', id).html(\r\n\t\t\t'<div class=input-group>'+\r\n\t\t\t\t'<input type=\"number\" min=1 max=8 name=season placeholder=\"Season #\" required>'+\r\n\t\t\t\t'<input type=\"number\" min=1 max=26 name=episode placeholder=\"Episode #\" required>'+\r\n\t\t\t'</div>\\\r\n\t\t\t<label><input type=\"text\" maxlength=255 name=title placeholder=Title pattern=\"'+EP_TITLE_HTML_REGEX+'\" autocomplete=off required></label>\\\r\n\t\t\t<div class=\"notice info align-center\">\\\r\n\t\t\t\t<p><strong>Title</strong> must be between 5 and 35 characters.<br>Letters, numbers, and these characters, are allowed:<br>-, apostrophe, !, &, comma.</p>\\\r\n\t\t\t</div>\\\r\n\t\t\t<div class=input-group>'+\r\n\t\t\t\t'<input type=\"date\" name=airdate placeholder=\"YYYY-MM-DD\" required>'+\r\n\t\t\t\t'<input type=\"time\" name=airtime placeholder=\"HH:MM\" required>'+\r\n\t\t\t'</div>\\\r\n\t\t\t<div class=\"notice info align-center button-here\">\\\r\n\t\t\t\t<p>Specify when the episode will air, in <strong>your computer\\'s timezone</strong>.</p>\\\r\n\t\t\t</div>\\\r\n\t\t\t<label><input type=\"checkbox\" name=twoparter> Has two parts</label>\\\r\n\t\t\t<div class=\"notice info align-center\">\\\r\n\t\t\t\t<p>If this is checked, only specify the episode number of the first part</p>\\\r\n\t\t\t</div>');\r\n\r\n\t\t\t$(document.createElement('button')).text('Set time to '+time+' this Saturday').on('click',function(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t$(this).parent().prev().children().first().val(date).next().val(time);\r\n\t\t\t}).appendTo($form.children('.button-here'));\r\n\r\n\t\treturn $form;\r\n\t}\r\n\tvar $addep = new EpisodeForm('addep'),\r\n\t\t$editep = new EpisodeForm('editep');\r\n\r\n\t$('#add-episode').on('click',function(e){\r\n\t\te.preventDefault();\r\n\t\tvar title = 'Add Episode';\r\n\r\n\t\t$.Dialog.request(title,$addep.clone(true, true),'addep','Add',function(){\r\n\t\t\tvar $form = $('#addep');\r\n\t\t\t$form.on('submit',function(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tvar data = {},\r\n\t\t\t\t\t$airdate = $form.find('input[name=airdate]'),\r\n\t\t\t\t\t$airtime = $form.find('input[name=airtime]');\r\n\r\n\t\t\t\tdata.airs = mkDate($airdate.attr('disabled',true).val(), $airtime.attr('disabled',true).val()).toISOString();\r\n\t\t\t\tvar tempdata = $(this).serializeArray();\r\n\t\t\t\t$.each(tempdata,function(i,el){\r\n\t\t\t\t\tdata[el.name] = el.value;\r\n\t\t\t\t});\r\n\r\n\t\t\t\t$.Dialog.wait(title,'Adding episode to database');\r\n\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\turl: \"/episode/add\",\r\n\t\t\t\t\tdata: data,\r\n\t\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\t\tif (typeof data !== 'object') return console.log(data) && $w.trigger('ajaxerror');\r\n\r\n\t\t\t\t\t\tif (data.status){\r\n\t\t\t\t\t\t\tBind(data.tbody);\r\n\t\t\t\t\t\t\tUpcomingUpdate(data.upcoming);\r\n\t\t\t\t\t\t\t$.Dialog.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse $.Dialog.fail(title,data.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t});\r\n\t});\r\n\r\n\tfunction Bind(tbody){\r\n\t\tif (typeof tbody === 'string'){\r\n\t\t\t$eptableBody.html(tbody);\r\n\t\t\tif ($eptableBody.children('.empty').length)\r\n\t\t\t\t$pageTitle.html($pageTitle.data('none')).next().show();\r\n\t\t\telse $pageTitle.html($pageTitle.data('list')).next().hide();\r\n\t\t\t$eptableBody.trigger('updatetimes');\r\n\t\t}\r\n\t\t$eptable.find('tr[data-epid]').each(function(){\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\tepid = $this.attr('data-epid');\r\n\r\n\t\t\t$this.removeAttr('data-epid').data('epid', epid);\r\n\t\t});\r\n\t\t$eptable.find('.edit-episode').off('click').on('click',function(e){\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\tepid = $this.closest('tr').data('epid'),\r\n\t\t\t\ttitle = 'Editing '+epid;\r\n\r\n\t\t\t$.Dialog.wait(title, 'Getting episode details from server');\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\turl: \"/episode/\"+epid,\r\n\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\tif (typeof data !== 'object') return console.log(data) && $w.trigger('ajaxerror');\r\n\r\n\t\t\t\t\tif (data.status){\r\n\t\t\t\t\t\tvar $editepWithData = $editep.clone(true, true);\r\n\r\n\t\t\t\t\t\t$editepWithData.find('input[name=twoparter]').prop('checked',!!data.ep.twoparter);\r\n\t\t\t\t\t\tdelete data.ep.twoparter;\r\n\r\n\t\t\t\t\t\tvar d = mkDate(data.ep.airdate, data.ep.airtime, true);\r\n\t\t\t\t\t\tdata.ep.airdate = d.toAirDate();\r\n\t\t\t\t\t\tdata.ep.airtime = d.toAirTime();\r\n\r\n\t\t\t\t\t\tvar epid = data.epid;\r\n\t\t\t\t\t\tdelete data.epid;\r\n\r\n\t\t\t\t\t\t$.each(data.ep,function(k,v){\r\n\t\t\t\t\t\t\t$editepWithData.find('input[name='+k+']').val(v);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t$.Dialog.request('Editing',$editepWithData,'editep','Save',function(){\r\n\t\t\t\t\t\t\t$('#editep').on('submit',function(e){\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\t\t\t\tvar tempdata = $(this).serializeArray(), data = {};\r\n\t\t\t\t\t\t\t\t$.each(tempdata,function(i,el){\r\n\t\t\t\t\t\t\t\t\tdata[el.name] = el.value;\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\tvar d = mkDate(data.airdate, data.airtime);\r\n\t\t\t\t\t\t\t\tdelete data.airdate;\r\n\t\t\t\t\t\t\t\tdelete data.airtime;\r\n\t\t\t\t\t\t\t\tdata.airs = d.toISOString();\r\n\r\n\t\t\t\t\t\t\t\t$.Dialog.wait(title,'Saving edits');\r\n\r\n\t\t\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\t\t\t\t\turl: '/episode/edit/'+epid,\r\n\t\t\t\t\t\t\t\t\tdata: data,\r\n\t\t\t\t\t\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\t\t\t\t\t\tif (typeof data !== 'object') return console.log(data) && $w.trigger('ajaxerror');\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (data.status){\r\n\t\t\t\t\t\t\t\t\t\t\tBind(data.tbody);\r\n\t\t\t\t\t\t\t\t\t\t\tUpcomingUpdate(data.upcoming);\r\n\t\t\t\t\t\t\t\t\t\t\t$.Dialog.close();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse $.Dialog.fail(title,data.message);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse $.Dialog.fail(title,data.message);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t$eptable.find('.delete-episode').off('click').on('click',function(e){\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\tepid = $this.closest('tr').data('epid'),\r\n\t\t\t\ttitle = 'Deleting '+epid;\r\n\r\n\t\t\t$.Dialog.confirm(title,'<p>This will remove <strong>ALL</strong><ul><li>requests</li><li>reservations</li><li>video links</li><li>and votes</li></ul>associated with the episode, too.</p><p>Are you sure you want to delete it?</p>',function(sure){\r\n\t\t\t\tif (!sure) return;\r\n\r\n\t\t\t\t$.Dialog.wait(title);\r\n\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\turl: '/episode/delete/'+epid,\r\n\t\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\t\tif (typeof data !== 'object') return console.log(data) && $w.trigger('ajaxerror');\r\n\r\n\t\t\t\t\t\tif (data.status){\r\n\t\t\t\t\t\t\tBind(data.tbody);\r\n\t\t\t\t\t\t\tUpcomingUpdate(data.upcoming);\r\n\t\t\t\t\t\t\t$.Dialog.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse $.Dialog.fail(title,data.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n});"],"sourceRoot":"/source/"}