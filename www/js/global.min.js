function DocumentIsReady(){"use strict";$d.triggerHandler("paginate-refresh");var e=window.OAUTH_URL,t=localStorage.getItem("cookie_consent");$("#signin").off("click").on("click",function(){var n=$(this),o=function(t){t&&(localStorage.setItem("cookie_consent",1),n.attr("disabled",!0),$.Dialog.wait("Sign-in process","Redirecting you to DeviantArt",function(){window.location.href=e}))};t?o(!0):$.Dialog.confirm("EU Cookie Policy Notice",'In compliance with the <a href="http://ec.europa.eu/ipg/basics/legal/cookies/index_en.htm">EU Cookie Policy</a> we must inform you that our website will store cookies on your device to remember your logged in status between browser sessions.<br><br>If you would like to avoid these completly harmless pieces of information required to use this website, click "Decline" and continue browsing as a guest.<br><br>This warning will not appear again if you accept our use of persistent cookies.',["Accept","Decline"],o)}),$("#signout").off("click").on("click",function(){var e="Sign out";$.Dialog.confirm(e,"Are you sure you want to sign out?",function(t){t&&($.Dialog.wait(e,"Signing out"),$.post("/signout",$.mkAjaxHandler(function(){if(this.status){var t=this.message;HandleNav(location.href,function(){$.Dialog.success(e,t),setTimeout(function(){$.Dialog.close()},1500)})}else $.Dialog.fail(e,this.message)})))})});var n=window.DocReady.length;if(n)for(var o=0;n>o;o++)window.DocReady[o].call(window)}function OpenSidebarByDefault(){"use strict";return window.matchMedia("all and (min-width: 1200px)").matches}!function(e){"use strict";var t=function(){return document.createElement.apply(document,arguments)};window.mk=function(){return t.apply(window,arguments)},e.mk=function(){return e(document.createElement.apply(document,arguments))},e.urlToAbsolute=function(e){var n=t("a");return n.href=e,n.href},window.$w=e(window),window.$d=e(document),window.CommonElements=function(){window.$header=e("header"),window.$sbToggle=e(".sidebar-toggle"),window.$main=e("#main"),window.$content=e("#content"),window.$sidebar=e("#sidebar"),window.$footer=e("footer"),window.$body=e("body"),window.$head=e("head"),window.$navbar=$header.find("nav")},window.CommonElements(),window.Key={Enter:13,Space:32,LeftArrow:37,RightArrow:39,Tab:9},e.isKey=function(e,t){return t.keyCode===e},e.capitalize=function(e,t){return t?e.replace(/((?:^|\s)[a-z])/g,function(e){return e.toUpperCase()}):1===e.length?e.toUpperCase():e[0].toUpperCase()+e.substring(1)},"function"!=typeof Array.prototype.includes&&(Array.prototype.includes=function(e){return-1!==this.indexOf(e)}),e.pad=function(e,t,n,o){for("string"!=typeof e&&(e=""+e),"string"!=typeof t&&(t="0"),("number"!=typeof n||!isFinite(n)||isNaN(n))&&(n=2),"boolean"!=typeof o&&(o=!0);e.length<n;)e=o?t+e:e+t;return e},$w.on("ajaxerror",function(){var t="";if(arguments.length>1){var n=[].slice.call(arguments,1);if("abort"===n[0])return;t=" Details:<pre><code>"+n.join("\n").replace(/</g,"&lt;")+"</code></pre>"}e.Dialog.fail(!1,"There was an error while processing your request."+t+" You may find additional details in the browser's console.")}),e.mkAjaxHandler=function(e){return function(t){return"object"!=typeof t?(console.log(t),void $w.trigger("ajaxerror")):void("function"==typeof e&&e.call(t))}},e.callCallback=function(t,n,o){return"object"==typeof n&&e.isArray(n)||(o=n,n=[]),"function"!=typeof t?o:t.apply(window,n)},e.fn.mkData=function(t){var n=e(this).serializeArray(),o={};return e.each(n,function(e,t){o[t.name]=t.value}),"object"==typeof t&&e.extend(o,t),o},e.getCSRFToken=function(){var e=document.cookie.match(/CSRF_TOKEN=([a-z\d]+)/i);if(e&&e.length)return e[1];throw new Error("Missing CSRF_TOKEN")},e.ajaxPrefilter(function(t,n){if("POST"===(n.type||t.type).toUpperCase()){var o=e.getCSRFToken();if("undefined"==typeof t.data&&(t.data=""),"string"==typeof t.data){var i=t.data.length>0?t.data.split("&"):[];i.push("CSRF_TOKEN="+o),t.data=i.join("&")}else t.data.CSRF_TOKEN=o}}),e.ajaxSetup({dataType:"json",error:function(){$w.triggerHandler("ajaxerror",[].slice.call(arguments,1))},statusCode:{401:function(){e.Dialog.fail(void 0,"Cross-site Request Forgery attack detected. Please notify the site administartors.")},404:function(){e.Dialog.fail(void 0,"Error 404: The requested endpoint could not be found")},500:function(){e.Dialog.fail(!1,"The request failed due to an internal server error. If this persists, please open an issue on GitHub using the link in the footer!")}}}),e.copy=function(t){if(!document.queryCommandSupported("copy"))return prompt("Copy with Ctrl+C, close with Enter",t),!0;var n=e.mk("textarea"),o=!1;n.css({opacity:0,width:0,height:0,position:"fixed",left:"-10px",top:"50%",display:"block"}).text(t).appendTo("body").focus(),n.get(0).select();try{o=document.execCommand("copy")}catch(i){}o||e.Dialog.fail("Copy to clipboard","Copying text to clipboard failed!"),setTimeout(function(){n.remove()},1)},e.hex2rgb=function(e){return{r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16)}},window.URL=function(t){var n=document.createElement("a"),o={};return n.href=t,e.each(["hash","host","hostname","href","origin","pathname","port","protocol","search"],function(e,t){o[t]=n[t]}),o.pathString=o.pathname+o.search+o.hash,o}}(jQuery);var DocReadyOnce=!1;$(function(){"use strict";function e(e){return 10>e?"0"+e:e}function t(){var t,n,o="function"==typeof a.parent&&a.parent().length>0,i={};if(o&&(t=new Date,n=new Date(a.attr("datetime")),i=getTimeDiff(t,n)),!o||i.past)return o&&a.parents("li").remove(),clearInterval(r),window.setCD();var s="in ";i.time<one.month?(i.week>0&&(i.day+=7*i.week),i.day>0&&(s+=i.day+" day"+(1!==i.day?"s":"")+" & "),i.hour>0&&(s+=i.hour+":"),s+=e(i.minute)+":"+e(i.second)):s=createTimeStr(t,n),a.text(s)}function n(e){if(e.which>2)return!0;var t=this;return t.hostname!==location.hostname||!c.test(t.pathname)&&!/^\/@([A-Za-z\-\d]{1,20})$/.test(t.pathname)?!0:t.pathname===location.pathname&&t.search===location.search?!0:(e.preventDefault(),void o(this.href))}function o(e,t,n){i!==!1&&(i.abort(),i=!1);var o="Navigation";$body.addClass("loading");var a=$.ajax({url:e,data:{"via-js":!0},success:$.mkAjaxHandler(function(){if(i===a){if(!this.status)return $body.removeClass("loading"),i=!1,$.Dialog.fail(o+" error",this.message);e=new URL(this.responseURL+new URL(e).hash).pathString,$w.triggerHandler("unload"),OpenSidebarByDefault()||$sbToggle.trigger("sb-close");var r=this.css,s=this.js,c=this.content,d=this.sidebar,u=this.footer,f=this.title,p=this.avatar;$main.empty();var h=!1,g=new URL(location.href),w=!n&&g.pathString===e;if($body.children("script[src], script[data-src]").each(function(){var e=$(this),t=e.attr("src")||e.attr("data-src");if(w)return/js\/dialog\./.test(t)||e.remove(),!0;var n=s.indexOf(t);if(-1===n||/js\/colorguide[\.\-]/.test(t)){if(-1!==t.indexOf("global"))return!(h=!0);e.remove()}else s.splice(n,1)}),h!==!1)return location.href=e,location.href;$head.children("link[href], style[href]").each(function(){var e=$(this),t=e.attr("href"),n=r.indexOf(t);-1!==n?r.splice(n,1):e.remove()}),console.clear(),function m(n){if(n>=r.length){$main.addClass("pls-wait").html(c),$sidebar.html(d),$footer.html(u),window.updateTimes(),window.setCD();var o=$header.find("nav").children();o.children().first().children("img").attr("src",p),o.children(":not(:first-child)").remove(),o.append($sidebar.find("nav").children().children().clone()),document.title=(f?f+" - ":"")+l,window.CommonElements(),window.DEVELOPER===!0&&$.Dialog.info("Navigation URL",e);var a=g.pathString===e;return/^http:\/\//.test(e)||(window.DEVELOPER===!0&&$.Dialog.info("Navigation URL",e),e=URL(e),window.DEVELOPER===!0&&$.Dialog.info("Navigation URL","<code>"+JSON.stringify(e)+"</code>"),e=e.href),window.DEVELOPER===!0&&$.Dialog.info("Navigation URL",e),history[a?"replaceState":"pushState"]({"via-js":!0},"",e),window.DocReady=[],function w(e){if(e>=s.length)return DocumentIsReady(),$body.removeClass("loading"),$main.removeClass("pls-wait"),$.callCallback(t),void(i=!1);var n=s[e];i=$.ajax({url:n,dataType:"text",success:function(t){$body.append($.mk("script").attr("data-src",n).text(t)),w(e+1)}})}(0)}var h=r[n];i=$.ajax({url:h,dataType:"text",success:function(e){$head.append($.mk("style").attr("href",h).text(e)),m(n+1)}})}(0)}})});i=a}if(!DocReadyOnce){DocReadyOnce=!0;var i=!1;$sbToggle.off("click").on("click",function(e){e.preventDefault(),i===!1&&$sbToggle.trigger("sb-"+($body.hasClass("sidebar-open")?"close":"open"))}).on("sb-open sb-close",function(e){var t="close"===e.type.substring(3);$body[t?"removeClass":"addClass"]("sidebar-open"),localStorage[t?"setItem":"removeItem"]("sidebar-closed","true")}),"true"!==localStorage.getItem("sidebar-closed")&&OpenSidebarByDefault()&&$body.addClass("sidebar-open");var a,r,s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];window.setCD=function(){var e=$("#upcoming");if(e.length){var n=e.children("ul").children();if(!n.length)return e.remove();a=n.first().find("time").addClass("nodt"),r=setInterval(t,1e3),t(),e.find("li").each(function(){var e=$(this),t=e.children(".calendar"),n=new Date(e.find(".countdown").data("airs")||e.find("time").attr("datetime"));t.children(".top").text(s[n.getMonth()]),t.children(".bottom").text(n.getDate())}),window.updateTimes()}},window.setCD(),$w.on("unload",function(){a={length:0}});var c=window.REWRITE_REGEX,l=window.SITE_TITLE;$d.off("click","a[href]",n).on("click","a[href]",n),$w.off("popstate").on("popstate",function(e){var t=e.originalEvent.state;return null===t||t["via-js"]?void o(location.href,void 0,!0):$w.trigger("nav-popstate",[t])}),window.HandleNav=function(){o.apply(window,arguments)};var d=function(e,t){var n="number"==typeof t&&t>0?function(){setTimeout(e,t)}:e;o(location.pathname,n)};window.HandleNav.reload=function(){d.apply(window,arguments)},DocumentIsReady()}}),$w.on("load",function(){"use strict";$body.removeClass("loading")});
//# sourceMappingURL=global.min.js.map
