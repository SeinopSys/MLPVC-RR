!function(t,e){"use strict";var o="poly-",i=t(document);t.fn.polyEditor=function(e){if(!e.image)throw new Error("Missing image");var n,a,l,r,c=t(new Image).attr({src:e.image,"class":o+"image"}).attr("class",o+"image-element"),s=this.first().addClass(o+"wrap"),f=0,p=function(e){var o=c.data("size");if("object"==typeof o){var i=(o.width>o.height,t.scaleResize(o.width,o.height,{scale:t.rangeLimit(e,!1,.01,2.5)})),r={top:(n-i.height)/2,left:(a-i.width)/2},s={top:r.top-l.top+i.height/2,left:r.left-l.left+i.width/2},p={top:n/2,left:a/2};({top:p.top-s.top,left:p.left-s.left});g.add(c).css({top:r.top,left:r.left,width:i.width,height:i.height}),f=i.scale,h()}},h=function(){d.text(t.roundTo(100*f,2)+"%"),document.activeElement.blur()},d=t.mk("span").attr({"class":o+"zoom-perc",contenteditable:!0}).text("100%").on("keydown",function(e){if(t.isKey(Key.Enter,e)){e.preventDefault();var o=parseFloat(d.text(),10);isNaN(o)||p(o/100),h()}}).on("click",function(){d.select()}).on("blur",function(){t.clearSelection()}),u=t.mk("button").attr("class",o+"zoom-fit typcn typcn typcn-arrow-minimise").on("click",function(e){var o=c.data("size");if("object"==typeof o){e.preventDefault();var i=o.width>o.height,l=t.scaleResize(o.width,o.height,i?{height:n}:{width:a});g.add(c).css({top:i?0:(n-l.height)/2,left:i?(a-l.width)/2:0,width:l.width,height:l.height}),f=l.scale,h()}}),m=t.mk("div").attr("class",o+"actions "+o+"actions-bl").append(t.mk("button").attr("class",o+"zoom-in typcn typcn-zoom-in").on("click",function(t){t.preventDefault(),p((Math.floor(10*f)+1)/10)}),t.mk("button").attr("class",o+"zoom-out typcn typcn-zoom-out").on("click",function(t){t.preventDefault(),p((Math.floor(10*f)-1)/10)}),u,d).on("mousedown",function(t){t.stopPropagation(),d.triggerHandler("blur")}),g=t.mk("div").attr("class",o+"image-overlay").appendTo(s),w=t.mk("div").attr("class",o+"loader").html("Loading&hellip;"),v=t.throttle(250,function(t){n=s.innerHeight(),a=s.innerWidth(),l=s.offset(),l.top-=n-s.outerHeight(),l.left-=a-s.outerWidth(),"number"==typeof f&&p(f)});return t(window).on("resize",v),v(),s.append(m,w),c.on("load",function(){g.css("opacity",0),c.appendTo(s).data("size",{width:c.width(),height:c.height()}),w.detach(),u.triggerHandler("click"),g.fadeTo(500,1);var e,o;r=t.throttle(100,function(t){t.preventDefault();var i={top:t.pageY,left:t.pageX};g.add(c).css({top:e.top+(i.top-o.top)-l.top,left:e.left+(i.left-o.left)-l.left})}),i.on("mousedown",function(n){t(n.target).is(g)&&(n.preventDefault(),e=g.offset(),o={top:n.pageY,left:n.pageX},i.on("mousemove",r))}),i.on("mouseup mouseleave blur",function(){i.off("mousemove",r)})}),{destroy:function(){"function"==typeof r&&i.off("mousemove",r),t(window).off("resize",v),s.empty().removeClass(o+"wrap")}}}}(jQuery);
//# sourceMappingURL=poly-editor.min.js.map
