{"version":3,"sources":["dyntime.js"],"names":["$","timeDifference","n","e","substract","getTime","d","past","time","Math","abs","target","day","floor","hour","minute","second","week","month","year","createTimeStr","obj","isArray","keys","Object","returnStr","i","l","length","el","arr","timeparts","startval","window","DT_START","timePad","isNaN","parseInt","toString","months","undefined","weekdays","dateformat","orderwd","order","date","postfix","lastDigit","weekday","wd","m","y","unit","num","update","filter","each","getFullDate","fulldate","replace","_","k","$this","this","attr","timestamp","Date","TypeError","console","log","Error","hasClass","addClass","getDate","getFullYear","mo","getMonth","getDay","h","getHours","mi","getMinutes","s","getSeconds","diff","timestr","$elapsedHolder","parent","children","updateHandler","data","result","html","getTimeDiff","apply","arguments","updateTimesF","noAutoUpdateTimes","updateTimes","setInterval","jQuery"],"mappings":"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","file":"dyntime.min.js","sourcesContent":["(function($){\r\n\tvar startval = window.DT_START || 'just now';\r\n\tvar timePad = function(i){if(!isNaN(i)){i=parseInt(i);if (i<10&&i>=0)i='0'+i;else if(i<0)i='-0'+Math.abs(i);else i=i.toString()}return i};\r\n\tvar months = [ undefined,\r\n\t\t\"Januaray\",\r\n\t\t\"February\",\r\n\t\t\"March\",\r\n\t\t\"April\",\r\n\t\t\"May\",\r\n\t\t\"June\",\r\n\t\t\"July\",\r\n\t\t\"August\",\r\n\t\t\"September\",\r\n\t\t\"October\",\r\n\t\t\"November\",\r\n\t\t\"December\"\r\n\t];\r\n\tvar weekdays = [\r\n\t\t\"Sunday\",\r\n\t\t\"Monday\",\r\n\t\t\"Tuesday\",\r\n\t\t\"Wednesday\",\r\n\t\t\"Thursday\",\r\n\t\t\"Friday\",\r\n\t\t\"Saturday\"\r\n\t];\r\n\tvar dateformat = {\r\n\t\torderwd: '{{wd}}, {{d}} {{mo}}, {{y}} {{h}}:{{mi}}:{{s}}',\r\n\t\torder: '{{d}} {{mo}} {{y}}, {{h}}:{{mi}}:{{s}}',\r\n\t\tday: function(date){\r\n\t\t\tvar lastDigit = date % 10,\r\n\t\t\t\tpostfix;\r\n\t\t\tif (lastDigit == 0 || lastDigit > 3 || date == 11 || date == 12) postfix = 'th';\r\n\t\t\telse if (lastDigit == 1) postfix = 'st';\r\n\t\t\telse if (lastDigit == 2) postfix = 'nd';\r\n\t\t\telse if (lastDigit == 3) postfix = 'rd';\r\n\t\t\treturn date.toString() + postfix;\r\n\t\t},\r\n\t\tweekday: function(wd){ return weekdays[parseInt(wd)] },\r\n\t\tmonth: function(m){ return months[parseInt(m)] },\r\n\t\tyear: function(y){ return y },\r\n\t};\r\n\tvar timeparts = function(unit, num){\r\n\t\treturn num+' '+unit+(num>1?'s':'');\r\n\t};\r\n\tvar update = function(){\r\n\t\t$('time').filter(':not(.nodt)').each(function(){\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\tdate = $this.attr('datetime'),\r\n\t\t\t\ttimestamp = new Date(date);\r\n\t\t\tif (typeof date !== 'string') throw new TypeError('Invalid date data type: \"'+(typeof date)+'\"');\r\n\t\t\tif (isNaN(timestamp.getTime())){\r\n\t\t\t\tconsole.log(this);\r\n\t\t\t\tthrow new Error('Invalid date format: \"'+date+'\"');\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tif (!$this.hasClass('dynt')) $this.addClass('dynt');\r\n\t\t\t\r\n\t\t\tdate = {\r\n\t\t\t\td: dateformat.day(timestamp.getDate()),\r\n\t\t\t\ty: dateformat.year(timestamp.getFullYear()),\r\n\t\t\t\tmo: dateformat.month(timestamp.getMonth()+1),\r\n\t\t\t\twd: dateformat.weekday(timestamp.getDay()),\r\n\t\t\t\th: timePad(timestamp.getHours()),\r\n\t\t\t\tmi: timePad(timestamp.getMinutes()),\r\n\t\t\t\ts: timePad(timestamp.getSeconds()),\r\n\t\t\t\torder: dateformat.order,\r\n\t\t\t\torderwd: dateformat.orderwd,\r\n\t\t\t};\r\n\r\n\t\t\tfunction getFullDate(fulldate){\r\n\t\t\t\treturn fulldate.replace(/\\{\\{([a-z]{1,2})}}/g,function(_,k){\r\n\t\t\t\t\treturn date[k];\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar diff = timeDifference(new Date,timestamp),\r\n\t\t\t\ttimestr = createTimeStr(diff),\r\n\t\t\t\t$elapsedHolder = $this.parent().children('.dynt-el'),\r\n\t\t\t\tupdateHandler = $this.data('dyntime-beforeupdate');\r\n\r\n\t\t\tif (typeof updateHandler === 'function'){\r\n\t\t\t\tvar result = updateHandler(diff);\r\n\t\t\t\tif (result === false) return;\r\n\t\t\t}\r\n\r\n\t\t\tif ($elapsedHolder.length > 0){\r\n\t\t\t\t$this.html(getFullDate(date['order'+(\r\n\t\t\t\t\ttypeof $this.data('noweekday') !== 'undefined'\r\n\t\t\t\t\t?''\r\n\t\t\t\t\t:'wd'\r\n\t\t\t\t)]));\r\n\t\t\t\t$elapsedHolder.html(timestr);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$this.attr('title', getFullDate(date.order));\r\n\t\t\t\t$this.html(timestr);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tfunction timeDifference(n,e) {\r\n\t\tvar substract = n.getTime() - e.getTime(),\r\n\t\t\td = { past: substract > 0, time: Math.abs(substract), target: e }\r\n\t\t\ttime = d.time;\r\n\r\n\t\td.day = Math.floor(time/1000/60/60/24);\r\n\t\ttime -= d.day*1000*60*60*24;\r\n\t\t\r\n\t\td.hour = Math.floor(time/1000/60/60);\r\n\t\ttime -= d.hour*1000*60*60;\r\n\t\t\r\n\t\td.minute = Math.floor(time/1000/60);\r\n\t\ttime -= d.minute*1000*60;\r\n\t\t\r\n\t\td.second = Math.floor(time/1000);\r\n\t\t\r\n\t\tif (d.day >= 7){\r\n\t\t\td.week = Math.floor(d.day/7);\r\n\t\t\td.day -= d.week*7;\r\n\t\t}\r\n\t\tif (d.week >= 4){\r\n\t\t\td.month = Math.floor(d.week/4);\r\n\t\t\td.week -= d.month*4;\r\n\t\t}\r\n\t\tif (d.month >= 12){\r\n\t\t\td.year = Math.floor(d.month/12);\r\n\t\t\td.month -= d.year*12;\r\n\t\t}\r\n\t\t\r\n\t\treturn d;\r\n\t}\r\n\twindow.getTimeDiff = function(){\r\n\t\treturn timeDifference.apply(this, arguments);\r\n\t};\r\n\tfunction createTimeStr(obj){\r\n\t\tif (typeof obj !== 'object' || $.isArray(obj)) return false;\r\n\t\tif (obj.time > 0) delete obj.time;\r\n\t\t\r\n\t\tvar keys = Object.keys(obj), returnStr = '';\r\n\t\tfor (var i=0,l=keys.length; i<l; i++) if (keys[i] !== 'second' && obj[keys[i]] < 1) delete obj[keys[i]];\r\n\r\n\t\tfor (var arr = ['year','month','week','day','hour','minute','second'], l  = arr.length, i = 0, el; i<l; i++)\r\n\t\t\tif (obj[el = arr[i]] > 0){\r\n\t\t\t\tif (!obj.past && el !== 'second')\r\n\t\t\t\t\tobj[el]++;\r\n\t\t\t\treturnStr = timeparts(el,obj[el]);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\tif (returnStr.length === 0) return startval;\r\n\t\tif (returnStr === '1 day') return obj.past ? 'yesterday' : 'tomorrow';\r\n\t\telse return obj.past ? returnStr+' ago' : 'in '+returnStr;\r\n\t}\r\n\tupdate();\r\n\twindow.updateTimesF = function(){\r\n\t\tupdate.apply(update,arguments);\r\n\t};\r\n\tif (window.noAutoUpdateTimes !== true) window.updateTimes = window.setInterval(update,10000);\r\n})(jQuery);"],"sourceRoot":"/source/"}