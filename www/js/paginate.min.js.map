{"version":3,"sources":["paginate.js"],"names":["$","$title","document","head","children","basePath","location","pathname","replace","$pagination","pageNumber","parseInt","first","text","title","on","e","preventDefault","toPage","this","window","target","silentfail","bypass","newPageNumber","substring","length","search","Dialog","wait","get","js","mkAjaxHandler","status","fail","message","page","updateTimesF","find","last","html","innerHTML","history","pushState","max","maxpage","each","$ul","$childs","empty","i","append","eq","update","output","trigger","close","info"],"mappings":"AAAAA,EAAE,WACD,GAAIC,GAASD,EAAEE,SAASC,MAAMC,SAAS,SACtCC,EAAWC,SAASC,SAASC,QAAQ,SAAS,IAC9CC,EAAcT,EAAE,eAChBU,EAAaC,SAASF,EAAYG,QAAQR,SAAS,MAAMA,SAAS,UAAUS,OAAQ,IACpFC,EAAQ,YACTL,GAAYM,GAAG,QAAQ,IAAI,SAASC,GACnCA,EAAEC,iBAEFjB,EAAEkB,OAAOC,KAAKZ,YAEfP,EAAEoB,QAAQL,GAAG,WAAW,WACvBf,EAAEkB,OAAOZ,SAASC,UAAU,KAE7BP,EAAEkB,OAAS,SAASG,EAAQC,EAAYC,GAClCF,IAAQA,EAASD,OAAOd,SAASC,SACtC,IAAIiB,GAAgBb,SAASU,EAAOI,UAAUpB,EAASqB,QAAS,GAEhE,OAAKH,IAAUb,IAAec,GAG1BlB,SAASqB,OAAOD,OAAS,IAC5BL,GAAUf,SAASqB,QAEpB3B,EAAE4B,OAAOC,KAAKf,EAAO,gBAAgBU,OAErCxB,GAAE8B,IAAIT,GAASU,IAAI,GAAO/B,EAAEgC,cAAc,WACzC,IAAKb,KAAKc,OAAQ,MAAOjC,GAAE4B,OAAOM,KAAKpB,EAAOK,KAAKgB,QAEnDX,GAAgBb,SAASQ,KAAKiB,KAAM,IAEpChB,OAAOiB,eACPrC,EAAE,OAAOsC,KAAK,aAAalC,WAAWmC,OAAOC,KAAK,WACjD,MAAOrB,MAAKsB,UAAUjC,QAAQ,WAAW,QAAQgB,KAElDvB,EAAOY,KAAKM,KAAKL,OAEjB4B,QAAQC,aAAa,GAAGtC,EAASmB,GAAeJ,OAAOd,SAASqB,OAAOD,OAAS,EAAIpB,SAASqB,OAAS,IAEtG,IAAIiB,GAAMzB,KAAK0B,OACfpC,GAAYqC,KAAK,WAChB,GAAIC,GAAM/C,EAAEmB,MACX6B,EAAUD,EAAI3C,UAEf,IAAI4C,EAAQtB,SAAWkB,EAAI,CAC1BG,EAAIE,OACJ,KAAK,GAAIC,GAAI,EAAQN,GAALM,EAAUA,IACzBH,EAAII,OAAO,gBAAgB9C,EAAS6C,EAAE,KAAKA,EAAE,YAC9CF,GAAUD,EAAI3C,eAEV4C,GAAQI,GAAG1C,EAAW,GAAG8B,KAAK,YAAYnC,EAASK,EAAW,KAAKA,EAAW,OACnFsC,GAAQI,GAAG5B,EAAc,GAAGgB,KAAK,WAAWhB,EAAc,eAG3DxB,EAAEmB,KAAKkC,QAAQb,KAAKrB,KAAKmC,QAAQC,QAAQ,eAEzC7C,EAAac,EACbxB,EAAE4B,OAAO4B,YAtCFlC,GAAa,EAAQtB,EAAE4B,OAAO6B,KAAK3C,EAAO,2BAA2BJ","file":"paginate.min.js","sourcesContent":["$(function(){\r\n\tvar $title = $(document.head).children('title'),\r\n\t\tbasePath = location.pathname.replace(/(\\d+)$/,''),\r\n\t\t$pagination = $('.pagination'),\r\n\t\tpageNumber = parseInt($pagination.first().children('li').children('strong').text(), 10),\r\n\t\ttitle = 'Navigation';\r\n\t$pagination.on('click','a',function(e){\r\n\t\te.preventDefault();\r\n\r\n\t\t$.toPage(this.pathname);\r\n\t});\r\n\t$(window).on('popstate',function(){\r\n\t\t$.toPage(location.pathname, true);\r\n\t});\r\n\t$.toPage = function(target, silentfail, bypass){\r\n\t\tif (!target) target = window.location.pathname;\r\n\t\tvar newPageNumber = parseInt(target.substring(basePath.length), 10);\r\n\r\n\t\tif (!bypass && pageNumber === newPageNumber)\r\n\t\t\treturn silentfail ? false : $.Dialog.info(title, 'You are already on page '+pageNumber);\r\n\r\n\t\tif (location.search.length > 1)\r\n\t\t\ttarget += location.search;\r\n\r\n\t\t$.Dialog.wait(title, 'Loading page '+newPageNumber);\r\n\r\n\t\t$.get(target, {js: true}, $.mkAjaxHandler(function(){\r\n\t\t\tif (!this.status) return $.Dialog.fail(title, this.message);\r\n\r\n\t\t\tnewPageNumber = parseInt(this.page, 10);\r\n\r\n\t\t\twindow.updateTimesF();\r\n\t\t\t$('nav').find('li.active').children().last().html(function(){\r\n\t\t\t\treturn this.innerHTML.replace(/Page \\d+/,'Page '+newPageNumber);\r\n\t\t\t});\r\n\t\t\t$title.text(this.title);\r\n\r\n\t\t\thistory.pushState({},'',basePath+newPageNumber+(window.location.search.length > 1 ? location.search : ''));\r\n\r\n\t\t\tvar max = this.maxpage;\r\n\t\t\t$pagination.each(function(){\r\n\t\t\t\tvar $ul = $(this),\r\n\t\t\t\t\t$childs = $ul.children();\r\n\r\n\t\t\t\tif ($childs.length !== max){\r\n\t\t\t\t\t$ul.empty();\r\n\t\t\t\t\tfor (var i = 1; i <= max; i++)\r\n\t\t\t\t\t\t$ul.append('<li><a href=\"'+basePath+i+'\">'+i+'</a></li>');\r\n\t\t\t\t\t$childs = $ul.children();\r\n\t\t\t\t}\r\n\t\t\t\telse $childs.eq(pageNumber-1).html('<a href=\"'+basePath+pageNumber+'\">'+pageNumber+'</a>');\r\n\t\t\t\t$childs.eq(newPageNumber-1).html('<strong>'+newPageNumber+'</strong>');\r\n\t\t\t});\r\n\r\n\t\t\t$(this.update).html(this.output).trigger('page-switch');\r\n\r\n\t\t\tpageNumber = newPageNumber;\r\n\t\t\t$.Dialog.close();\r\n\t\t}));\r\n\t};\r\n});\r\n"],"sourceRoot":"/source/"}