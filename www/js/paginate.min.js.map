{"version":3,"sources":["paginate.js"],"names":["$document","off","on","basePath","location","pathname","replace","$pagination","$","pageNumber","parseInt","first","children","text","title","e","preventDefault","stopPropagation","hide","toPage","this","$w","state","call","target","silentfail","bypass","window","newPageNumber","substring","length","page","search","Dialog","wait","get","js","mkAjaxHandler","status","fail","message","find","last","html","innerHTML","document","isNaN","history","pushState","paginate","max","maxpage","each","$ul","$childs","empty","i","append","eq","event","jQuery","Event","update","output","trigger","updateTimesF","isDefaultPrevented","close","info"],"mappings":"AAAAA,UAAUC,IAAI,oBAAoBC,GAAG,mBAAmB,WACvD,GAAIC,GAAWC,SAASC,SAASC,QAAQ,SAAS,IACjDC,EAAcC,EAAE,eAChBC,EAAaC,SAASH,EAAYI,QAAQC,SAAS,MAAMA,SAAS,UAAUC,OAAQ,IACpFC,EAAQ,YACTP,GAAYL,GAAG,QAAQ,IAAI,SAASa,GACnCA,EAAEC,iBACFD,EAAEE,kBAEFT,EAAE,YAAYU,OAEdV,EAAEW,OAAOC,KAAKf,YAEfgB,GAAGnB,GAAG,eAAe,SAASa,EAAGO,GAChCd,EAAEW,OAAOI,MAAMD,MAAMA,GAAOlB,SAASC,UAAU,KAEhDG,EAAEW,OAAS,SAASK,EAAQC,EAAYC,GAClCF,IAAQA,EAASG,OAAOvB,SAASC,SACtC,IAAIuB,GAAgBlB,SAASc,EAAOK,UAAU1B,EAAS2B,QAAS,IAC/DR,EAAQF,KAAKE,SAEd,OAAKI,IAAWjB,IAAemB,GAAiBnB,IAAea,EAAMS,MAGjE3B,SAAS4B,OAAOF,OAAS,IAC5BN,GAAUpB,SAAS4B,QAEpBxB,EAAEyB,OAAOC,KAAKpB,EAAO,gBAAgBc,OAErCpB,GAAE2B,IAAIX,GAASY,IAAI,GAAO5B,EAAE6B,cAAc,WACzC,IAAKjB,KAAKkB,OAAQ,MAAO9B,GAAEyB,OAAOM,KAAKzB,EAAOM,KAAKoB,QAEnDZ,GAAgBlB,SAASU,KAAKW,KAAM,IAEpCvB,EAAE,OAAOiC,KAAK,aAAa7B,WAAW8B,OAAOC,KAAK,WACjD,MAAOvB,MAAKwB,UAAUtC,QAAQ,WAAW,QAAQsB,KAIlDiB,SAAS/B,MAAQ+B,SAAS/B,MAAMR,QAAQ,iBAAiBc,KAAKN,MAAM,MAEhEQ,EAAMS,OAASH,GAAkBkB,MAAMlB,IAC1CmB,QAAQC,WAAWC,UAAS,EAAMlB,KAAKH,GAAe,GAAGzB,EAASyB,GAAeD,OAAOvB,SAAS4B,OAAOF,OAAS,EAAI1B,SAAS4B,OAAS,IAExI,IAAIkB,GAAM9B,KAAK+B,OACf5C,GAAY6C,KAAK,WAChB,GAAIC,GAAM7C,EAAEY,MACXkC,EAAUD,EAAIzC,UAEf,IAAI0C,EAAQxB,SAAWoB,EAAI,CAC1BG,EAAIE,OACJ,KAAK,GAAIC,GAAI,EAAQN,GAALM,EAAUA,IACzBH,EAAII,OAAO,gBAAgBtD,EAASqD,EAAE,KAAKA,EAAE,YAC9CF,GAAUD,EAAIzC,eAEV0C,GAAQI,GAAGjD,EAAW,GAAGkC,KAAK,YAAYxC,EAASM,EAAW,KAAKA,EAAW,OACnF6C,GAAQI,GAAG9B,EAAc,GAAGe,KAAK,WAAWf,EAAc,cAG3D,IAAI+B,GAAQC,OAAOC,MAAM,cACzBrD,GAAEY,KAAK0C,QAAQnB,KAAKvB,KAAK2C,QAAQC,QAAQL,GACzChC,OAAOsC,eACPxD,EAAamB,EAER+B,EAAMO,sBAAsB1D,EAAEyB,OAAOkC,YA1CnC1C,GAAa,EAAQjB,EAAEyB,OAAOmC,KAAKtD,EAAO,2BAA2BL","file":"paginate.min.js","sourcesContent":["$document.off('paginate-refresh').on('paginate-refresh',function(){\r\n\tvar basePath = location.pathname.replace(/(\\d+)$/,''),\r\n\t\t$pagination = $('.pagination'),\r\n\t\tpageNumber = parseInt($pagination.first().children('li').children('strong').text(), 10),\r\n\t\ttitle = 'Navigation';\r\n\t$pagination.on('click','a',function(e){\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\r\n\t\t$('#ctxmenu').hide();\r\n\r\n\t\t$.toPage(this.pathname);\r\n\t});\r\n\t$w.on('nav-popstate',function(e, state){\r\n\t\t$.toPage.call({state:state},location.pathname, true);\r\n\t});\r\n\t$.toPage = function(target, silentfail, bypass){\r\n\t\tif (!target) target = window.location.pathname;\r\n\t\tvar newPageNumber = parseInt(target.substring(basePath.length), 10),\r\n\t\t\tstate = this.state || {};\r\n\r\n\t\tif (!bypass && (pageNumber === newPageNumber || pageNumber === state.page))\r\n\t\t\treturn silentfail ? false : $.Dialog.info(title, 'You are already on page '+pageNumber);\r\n\r\n\t\tif (location.search.length > 1)\r\n\t\t\ttarget += location.search;\r\n\r\n\t\t$.Dialog.wait(title, 'Loading page '+newPageNumber);\r\n\r\n\t\t$.get(target, {js: true}, $.mkAjaxHandler(function(){\r\n\t\t\tif (!this.status) return $.Dialog.fail(title, this.message);\r\n\r\n\t\t\tnewPageNumber = parseInt(this.page, 10);\r\n\r\n\t\t\t$('nav').find('li.active').children().last().html(function(){\r\n\t\t\t\treturn this.innerHTML.replace(/Page \\d+/,'Page '+newPageNumber);\r\n\t\t\t});\r\n\r\n\t\t\t// Preserve static page title component at the end\r\n\t\t\tdocument.title = document.title.replace(/^.*( - [^-]+)$/,this.title+'$1');\r\n\r\n\t\t\tif (state.page !== newPageNumber && !isNaN(newPageNumber))\r\n\t\t\t\thistory.pushState({paginate:true, page:newPageNumber},'',basePath+newPageNumber+(window.location.search.length > 1 ? location.search : ''));\r\n\r\n\t\t\tvar max = this.maxpage;\r\n\t\t\t$pagination.each(function(){\r\n\t\t\t\tvar $ul = $(this),\r\n\t\t\t\t\t$childs = $ul.children();\r\n\r\n\t\t\t\tif ($childs.length !== max){\r\n\t\t\t\t\t$ul.empty();\r\n\t\t\t\t\tfor (var i = 1; i <= max; i++)\r\n\t\t\t\t\t\t$ul.append('<li><a href=\"'+basePath+i+'\">'+i+'</a></li>');\r\n\t\t\t\t\t$childs = $ul.children();\r\n\t\t\t\t}\r\n\t\t\t\telse $childs.eq(pageNumber-1).html('<a href=\"'+basePath+pageNumber+'\">'+pageNumber+'</a>');\r\n\t\t\t\t$childs.eq(newPageNumber-1).html('<strong>'+newPageNumber+'</strong>');\r\n\t\t\t});\r\n\r\n\t\t\tvar event = jQuery.Event('page-switch');\r\n\t\t\t$(this.update).html(this.output).trigger(event);\r\n\t\t\twindow.updateTimesF();\r\n\t\t\tpageNumber = newPageNumber;\r\n\r\n\t\t\tif (!event.isDefaultPrevented()) $.Dialog.close();\r\n\t\t}));\r\n\t};\r\n});\r\n"],"sourceRoot":"/source/"}