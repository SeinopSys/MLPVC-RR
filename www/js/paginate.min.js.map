{"version":3,"sources":["paginate.js"],"names":["window","pageRegex","basePath","location","pathname","replace","$pagination","$","pageNumber","parseInt","first","children","text","title","$PaginationForm","mk","attr","on","e","preventDefault","page","this","find","val","isNaN","toPage","Math","max","append","type","min","step","$d","stopPropagation","hide","Dialog","request","clone","$form","get","select","$w","state","call","target","silentfail","bypass","newPageNumber","info","data","js","params","extraQuery","query","concat","split","search","length","substring","each","_","el","decodeURIComponent","wait","mkAjaxHandler","status","fail","message","$active","$navbar","last","test","html","innerHTML","document","newURI","request_uri","history","pushState","paginate","pagination","event","jQuery","Event","update","output","trigger","updateTimes","isDefaultPrevented","close"],"mappings":"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","file":"paginate.min.js","sourcesContent":["(function Paginate(){\r\n\tif (window[\" paginationHandlerBound\"] === true) return;\r\n\twindow[\" paginationHandlerBound\"] = true;\r\n\r\n\tvar pageRegex = /Page \\d+/g,\r\n\t\tbasePath = location.pathname.replace(/\\/\\d+$/,'')+'/',\r\n\t\t$pagination = $('.pagination'),\r\n\t\tpageNumber = parseInt($pagination.first().children('li').children('strong').text(), 10),\r\n\t\ttitle = 'Navigation',\r\n\t\t$PaginationForm = $.mk('form').attr('id','goto-page').on('submit',function(e){\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tvar page = parseInt($(this).find('input:visible').val(), 10);\r\n\t\t\tif (isNaN(page))\r\n\t\t\t\tpage = 1;\r\n\r\n\t\t\t$.toPage(basePath+Math.max(1, page));\r\n\t\t}).append(\r\n\t\t\t$.mk('label').append(\r\n\t\t\t\t$.mk('span').text('Enter page number'),\r\n\t\t\t\t$.mk('input').attr({\r\n\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\tmin: 1,\r\n\t\t\t\t\tstep: 1,\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t);\r\n\r\n\t$d.on('paginate-refresh',function(){\r\n\t\tbasePath = location.pathname.replace(/\\/\\d+$/,'')+'/';\r\n\t\t$pagination = $('.pagination');\r\n\t\tpageNumber = parseInt($pagination.first().children('li').children('strong').text(), 10);\r\n\t\ttitle = 'Navigation';\r\n\r\n\t\t$pagination.on('click','a',function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t$('#ctxmenu').hide();\r\n\r\n\t\t\tif (typeof $(this).attr('href') === 'undefined')\r\n\t\t\t\treturn $.Dialog.request('Navigation',$PaginationForm.clone(true,true),'goto-page','Go to page',function($form){\r\n\t\t\t\t\t$form.find('input:visible').val(pageNumber).get(0).select()\r\n\t\t\t\t});\r\n\r\n\t\t\t$.toPage(this.pathname);\r\n\t\t});\r\n\t\t$w.on('nav-popstate',function(e, state){\r\n\t\t\t$.toPage.call({state:state},location.pathname, true);\r\n\t\t});\r\n\t\t$.toPage = function(target, silentfail, bypass){\r\n\t\t\tif (!target) target = window.location.pathname;\r\n\t\t\tvar newPageNumber = parseInt(target.replace(/^.*\\/(\\d+)(?:$|\\?)/,'$1'), 10),\r\n\t\t\t\tstate = this.state || {};\r\n\r\n\t\t\tif (!bypass && (pageNumber === newPageNumber || pageNumber === state.page))\r\n\t\t\t\treturn silentfail ? false : $.Dialog.info(title, 'You are already on page '+pageNumber);\r\n\r\n\t\t\tvar data = { js: true},\r\n\t\t\t\tparams = [],\r\n\t\t\t\textraQuery = this.query;\r\n\t\t\tif (typeof extraQuery !== 'undefined'){\r\n\t\t\t\tif (typeof extraQuery === 'string')\r\n\t\t\t\t\tparams = params.concat(extraQuery.split('&'));\r\n\t\t\t\textraQuery = true;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\textraQuery = false;\r\n\t\t\t\tif (location.search.length > 1)\r\n\t\t\t\t\tparams = params.concat(location.search.substring(1).split('&'));\r\n\t\t\t}\r\n\r\n\t\t\tif (params.length) $.each(params,function(_,el){\r\n\t\t\t\tel = el.replace(/\\+/g,' ').split('=');\r\n\t\t\t\tdata[decodeURIComponent(el[0])] = decodeURIComponent(el[1]);\r\n\t\t\t});\r\n\r\n\t\t\t$.Dialog.wait(title, 'Loading page '+newPageNumber);\r\n\r\n\t\t\t$.get(target, data, $.mkAjaxHandler(function(){\r\n\t\t\t\tif (!this.status) return $.Dialog.fail(title, this.message);\r\n\r\n\t\t\t\tnewPageNumber = parseInt(this.page, 10);\r\n\r\n\t\t\t\tvar $active = $navbar.find('li.active').children().last();\r\n\t\t\t\tif (pageRegex.test($active.text()))\r\n\t\t\t\t\t$active.html(function(){\r\n\t\t\t\t\t\treturn this.innerHTML.replace(pageRegex,'Page '+newPageNumber);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t// Preserve static page title component at the end\r\n\t\t\t\tdocument.title = document.title.replace(pageRegex, 'Page '+newPageNumber);\r\n\r\n\t\t\t\tvar newURI = this.request_uri || (basePath+newPageNumber+(window.location.search.length > 1 ? location.search : ''));\r\n\r\n\t\t\t\tif ((state.page !== newPageNumber && !isNaN(newPageNumber)) || extraQuery)\r\n\t\t\t\t\thistory.pushState({paginate:true, page:newPageNumber},'',newURI);\r\n\r\n\t\t\t\t$pagination.html(this.pagination);\r\n\r\n\t\t\t\tvar event = jQuery.Event('page-switch');\r\n\t\t\t\t$(this.update).html(this.output).trigger(event);\r\n\t\t\t\twindow.updateTimes();\r\n\t\t\t\tpageNumber = newPageNumber;\r\n\r\n\t\t\t\tif (!event.isDefaultPrevented()) $.Dialog.close();\r\n\t\t\t}));\r\n\t\t};\r\n\t});\r\n})();\r\n"],"sourceRoot":"/source/"}