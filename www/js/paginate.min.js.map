{"version":3,"sources":["paginate.js"],"names":["$","$title","document","head","children","basePath","location","pathname","replace","$pagination","pageNumber","parseInt","first","text","title","on","e","preventDefault","toPage","this","window","target","silentfail","bypass","newPageNumber","substring","length","search","Dialog","wait","get","js","mkAjaxHandler","status","fail","message","page","find","last","html","innerHTML","history","pushState","max","maxpage","each","$ul","$childs","empty","i","append","eq","event","jQuery","Event","update","output","trigger","updateTimesF","isDefaultPrevented","close","info"],"mappings":"AAAAA,EAAE,WACD,GAAIC,GAASD,EAAEE,SAASC,MAAMC,SAAS,SACtCC,EAAWC,SAASC,SAASC,QAAQ,SAAS,IAC9CC,EAAcT,EAAE,eAChBU,EAAaC,SAASF,EAAYG,QAAQR,SAAS,MAAMA,SAAS,UAAUS,OAAQ,IACpFC,EAAQ,YACTL,GAAYM,GAAG,QAAQ,IAAI,SAASC,GACnCA,EAAEC,iBAEFjB,EAAEkB,OAAOC,KAAKZ,YAEfP,EAAEoB,QAAQL,GAAG,WAAW,WACvBf,EAAEkB,OAAOZ,SAASC,UAAU,KAE7BP,EAAEkB,OAAS,SAASG,EAAQC,EAAYC,GAClCF,IAAQA,EAASD,OAAOd,SAASC,SACtC,IAAIiB,GAAgBb,SAASU,EAAOI,UAAUpB,EAASqB,QAAS,GAEhE,OAAKH,IAAUb,IAAec,GAG1BlB,SAASqB,OAAOD,OAAS,IAC5BL,GAAUf,SAASqB,QAEpB3B,EAAE4B,OAAOC,KAAKf,EAAO,gBAAgBU,OAErCxB,GAAE8B,IAAIT,GAASU,IAAI,GAAO/B,EAAEgC,cAAc,WACzC,IAAKb,KAAKc,OAAQ,MAAOjC,GAAE4B,OAAOM,KAAKpB,EAAOK,KAAKgB,QAEnDX,GAAgBb,SAASQ,KAAKiB,KAAM,IAEpCpC,EAAE,OAAOqC,KAAK,aAAajC,WAAWkC,OAAOC,KAAK,WACjD,MAAOpB,MAAKqB,UAAUhC,QAAQ,WAAW,QAAQgB,KAIlDvB,EAAOY,KAAKZ,EAAOY,OAAOL,QAAQ,iBAAiBW,KAAKL,MAAM,OAE9D2B,QAAQC,aAAa,GAAGrC,EAASmB,GAAeJ,OAAOd,SAASqB,OAAOD,OAAS,EAAIpB,SAASqB,OAAS,IAEtG,IAAIgB,GAAMxB,KAAKyB,OACfnC,GAAYoC,KAAK,WAChB,GAAIC,GAAM9C,EAAEmB,MACX4B,EAAUD,EAAI1C,UAEf,IAAI2C,EAAQrB,SAAWiB,EAAI,CAC1BG,EAAIE,OACJ,KAAK,GAAIC,GAAI,EAAQN,GAALM,EAAUA,IACzBH,EAAII,OAAO,gBAAgB7C,EAAS4C,EAAE,KAAKA,EAAE,YAC9CF,GAAUD,EAAI1C,eAEV2C,GAAQI,GAAGzC,EAAW,GAAG6B,KAAK,YAAYlC,EAASK,EAAW,KAAKA,EAAW,OACnFqC,GAAQI,GAAG3B,EAAc,GAAGe,KAAK,WAAWf,EAAc,cAG3D,IAAI4B,GAAQC,OAAOC,MAAM,cACzBtD,GAAEmB,KAAKoC,QAAQhB,KAAKpB,KAAKqC,QAAQC,QAAQL,GACzChC,OAAOsC,eACPhD,EAAac,EAER4B,EAAMO,sBAAsB3D,EAAE4B,OAAOgC,YAzCnCtC,GAAa,EAAQtB,EAAE4B,OAAOiC,KAAK/C,EAAO,2BAA2BJ","file":"paginate.min.js","sourcesContent":["$(function(){\r\n\tvar $title = $(document.head).children('title'),\r\n\t\tbasePath = location.pathname.replace(/(\\d+)$/,''),\r\n\t\t$pagination = $('.pagination'),\r\n\t\tpageNumber = parseInt($pagination.first().children('li').children('strong').text(), 10),\r\n\t\ttitle = 'Navigation';\r\n\t$pagination.on('click','a',function(e){\r\n\t\te.preventDefault();\r\n\r\n\t\t$.toPage(this.pathname);\r\n\t});\r\n\t$(window).on('popstate',function(){\r\n\t\t$.toPage(location.pathname, true);\r\n\t});\r\n\t$.toPage = function(target, silentfail, bypass){\r\n\t\tif (!target) target = window.location.pathname;\r\n\t\tvar newPageNumber = parseInt(target.substring(basePath.length), 10);\r\n\r\n\t\tif (!bypass && pageNumber === newPageNumber)\r\n\t\t\treturn silentfail ? false : $.Dialog.info(title, 'You are already on page '+pageNumber);\r\n\r\n\t\tif (location.search.length > 1)\r\n\t\t\ttarget += location.search;\r\n\r\n\t\t$.Dialog.wait(title, 'Loading page '+newPageNumber);\r\n\r\n\t\t$.get(target, {js: true}, $.mkAjaxHandler(function(){\r\n\t\t\tif (!this.status) return $.Dialog.fail(title, this.message);\r\n\r\n\t\t\tnewPageNumber = parseInt(this.page, 10);\r\n\r\n\t\t\t$('nav').find('li.active').children().last().html(function(){\r\n\t\t\t\treturn this.innerHTML.replace(/Page \\d+/,'Page '+newPageNumber);\r\n\t\t\t});\r\n\r\n\t\t\t// Preserve static page title component at the end\r\n\t\t\t$title.text($title.text().replace(/^.*( - [^-]+)$/,this.title+'$1'));\r\n\r\n\t\t\thistory.pushState({},'',basePath+newPageNumber+(window.location.search.length > 1 ? location.search : ''));\r\n\r\n\t\t\tvar max = this.maxpage;\r\n\t\t\t$pagination.each(function(){\r\n\t\t\t\tvar $ul = $(this),\r\n\t\t\t\t\t$childs = $ul.children();\r\n\r\n\t\t\t\tif ($childs.length !== max){\r\n\t\t\t\t\t$ul.empty();\r\n\t\t\t\t\tfor (var i = 1; i <= max; i++)\r\n\t\t\t\t\t\t$ul.append('<li><a href=\"'+basePath+i+'\">'+i+'</a></li>');\r\n\t\t\t\t\t$childs = $ul.children();\r\n\t\t\t\t}\r\n\t\t\t\telse $childs.eq(pageNumber-1).html('<a href=\"'+basePath+pageNumber+'\">'+pageNumber+'</a>');\r\n\t\t\t\t$childs.eq(newPageNumber-1).html('<strong>'+newPageNumber+'</strong>');\r\n\t\t\t});\r\n\r\n\t\t\tvar event = jQuery.Event('page-switch');\r\n\t\t\t$(this.update).html(this.output).trigger(event);\r\n\t\t\twindow.updateTimesF();\r\n\t\t\tpageNumber = newPageNumber;\r\n\r\n\t\t\tif (!event.isDefaultPrevented()) $.Dialog.close();\r\n\t\t}));\r\n\t};\r\n});\r\n"],"sourceRoot":"/source/"}