{"version":3,"sources":["paginate.js"],"names":["window","pageRegex","basePath","location","pathname","replace","$pagination","$","pageNumber","parseInt","first","children","text","title","$PaginationForm","mk","attr","on","e","preventDefault","page","this","find","val","isNaN","toPage","Math","max","append","type","min","step","$d","stopPropagation","hide","Dialog","request","clone","$form","get","select","$w","state","call","target","silentfail","bypass","newPageNumber","search","length","wait","js","mkAjaxHandler","status","fail","message","$active","$navbar","last","test","html","innerHTML","document","history","pushState","paginate","pagination","event","jQuery","Event","update","output","trigger","updateTimes","isDefaultPrevented","close","info"],"mappings":"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","file":"paginate.min.js","sourcesContent":["(function Paginate(){\r\n\tif (window[\" paginationHandlerBound\"] === true) return;\r\n\twindow[\" paginationHandlerBound\"] = true;\r\n\r\n\tvar pageRegex = /Page \\d+/g,\r\n\t\tbasePath = location.pathname.replace(/\\/\\d+$/,'')+'/',\r\n\t\t$pagination = $('.pagination'),\r\n\t\tpageNumber = parseInt($pagination.first().children('li').children('strong').text(), 10),\r\n\t\ttitle = 'Navigation',\r\n\t\t$PaginationForm = $.mk('form').attr('id','goto-page').on('submit',function(e){\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tvar page = parseInt($(this).find('input:visible').val(), 10);\r\n\t\t\tif (isNaN(page))\r\n\t\t\t\tpage = 1;\r\n\r\n\t\t\t$.toPage(basePath+Math.max(1, page));\r\n\t\t}).append(\r\n\t\t\t$.mk('label').append(\r\n\t\t\t\t$.mk('span').text('Enter page number'),\r\n\t\t\t\t$.mk('input').attr({\r\n\t\t\t\t\ttype: 'number',\r\n\t\t\t\t\tmin: 1,\r\n\t\t\t\t\tstep: 1,\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t);\r\n\r\n\t$d.on('paginate-refresh',function(){\r\n\t\tbasePath = location.pathname.replace(/\\/\\d+$/,'')+'/';\r\n\t\t$pagination = $('.pagination');\r\n\t\tpageNumber = parseInt($pagination.first().children('li').children('strong').text(), 10);\r\n\t\ttitle = 'Navigation';\r\n\r\n\t\t$pagination.on('click','a',function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t$('#ctxmenu').hide();\r\n\r\n\t\t\tif (typeof $(this).attr('href') === 'undefined')\r\n\t\t\t\treturn $.Dialog.request('Navigation',$PaginationForm.clone(true,true),'goto-page','Go to page',function($form){\r\n\t\t\t\t\t$form.find('input:visible').val(pageNumber).get(0).select()\r\n\t\t\t\t});\r\n\r\n\t\t\t$.toPage(this.pathname);\r\n\t\t});\r\n\t\t$w.on('nav-popstate',function(e, state){\r\n\t\t\t$.toPage.call({state:state},location.pathname, true);\r\n\t\t});\r\n\t\t$.toPage = function(target, silentfail, bypass){\r\n\t\t\tif (!target) target = window.location.pathname;\r\n\t\t\tvar newPageNumber = parseInt(target.replace(/^.*\\/(\\d+)$/,'$1'), 10),\r\n\t\t\t\tstate = this.state || {};\r\n\r\n\t\t\tif (!bypass && (pageNumber === newPageNumber || pageNumber === state.page))\r\n\t\t\t\treturn silentfail ? false : $.Dialog.info(title, 'You are already on page '+pageNumber);\r\n\r\n\t\t\tif (location.search.length > 1)\r\n\t\t\t\ttarget += location.search;\r\n\r\n\t\t\t$.Dialog.wait(title, 'Loading page '+newPageNumber);\r\n\r\n\t\t\t$.get(target, {js: true}, $.mkAjaxHandler(function(){\r\n\t\t\t\tif (!this.status) return $.Dialog.fail(title, this.message);\r\n\r\n\t\t\t\tnewPageNumber = parseInt(this.page, 10);\r\n\r\n\t\t\t\tvar $active = $navbar.find('li.active').children().last();\r\n\t\t\t\tif (pageRegex.test($active.text()))\r\n\t\t\t\t\t$active.html(function(){\r\n\t\t\t\t\t\treturn this.innerHTML.replace(pageRegex,'Page '+newPageNumber);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t// Preserve static page title component at the end\r\n\t\t\t\tdocument.title = document.title.replace(pageRegex, 'Page '+newPageNumber);\r\n\r\n\t\t\t\tif (state.page !== newPageNumber && !isNaN(newPageNumber))\r\n\t\t\t\t\thistory.pushState({paginate:true, page:newPageNumber},'',basePath+newPageNumber+(window.location.search.length > 1 ? location.search : ''));\r\n\r\n\t\t\t\t$pagination.html(this.pagination);\r\n\r\n\t\t\t\tvar event = jQuery.Event('page-switch');\r\n\t\t\t\t$(this.update).html(this.output).trigger(event);\r\n\t\t\t\twindow.updateTimes();\r\n\t\t\t\tpageNumber = newPageNumber;\r\n\r\n\t\t\t\tif (!event.isDefaultPrevented()) $.Dialog.close();\r\n\t\t\t}));\r\n\t\t};\r\n\t});\r\n})();\r\n"],"sourceRoot":"/source/"}