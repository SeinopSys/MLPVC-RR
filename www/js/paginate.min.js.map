{"version":3,"sources":["paginate.js"],"names":["$document","off","on","$title","$head","children","basePath","location","pathname","replace","$pagination","$","pageNumber","parseInt","first","text","title","e","preventDefault","stopPropagation","hide","toPage","this","$w","state","call","target","silentfail","bypass","window","newPageNumber","substring","length","page","search","Dialog","wait","get","js","mkAjaxHandler","status","fail","message","find","last","html","innerHTML","isNaN","history","pushState","paginate","max","maxpage","each","$ul","$childs","empty","i","append","eq","event","jQuery","Event","update","output","trigger","updateTimesF","isDefaultPrevented","close","info"],"mappings":"AAAAA,UAAUC,IAAI,oBAAoBC,GAAG,mBAAmB,WACvD,GAAIC,GAASC,MAAMC,SAAS,SAC3BC,EAAWC,SAASC,SAASC,QAAQ,SAAS,IAC9CC,EAAcC,EAAE,eAChBC,EAAaC,SAASH,EAAYI,QAAQT,SAAS,MAAMA,SAAS,UAAUU,OAAQ,IACpFC,EAAQ,YACTN,GAAYR,GAAG,QAAQ,IAAI,SAASe,GACnCA,EAAEC,iBACFD,EAAEE,kBAEFR,EAAE,YAAYS,OAEdT,EAAEU,OAAOC,KAAKd,YAEfe,GAAGrB,GAAG,eAAe,SAASe,EAAGO,GAChCb,EAAEU,OAAOI,MAAMD,MAAMA,GAAOjB,SAASC,UAAU,KAEhDG,EAAEU,OAAS,SAASK,EAAQC,EAAYC,GAClCF,IAAQA,EAASG,OAAOtB,SAASC,SACtC,IAAIsB,GAAgBjB,SAASa,EAAOK,UAAUzB,EAAS0B,QAAS,IAC/DR,EAAQF,KAAKE,SAEd,OAAKI,IAAWhB,IAAekB,GAAiBlB,IAAeY,EAAMS,MAGjE1B,SAAS2B,OAAOF,OAAS,IAC5BN,GAAUnB,SAAS2B,QAEpBvB,EAAEwB,OAAOC,KAAKpB,EAAO,gBAAgBc,OAErCnB,GAAE0B,IAAIX,GAASY,IAAI,GAAO3B,EAAE4B,cAAc,WACzC,IAAKjB,KAAKkB,OAAQ,MAAO7B,GAAEwB,OAAOM,KAAKzB,EAAOM,KAAKoB,QAEnDZ,GAAgBjB,SAASS,KAAKW,KAAM,IAEpCtB,EAAE,OAAOgC,KAAK,aAAatC,WAAWuC,OAAOC,KAAK,WACjD,MAAOvB,MAAKwB,UAAUrC,QAAQ,WAAW,QAAQqB,KAIlD3B,EAAOY,KAAKZ,EAAOY,OAAON,QAAQ,iBAAiBa,KAAKN,MAAM,OAE1DQ,EAAMS,OAASH,GAAkBiB,MAAMjB,IAC1CkB,QAAQC,WAAWC,UAAS,EAAMjB,KAAKH,GAAe,GAAGxB,EAASwB,GAAeD,OAAOtB,SAAS2B,OAAOF,OAAS,EAAIzB,SAAS2B,OAAS,IAExI,IAAIiB,GAAM7B,KAAK8B,OACf1C,GAAY2C,KAAK,WAChB,GAAIC,GAAM3C,EAAEW,MACXiC,EAAUD,EAAIjD,UAEf,IAAIkD,EAAQvB,SAAWmB,EAAI,CAC1BG,EAAIE,OACJ,KAAK,GAAIC,GAAI,EAAQN,GAALM,EAAUA,IACzBH,EAAII,OAAO,gBAAgBpD,EAASmD,EAAE,KAAKA,EAAE,YAC9CF,GAAUD,EAAIjD,eAEVkD,GAAQI,GAAG/C,EAAW,GAAGiC,KAAK,YAAYvC,EAASM,EAAW,KAAKA,EAAW,OACnF2C,GAAQI,GAAG7B,EAAc,GAAGe,KAAK,WAAWf,EAAc,cAG3D,IAAI8B,GAAQC,OAAOC,MAAM,cACzBnD,GAAEW,KAAKyC,QAAQlB,KAAKvB,KAAK0C,QAAQC,QAAQL,GACzC/B,OAAOqC,eACPtD,EAAakB,EAER8B,EAAMO,sBAAsBxD,EAAEwB,OAAOiC,YA1CnCzC,GAAa,EAAQhB,EAAEwB,OAAOkC,KAAKrD,EAAO,2BAA2BJ","file":"paginate.min.js","sourcesContent":["$document.off('paginate-refresh').on('paginate-refresh',function(){\r\n\tvar $title = $head.children('title'),\r\n\t\tbasePath = location.pathname.replace(/(\\d+)$/,''),\r\n\t\t$pagination = $('.pagination'),\r\n\t\tpageNumber = parseInt($pagination.first().children('li').children('strong').text(), 10),\r\n\t\ttitle = 'Navigation';\r\n\t$pagination.on('click','a',function(e){\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\r\n\t\t$('#ctxmenu').hide();\r\n\r\n\t\t$.toPage(this.pathname);\r\n\t});\r\n\t$w.on('nav-popstate',function(e, state){\r\n\t\t$.toPage.call({state:state},location.pathname, true);\r\n\t});\r\n\t$.toPage = function(target, silentfail, bypass){\r\n\t\tif (!target) target = window.location.pathname;\r\n\t\tvar newPageNumber = parseInt(target.substring(basePath.length), 10),\r\n\t\t\tstate = this.state || {};\r\n\r\n\t\tif (!bypass && (pageNumber === newPageNumber || pageNumber === state.page))\r\n\t\t\treturn silentfail ? false : $.Dialog.info(title, 'You are already on page '+pageNumber);\r\n\r\n\t\tif (location.search.length > 1)\r\n\t\t\ttarget += location.search;\r\n\r\n\t\t$.Dialog.wait(title, 'Loading page '+newPageNumber);\r\n\r\n\t\t$.get(target, {js: true}, $.mkAjaxHandler(function(){\r\n\t\t\tif (!this.status) return $.Dialog.fail(title, this.message);\r\n\r\n\t\t\tnewPageNumber = parseInt(this.page, 10);\r\n\r\n\t\t\t$('nav').find('li.active').children().last().html(function(){\r\n\t\t\t\treturn this.innerHTML.replace(/Page \\d+/,'Page '+newPageNumber);\r\n\t\t\t});\r\n\r\n\t\t\t// Preserve static page title component at the end\r\n\t\t\t$title.text($title.text().replace(/^.*( - [^-]+)$/,this.title+'$1'));\r\n\r\n\t\t\tif (state.page !== newPageNumber && !isNaN(newPageNumber))\r\n\t\t\t\thistory.pushState({paginate:true, page:newPageNumber},'',basePath+newPageNumber+(window.location.search.length > 1 ? location.search : ''));\r\n\r\n\t\t\tvar max = this.maxpage;\r\n\t\t\t$pagination.each(function(){\r\n\t\t\t\tvar $ul = $(this),\r\n\t\t\t\t\t$childs = $ul.children();\r\n\r\n\t\t\t\tif ($childs.length !== max){\r\n\t\t\t\t\t$ul.empty();\r\n\t\t\t\t\tfor (var i = 1; i <= max; i++)\r\n\t\t\t\t\t\t$ul.append('<li><a href=\"'+basePath+i+'\">'+i+'</a></li>');\r\n\t\t\t\t\t$childs = $ul.children();\r\n\t\t\t\t}\r\n\t\t\t\telse $childs.eq(pageNumber-1).html('<a href=\"'+basePath+pageNumber+'\">'+pageNumber+'</a>');\r\n\t\t\t\t$childs.eq(newPageNumber-1).html('<strong>'+newPageNumber+'</strong>');\r\n\t\t\t});\r\n\r\n\t\t\tvar event = jQuery.Event('page-switch');\r\n\t\t\t$(this.update).html(this.output).trigger(event);\r\n\t\t\twindow.updateTimesF();\r\n\t\t\tpageNumber = newPageNumber;\r\n\r\n\t\t\tif (!event.isDefaultPrevented()) $.Dialog.close();\r\n\t\t}));\r\n\t};\r\n});\r\n"],"sourceRoot":"/source/"}