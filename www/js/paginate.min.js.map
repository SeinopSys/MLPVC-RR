{"version":3,"sources":["paginate.js"],"names":["window","$d","on","basePath","location","pathname","replace","$pagination","$","pageNumber","parseInt","first","children","text","title","e","preventDefault","stopPropagation","hide","toPage","this","$w","state","call","target","silentfail","bypass","newPageNumber","substring","length","page","search","Dialog","wait","get","js","mkAjaxHandler","status","fail","message","find","last","html","innerHTML","document","isNaN","history","pushState","paginate","max","maxpage","each","$ul","$childs","empty","i","append","eq","event","jQuery","Event","update","output","trigger","updateTimes","isDefaultPrevented","close","info"],"mappings":"CAAA,WACKA,OAAO,8BAA+B,IAC1CA,OAAO,4BAA6B,EAEpCC,GAAGC,GAAG,mBAAmB,WACxB,GAAIC,GAAWC,SAASC,SAASC,QAAQ,SAAS,IACjDC,EAAcC,EAAE,eAChBC,EAAaC,SAASH,EAAYI,QAAQC,SAAS,MAAMA,SAAS,UAAUC,OAAQ,IACpFC,EAAQ,YACTP,GAAYL,GAAG,QAAQ,IAAI,SAASa,GACnCA,EAAEC,iBACFD,EAAEE,kBAEFT,EAAE,YAAYU,OAEdV,EAAEW,OAAOC,KAAKf,YAEfgB,GAAGnB,GAAG,eAAe,SAASa,EAAGO,GAChCd,EAAEW,OAAOI,MAAMD,MAAMA,GAAOlB,SAASC,UAAU,KAEhDG,EAAEW,OAAS,SAASK,EAAQC,EAAYC,GAClCF,IAAQA,EAASxB,OAAOI,SAASC,SACtC,IAAIsB,GAAgBjB,SAASc,EAAOI,UAAUzB,EAAS0B,QAAS,IAC/DP,EAAQF,KAAKE,SAEd,OAAKI,IAAWjB,IAAekB,GAAiBlB,IAAea,EAAMQ,MAGjE1B,SAAS2B,OAAOF,OAAS,IAC5BL,GAAUpB,SAAS2B,QAEpBvB,EAAEwB,OAAOC,KAAKnB,EAAO,gBAAgBa,OAErCnB,GAAE0B,IAAIV,GAASW,IAAI,GAAO3B,EAAE4B,cAAc,WACzC,IAAKhB,KAAKiB,OAAQ,MAAO7B,GAAEwB,OAAOM,KAAKxB,EAAOM,KAAKmB,QAEnDZ,GAAgBjB,SAASU,KAAKU,KAAM,IAEpCtB,EAAE,OAAOgC,KAAK,aAAa5B,WAAW6B,OAAOC,KAAK,WACjD,MAAOtB,MAAKuB,UAAUrC,QAAQ,WAAW,QAAQqB,KAIlDiB,SAAS9B,MAAQ8B,SAAS9B,MAAMR,QAAQ,iBAAiBc,KAAKN,MAAM,MAEhEQ,EAAMQ,OAASH,GAAkBkB,MAAMlB,IAC1CmB,QAAQC,WAAWC,UAAS,EAAMlB,KAAKH,GAAe,GAAGxB,EAASwB,GAAe3B,OAAOI,SAAS2B,OAAOF,OAAS,EAAIzB,SAAS2B,OAAS,IAExI,IAAIkB,GAAM7B,KAAK8B,OACf3C,GAAY4C,KAAK,WAChB,GAAIC,GAAM5C,EAAEY,MACXiC,EAAUD,EAAIxC,UAEf,IAAIyC,EAAQxB,SAAWoB,EAAI,CAC1BG,EAAIE,OACJ,KAAK,GAAIC,GAAI,EAAQN,GAALM,EAAUA,IACzBH,EAAII,OAAO,gBAAgBrD,EAASoD,EAAE,KAAKA,EAAE,YAC9CF,GAAUD,EAAIxC,eAEVyC,GAAQI,GAAGhD,EAAW,GAAGiC,KAAK,YAAYvC,EAASM,EAAW,KAAKA,EAAW,OACnF4C,GAAQI,GAAG9B,EAAc,GAAGe,KAAK,WAAWf,EAAc,cAG3D,IAAI+B,GAAQC,OAAOC,MAAM,cACzBpD,GAAEY,KAAKyC,QAAQnB,KAAKtB,KAAK0C,QAAQC,QAAQL,GACzC1D,OAAOgE,cACPvD,EAAakB,EAER+B,EAAMO,sBAAsBzD,EAAEwB,OAAOkC,YA1CnCzC,GAAa,EAAQjB,EAAEwB,OAAOmC,KAAKrD,EAAO,2BAA2BL","file":"paginate.min.js","sourcesContent":["(function Paginate(){\r\n\tif (window[\" paginationHandlerBound\"] === true) return;\r\n\twindow[\" paginationHandlerBound\"] = true;\r\n\r\n\t$d.on('paginate-refresh',function(){\r\n\t\tvar basePath = location.pathname.replace(/(\\d+)$/,''),\r\n\t\t\t$pagination = $('.pagination'),\r\n\t\t\tpageNumber = parseInt($pagination.first().children('li').children('strong').text(), 10),\r\n\t\t\ttitle = 'Navigation';\r\n\t\t$pagination.on('click','a',function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t$('#ctxmenu').hide();\r\n\r\n\t\t\t$.toPage(this.pathname);\r\n\t\t});\r\n\t\t$w.on('nav-popstate',function(e, state){\r\n\t\t\t$.toPage.call({state:state},location.pathname, true);\r\n\t\t});\r\n\t\t$.toPage = function(target, silentfail, bypass){\r\n\t\t\tif (!target) target = window.location.pathname;\r\n\t\t\tvar newPageNumber = parseInt(target.substring(basePath.length), 10),\r\n\t\t\t\tstate = this.state || {};\r\n\r\n\t\t\tif (!bypass && (pageNumber === newPageNumber || pageNumber === state.page))\r\n\t\t\t\treturn silentfail ? false : $.Dialog.info(title, 'You are already on page '+pageNumber);\r\n\r\n\t\t\tif (location.search.length > 1)\r\n\t\t\t\ttarget += location.search;\r\n\r\n\t\t\t$.Dialog.wait(title, 'Loading page '+newPageNumber);\r\n\r\n\t\t\t$.get(target, {js: true}, $.mkAjaxHandler(function(){\r\n\t\t\t\tif (!this.status) return $.Dialog.fail(title, this.message);\r\n\r\n\t\t\t\tnewPageNumber = parseInt(this.page, 10);\r\n\r\n\t\t\t\t$('nav').find('li.active').children().last().html(function(){\r\n\t\t\t\t\treturn this.innerHTML.replace(/Page \\d+/,'Page '+newPageNumber);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Preserve static page title component at the end\r\n\t\t\t\tdocument.title = document.title.replace(/^.*( - [^-]+)$/,this.title+'$1');\r\n\r\n\t\t\t\tif (state.page !== newPageNumber && !isNaN(newPageNumber))\r\n\t\t\t\t\thistory.pushState({paginate:true, page:newPageNumber},'',basePath+newPageNumber+(window.location.search.length > 1 ? location.search : ''));\r\n\r\n\t\t\t\tvar max = this.maxpage;\r\n\t\t\t\t$pagination.each(function(){\r\n\t\t\t\t\tvar $ul = $(this),\r\n\t\t\t\t\t\t$childs = $ul.children();\r\n\r\n\t\t\t\t\tif ($childs.length !== max){\r\n\t\t\t\t\t\t$ul.empty();\r\n\t\t\t\t\t\tfor (var i = 1; i <= max; i++)\r\n\t\t\t\t\t\t\t$ul.append('<li><a href=\"'+basePath+i+'\">'+i+'</a></li>');\r\n\t\t\t\t\t\t$childs = $ul.children();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse $childs.eq(pageNumber-1).html('<a href=\"'+basePath+pageNumber+'\">'+pageNumber+'</a>');\r\n\t\t\t\t\t$childs.eq(newPageNumber-1).html('<strong>'+newPageNumber+'</strong>');\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar event = jQuery.Event('page-switch');\r\n\t\t\t\t$(this.update).html(this.output).trigger(event);\r\n\t\t\t\twindow.updateTimes();\r\n\t\t\t\tpageNumber = newPageNumber;\r\n\r\n\t\t\t\tif (!event.isDefaultPrevented()) $.Dialog.close();\r\n\t\t\t}));\r\n\t\t};\r\n\t});\r\n})();\r\n"],"sourceRoot":"/source/"}