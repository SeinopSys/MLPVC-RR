{"version":3,"sources":["paginate.js"],"names":["window","pageRegex","$d","on","basePath","location","pathname","replace","$pagination","$","pageNumber","parseInt","first","children","text","title","e","preventDefault","stopPropagation","hide","toPage","this","$w","state","call","target","silentfail","bypass","newPageNumber","substring","length","page","search","Dialog","wait","get","js","mkAjaxHandler","status","fail","message","$active","$navbar","find","last","test","html","innerHTML","document","isNaN","history","pushState","paginate","max","maxpage","each","$ul","$childs","empty","i","append","eq","event","jQuery","Event","update","output","trigger","updateTimes","isDefaultPrevented","close","info"],"mappings":"CAAA,WACC,GAAIA,OAAO,8BAA+B,EAA1C,CACAA,OAAO,4BAA6B,CACpC,IAAIC,GAAY,WAEhBC,IAAGC,GAAG,mBAAmB,WACxB,GAAIC,GAAWC,SAASC,SAASC,QAAQ,SAAS,IACjDC,EAAcC,EAAE,eAChBC,EAAaC,SAASH,EAAYI,QAAQC,SAAS,MAAMA,SAAS,UAAUC,OAAQ,IACpFC,EAAQ,YACTP,GAAYL,GAAG,QAAQ,IAAI,SAASa,GACnCA,EAAEC,iBACFD,EAAEE,kBAEFT,EAAE,YAAYU,OAEdV,EAAEW,OAAOC,KAAKf,YAEfgB,GAAGnB,GAAG,eAAe,SAASa,EAAGO,GAChCd,EAAEW,OAAOI,MAAMD,MAAMA,GAAOlB,SAASC,UAAU,KAEhDG,EAAEW,OAAS,SAASK,EAAQC,EAAYC,GAClCF,IAAQA,EAASzB,OAAOK,SAASC,SACtC,IAAIsB,GAAgBjB,SAASc,EAAOI,UAAUzB,EAAS0B,QAAS,IAC/DP,EAAQF,KAAKE,SAEd,OAAKI,IAAWjB,IAAekB,GAAiBlB,IAAea,EAAMQ,MAGjE1B,SAAS2B,OAAOF,OAAS,IAC5BL,GAAUpB,SAAS2B,QAEpBvB,EAAEwB,OAAOC,KAAKnB,EAAO,gBAAgBa,OAErCnB,GAAE0B,IAAIV,GAASW,IAAI,GAAO3B,EAAE4B,cAAc,WACzC,IAAKhB,KAAKiB,OAAQ,MAAO7B,GAAEwB,OAAOM,KAAKxB,EAAOM,KAAKmB,QAEnDZ,GAAgBjB,SAASU,KAAKU,KAAM,GAEpC,IAAIU,GAAUC,QAAQC,KAAK,aAAa9B,WAAW+B,MAC/C3C,GAAU4C,KAAKJ,EAAQ3B,SAC1B2B,EAAQK,KAAK,WACZ,MAAOzB,MAAK0B,UAAUxC,QAAQN,EAAU,QAAQ2B,KAIlDoB,SAASjC,MAAQiC,SAASjC,MAAMR,QAAQ,iBAAiBc,KAAKN,MAAM,MAEhEQ,EAAMQ,OAASH,GAAkBqB,MAAMrB,IAC1CsB,QAAQC,WAAWC,UAAS,EAAMrB,KAAKH,GAAe,GAAGxB,EAASwB,GAAe5B,OAAOK,SAAS2B,OAAOF,OAAS,EAAIzB,SAAS2B,OAAS,IAExI,IAAIqB,GAAMhC,KAAKiC,OACf9C,GAAY+C,KAAK,WAChB,GAAIC,GAAM/C,EAAEY,MACXoC,EAAUD,EAAI3C,UAEf,IAAI4C,EAAQ3B,SAAWuB,EAAI,CAC1BG,EAAIE,OACJ,KAAK,GAAIC,GAAI,EAAQN,GAALM,EAAUA,IACzBH,EAAII,OAAO,gBAAgBxD,EAASuD,EAAE,KAAKA,EAAE,YAC9CF,GAAUD,EAAI3C,eAEV4C,GAAQI,GAAGnD,EAAW,GAAGoC,KAAK,YAAY1C,EAASM,EAAW,KAAKA,EAAW,OACnF+C,GAAQI,GAAGjC,EAAc,GAAGkB,KAAK,WAAWlB,EAAc,cAG3D,IAAIkC,GAAQC,OAAOC,MAAM,cACzBvD,GAAEY,KAAK4C,QAAQnB,KAAKzB,KAAK6C,QAAQC,QAAQL,GACzC9D,OAAOoE,cACP1D,EAAakB,EAERkC,EAAMO,sBAAsB5D,EAAEwB,OAAOqC,YA5CnC5C,GAAa,EAAQjB,EAAEwB,OAAOsC,KAAKxD,EAAO,2BAA2BL","file":"paginate.min.js","sourcesContent":["(function Paginate(){\r\n\tif (window[\" paginationHandlerBound\"] === true) return;\r\n\twindow[\" paginationHandlerBound\"] = true;\r\n\tvar pageRegex = /Page \\d+$/;\r\n\r\n\t$d.on('paginate-refresh',function(){\r\n\t\tvar basePath = location.pathname.replace(/(\\d+)$/,''),\r\n\t\t\t$pagination = $('.pagination'),\r\n\t\t\tpageNumber = parseInt($pagination.first().children('li').children('strong').text(), 10),\r\n\t\t\ttitle = 'Navigation';\r\n\t\t$pagination.on('click','a',function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\t$('#ctxmenu').hide();\r\n\r\n\t\t\t$.toPage(this.pathname);\r\n\t\t});\r\n\t\t$w.on('nav-popstate',function(e, state){\r\n\t\t\t$.toPage.call({state:state},location.pathname, true);\r\n\t\t});\r\n\t\t$.toPage = function(target, silentfail, bypass){\r\n\t\t\tif (!target) target = window.location.pathname;\r\n\t\t\tvar newPageNumber = parseInt(target.substring(basePath.length), 10),\r\n\t\t\t\tstate = this.state || {};\r\n\r\n\t\t\tif (!bypass && (pageNumber === newPageNumber || pageNumber === state.page))\r\n\t\t\t\treturn silentfail ? false : $.Dialog.info(title, 'You are already on page '+pageNumber);\r\n\r\n\t\t\tif (location.search.length > 1)\r\n\t\t\t\ttarget += location.search;\r\n\r\n\t\t\t$.Dialog.wait(title, 'Loading page '+newPageNumber);\r\n\r\n\t\t\t$.get(target, {js: true}, $.mkAjaxHandler(function(){\r\n\t\t\t\tif (!this.status) return $.Dialog.fail(title, this.message);\r\n\r\n\t\t\t\tnewPageNumber = parseInt(this.page, 10);\r\n\r\n\t\t\t\tvar $active = $navbar.find('li.active').children().last();\r\n\t\t\t\tif (pageRegex.test($active.text()))\r\n\t\t\t\t\t$active.html(function(){\r\n\t\t\t\t\t\treturn this.innerHTML.replace(pageRegex,'Page '+newPageNumber);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t// Preserve static page title component at the end\r\n\t\t\t\tdocument.title = document.title.replace(/^.*( - [^-]+)$/,this.title+'$1');\r\n\r\n\t\t\t\tif (state.page !== newPageNumber && !isNaN(newPageNumber))\r\n\t\t\t\t\thistory.pushState({paginate:true, page:newPageNumber},'',basePath+newPageNumber+(window.location.search.length > 1 ? location.search : ''));\r\n\r\n\t\t\t\tvar max = this.maxpage;\r\n\t\t\t\t$pagination.each(function(){\r\n\t\t\t\t\tvar $ul = $(this),\r\n\t\t\t\t\t\t$childs = $ul.children();\r\n\r\n\t\t\t\t\tif ($childs.length !== max){\r\n\t\t\t\t\t\t$ul.empty();\r\n\t\t\t\t\t\tfor (var i = 1; i <= max; i++)\r\n\t\t\t\t\t\t\t$ul.append('<li><a href=\"'+basePath+i+'\">'+i+'</a></li>');\r\n\t\t\t\t\t\t$childs = $ul.children();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse $childs.eq(pageNumber-1).html('<a href=\"'+basePath+pageNumber+'\">'+pageNumber+'</a>');\r\n\t\t\t\t\t$childs.eq(newPageNumber-1).html('<strong>'+newPageNumber+'</strong>');\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar event = jQuery.Event('page-switch');\r\n\t\t\t\t$(this.update).html(this.output).trigger(event);\r\n\t\t\t\twindow.updateTimes();\r\n\t\t\t\tpageNumber = newPageNumber;\r\n\r\n\t\t\t\tif (!event.isDefaultPrevented()) $.Dialog.close();\r\n\t\t\t}));\r\n\t\t};\r\n\t});\r\n})();\r\n"],"sourceRoot":"/source/"}