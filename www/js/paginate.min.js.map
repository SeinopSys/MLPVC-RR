{"version":3,"sources":["paginate.js"],"names":["$","$title","document","head","children","basePath","location","pathname","replace","$pagination","pageNumber","parseInt","first","text","title","on","e","preventDefault","toPage","this","window","target","silentfail","bypass","newPageNumber","substring","length","Dialog","wait","get","js","mkAjaxHandler","status","fail","message","page","updateTimesF","find","last","html","innerHTML","history","pushState","max","maxpage","each","$ul","$childs","empty","i","append","eq","update","output","trigger","close","info"],"mappings":"AAAAA,EAAE,WACD,GAAIC,GAASD,EAAEE,SAASC,MAAMC,SAAS,SACtCC,EAAWC,SAASC,SAASC,QAAQ,SAAS,IAC9CC,EAAcT,EAAE,eAChBU,EAAaC,SAASF,EAAYG,QAAQR,SAAS,MAAMA,SAAS,UAAUS,OAAQ,IACpFC,EAAQ,YACTL,GAAYM,GAAG,QAAQ,IAAI,SAASC,GACnCA,EAAEC,iBAEFjB,EAAEkB,OAAOC,KAAKZ,YAEfP,EAAEoB,QAAQL,GAAG,WAAW,WACvBf,EAAEkB,OAAOZ,SAASC,UAAU,KAE7BP,EAAEkB,OAAS,SAASG,EAAQC,EAAYC,GAClCF,IAAQA,EAASD,OAAOd,SAASC,SACtC,IAAIiB,GAAgBb,SAASU,EAAOI,UAAUpB,EAASqB,QAAS,GAEhE,OAAKH,IAAUb,IAAec,GAG9BxB,EAAE2B,OAAOC,KAAKd,EAAO,gBAAgBU,OAErCxB,GAAE6B,IAAIR,GAASS,IAAI,GAAO9B,EAAE+B,cAAc,WACzC,IAAKZ,KAAKa,OAAQ,MAAOhC,GAAE2B,OAAOM,KAAKnB,EAAOK,KAAKe,QAEnDV,GAAgBb,SAASQ,KAAKgB,KAAM,IAEpCf,OAAOgB,eACPpC,EAAE,OAAOqC,KAAK,aAAajC,WAAWkC,OAAOC,KAAK,WACjD,MAAOpB,MAAKqB,UAAUhC,QAAQ,WAAW,QAAQgB,KAElDvB,EAAOY,KAAKM,KAAKL,OACjB2B,QAAQC,aAAa,GAAGrC,EAASmB,EAEjC,IAAImB,GAAMxB,KAAKyB,OACfnC,GAAYoC,KAAK,WAChB,GAAIC,GAAM9C,EAAEmB,MACX4B,EAAUD,EAAI1C,UAEf,IAAI2C,EAAQrB,SAAWiB,EAAI,CAC1BG,EAAIE,OACJ,KAAK,GAAIC,GAAI,EAAQN,GAALM,EAAUA,IACzBH,EAAII,OAAO,gBAAgB7C,EAAS4C,EAAE,KAAKA,EAAE,YAC9CF,GAAUD,EAAI1C,eAEV2C,GAAQI,GAAGzC,EAAW,GAAG6B,KAAK,YAAYlC,EAASK,EAAW,KAAKA,EAAW,OACnFqC,GAAQI,GAAG3B,EAAc,GAAGe,KAAK,WAAWf,EAAc,eAG3DxB,EAAEmB,KAAKiC,QAAQb,KAAKpB,KAAKkC,QAAQC,QAAQ,eAEzC5C,EAAac,EACbxB,EAAE2B,OAAO4B,YAlCFjC,GAAa,EAAQtB,EAAE2B,OAAO6B,KAAK1C,EAAO,2BAA2BJ","file":"paginate.min.js","sourcesContent":["$(function(){\r\n\tvar $title = $(document.head).children('title'),\r\n\t\tbasePath = location.pathname.replace(/(\\d+)$/,''),\r\n\t\t$pagination = $('.pagination'),\r\n\t\tpageNumber = parseInt($pagination.first().children('li').children('strong').text(), 10),\r\n\t\ttitle = 'Navigation';\r\n\t$pagination.on('click','a',function(e){\r\n\t\te.preventDefault();\r\n\r\n\t\t$.toPage(this.pathname);\r\n\t});\r\n\t$(window).on('popstate',function(){\r\n\t\t$.toPage(location.pathname, true);\r\n\t});\r\n\t$.toPage = function(target, silentfail, bypass){\r\n\t\tif (!target) target = window.location.pathname;\r\n\t\tvar newPageNumber = parseInt(target.substring(basePath.length), 10);\r\n\r\n\t\tif (!bypass && pageNumber === newPageNumber)\r\n\t\t\treturn silentfail ? false : $.Dialog.info(title, 'You are already on page '+pageNumber);\r\n\r\n\t\t$.Dialog.wait(title, 'Loading page '+newPageNumber);\r\n\r\n\t\t$.get(target, {js: true}, $.mkAjaxHandler(function(){\r\n\t\t\tif (!this.status) return $.Dialog.fail(title, this.message);\r\n\r\n\t\t\tnewPageNumber = parseInt(this.page, 10);\r\n\r\n\t\t\twindow.updateTimesF();\r\n\t\t\t$('nav').find('li.active').children().last().html(function(){\r\n\t\t\t\treturn this.innerHTML.replace(/Page \\d+/,'Page '+newPageNumber);\r\n\t\t\t});\r\n\t\t\t$title.text(this.title);\r\n\t\t\thistory.pushState({},'',basePath+newPageNumber);\r\n\r\n\t\t\tvar max = this.maxpage;\r\n\t\t\t$pagination.each(function(){\r\n\t\t\t\tvar $ul = $(this),\r\n\t\t\t\t\t$childs = $ul.children();\r\n\r\n\t\t\t\tif ($childs.length !== max){\r\n\t\t\t\t\t$ul.empty();\r\n\t\t\t\t\tfor (var i = 1; i <= max; i++)\r\n\t\t\t\t\t\t$ul.append('<li><a href=\"'+basePath+i+'\">'+i+'</a></li>');\r\n\t\t\t\t\t$childs = $ul.children();\r\n\t\t\t\t}\r\n\t\t\t\telse $childs.eq(pageNumber-1).html('<a href=\"'+basePath+pageNumber+'\">'+pageNumber+'</a>');\r\n\t\t\t\t$childs.eq(newPageNumber-1).html('<strong>'+newPageNumber+'</strong>');\r\n\t\t\t});\r\n\r\n\t\t\t$(this.update).html(this.output).trigger('page-switch');\r\n\r\n\t\t\tpageNumber = newPageNumber;\r\n\t\t\t$.Dialog.close();\r\n\t\t}));\r\n\t};\r\n});\r\n"],"sourceRoot":"/source/"}