$(function(){if(null!=typeof window.ROLES){var e=$(window),t=$("#content"),n=window.ROLES,a=t.children("h1"),o=a.text().trim(),i=t.find(".avatar-wrap").children(".badge"),r=a.next(),s=r.children("span").text(),l=$.mk("form").attr("id","rolemod").html('<select name=newrole required><optgroup label="Possible roles"></optgroup></select>'),g=l.find("optgroup"),h=$("#ban-toggle"),d=$("#change-role");$.each(n,function(e,t){g.append("<option value="+e+">"+t+"</option>")}),d.on("click",function(){var e="Change group";$.Dialog.request(e,l.clone(),"rolemod","Change",function(t){t.on("submit",function(a){a.preventDefault();var l=t.mkData();$.Dialog.wait(e,"Moving user to the new group"),$.post("newgroup/"+o,l,$.mkAjaxHandler(function(){this.status?(r.children("span").text(s=n[this.ng]),i.text(this.badge),$.Dialog.close(),h[(this.canbebanned?"remove":"add")+"Class"]("hidden")):$.Dialog.fail(e,this.message)}))}).find("optgroup").children().filter(function(){return $(this).text()===s}).attr("selected",!0)})}),h.on("click",function(){var t=(h.hasClass("un-banish")?"Un-ban":"Ban")+"ish",n=t.toLowerCase(),a=t+"ing "+o+("banish"==n?" to the moon":"");$.Dialog.request(a,("Banish"===t?"<p>"+t+"ing "+o+" will immediately sign them out of every session and won't allow them to log in again. Please, only do this if it's absolutely necessary.</p>":"<p>"+t+"ing "+o+" will allow them to sign in to the site again.</p>")+"<form id="+n+"-form>   <p>Please provide a reason (5-255 chars.) for the "+n.replace(/ish$/,"")+' which will be added to the log entry and appear in the user\'s ban history.</p>   <input type="text" name="reason" placeholder="Enter a reason" required pattern="^.{5,255}$"></form>'+("Banish"===t?'<img src="/img/ban-before.png" alt="Sad twilight" height=200>':""),n+"-form",t,function(){var l=$("#"+n+"-form"),g=l.find("input");g.val(t+"ing because "),l.on("submit",function(t){t.preventDefault();var l=$(this).mkData();$.Dialog.wait(a,"Gathering the Elements of Harmony"),$.post(n+"/"+o,l,function(t){return"object"!=typeof t?console.log(t)&&e.trigger("ajaxerror"):void(t.status?("banish"===n?$.Dialog.info(a,'<p>What had to be done, has been done.</p><img src="/img/ban-after.png">'):$.Dialog.success(a,t.message,!0),r.children("span").text(s=t.role),i.text(t.badge),h.toggleClass("un-banish banish typcn-world typcn-weather-night"),d.toggleClass("hidden")):$.Dialog.fail(a,t.message))})})})})}});
//# sourceMappingURL=user-manage.min.js.map