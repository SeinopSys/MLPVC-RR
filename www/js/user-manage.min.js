DocReady.push(function(){"use strict";if("undefined"!=typeof window.ROLES){var e=$("#content"),t=e.children("h1").children().eq(1),n=t.text().trim(),i=t.parent().next(),a=i.children("span").text(),o=$.mk("form").attr("id","rolemod").html('<select name="newrole" required><optgroup label="Possible roles"></optgroup></select>'),s=o.find("optgroup"),r=$("#ban-toggle"),l=$("#change-role");$.each(window.ROLES,function(e,t){s.append("<option value="+e+">"+t+"</option>")}),l.on("click",function(){$.Dialog.request("Change group",o.clone(),"rolemod","Change",function(e){var t=e.find("option").filter(function(){return this.innerHTML===a}).attr("selected",!0);e.on("submit",function(i){if(i.preventDefault(),e.children("select").val()===t.attr("value"))return $.Dialog.close();var a=e.mkData();$.Dialog.wait(!1,"Moving user to the new group"),$.post("/user/newgroup/"+n,a,$.mkAjaxHandler(function(){return this.already_in===!0?$.Dialog.close():this.status?($.Dialog.wait(!1,"Reloading page",!0),void $.Navigation.reload(function(){$.Dialog.close()})):$.Dialog.fail(!1,this.message)}))})})}),r.on("click",function(){var e=(r.hasClass("un-banish")?"Un-ban":"Ban")+"ish",t=e.toLowerCase(),i=e+"ing "+n+("banish"===t?" to the moon":"");$.Dialog.request(i,("Banish"===e?"<p>"+e+"ing "+n+" will immediately sign them out of every session and won't allow them to log in again. Please, only do this if it's absolutely necessary.</p>":"<p>"+e+"ing "+n+" will allow them to sign in to the site again.</p>")+"<form id="+t+"-form>   <p>You must provide a reason (5-255 chars.) for the "+t.replace(/ish$/,"")+' which will be added to the log entry and appear in the user\'s banishment history.</p>   <input type="text" name="reason" placeholder="Enter a reason" required pattern="^.{5,255}$"></form>'+("Banish"===e?'<img src="/img/pre-ban.svg" alt="Sad twilight">':""),t+"-form",e,function(){var a=$("#"+t+"-form"),o=a.find("input");o.val(e+"ing because "),a.on("submit",function(e){e.preventDefault();var a=$(this).mkData();$.Dialog.wait(!1,"Gathering the Elements of Harmony"),$.post("/user/"+t+"/"+n,a,$.mkAjaxHandler(function(){if(!this.status)return $.Dialog.fail(i,this.message);var e=this.message;$.Dialog.wait(!1,"Reloading page",!0),$.Navigation.reload(function(){"banish"===t?$.Dialog.success(i,'<p>What had to be done, has been done.</p><img src="/img/post-ban.svg">'):$.Dialog.success(i,e,!0)})}))})})})}});
//# sourceMappingURL=user-manage.min.js.map
