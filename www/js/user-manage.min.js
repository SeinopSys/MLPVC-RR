$(function(){if(null!=typeof window.ROLES){var e=$(window),n=$("#content"),t=window.ROLES,o=n.children("h1"),a=o.text().trim(),i=n.find(".avatar-wrap").children(".badge"),r=o.next(),s=r.children("span").text(),l=$.mk("form").attr("id","rolemod").html('<select name=newrole required><optgroup label="Possible roles"></optgroup></select>'),g=l.find("optgroup"),h=$("#ban-toggle"),d=$("#change-role");$.each(t,function(e,n){g.append("<option value="+e+">"+n+"</option>")}),d.on("click",function(){var n="Change group";$.Dialog.request(n,l.clone(),"rolemod","Change",function(){$("#rolemod").on("submit",function(o){o.preventDefault(),$.Dialog.wait(n,"Moving user to the new group"),$.post("newgroup/"+a,$(this).mkData(),function(o){return"object"!=typeof o?console.log(o)&&e.trigger("ajaxerror"):void(o.status?(r.children("span").text(s=t[o.ng]),i.text(o.badge),$.Dialog.close(),h[(o.canbebanned?"remove":"add")+"Class"]("hidden")):$.Dialog.fail(n,o.message))})}).find("optgroup").children().filter(function(){return $(this).text()===s}).attr("selected",!0)})}),h.on("click",function(){var n=(h.hasClass("un-banish")?"Un-ban":"Ban")+"ish",t=n.toLowerCase(),o=n+"ing "+a+("banish"==t?" to the moon":"");$.Dialog.request(o,("Banish"===n?"<p>"+n+"ing "+a+" will immediately sign them out of every session and won't allow them to log in again. Please, only do this if it's absolutely necessary.</p>":"<p>"+n+"ing "+a+" will allow them to sign in to the site again.</p>")+"<form id="+t+"-form>   <p>Please provide a reason (5-255 chars.) for the "+t.replace(/ish$/,"")+' which will be added to the log entry and appear in the user\'s ban history.</p>   <input type="text" name="reason" placeholder="Enter a reason" required pattern="^.{5,255}$"></form>'+("Banish"===n?'<img src="/img/ban-before.png" alt="Sad twilight" height=200>':""),t+"-form",n,function(){var l=$("#"+t+"-form"),g=l.find("input");g.val(n+"ing because "),l.on("submit",function(n){n.preventDefault(),$.Dialog.wait(o,"Gathering the Elements of Harmony"),$.post(t+"/"+a,$(this).mkData(),function(n){return"object"!=typeof n?console.log(n)&&e.trigger("ajaxerror"):void(n.status?("banish"===t?$.Dialog.info(o,'<p>What had to be done, has been done.</p><img src="/img/ban-after.png">'):$.Dialog.success(o,n.message,!0),r.children("span").text(s=n.role),i.text(n.badge),h.toggleClass("un-banish banish typcn-world typcn-weather-night"),d.toggleClass("hidden")):$.Dialog.fail(o,n.message))})})})})}});
//# sourceMappingURL=user-manage.min.js.map