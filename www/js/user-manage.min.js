DocReady.push(function(){if(null!=typeof window.ROLES){var e=($(window),$("#content")),n=window.ROLES,t=e.children("h1"),a=t.text().trim(),o=(e.find(".avatar-wrap").children(".badge"),t.next()),i=o.children("span").text(),s=$.mk("form").attr("id","rolemod").html('<select name=newrole required><optgroup label="Possible roles"></optgroup></select>'),l=s.find("optgroup"),r=$("#ban-toggle"),h=$("#change-role");$.each(n,function(e,n){l.append("<option value="+e+">"+n+"</option>")}),h.on("click",function(){var e="Change group";$.Dialog.request(e,s.clone(),"rolemod","Change",function(n){var t=n.find("option").filter(function(){return this.innerHTML===i}).attr("selected",!0);n.on("submit",function(o){if(o.preventDefault(),n.children("select").val()===t.attr("value"))return $.Dialog.close();var i=n.mkData();$.Dialog.wait(e,"Moving user to the new group"),$.post("newgroup/"+a,i,$.mkAjaxHandler(function(){return this.already_in===!0?$.Dialog.close():this.status?($.Dialog.success(e,this.message),void HandleNav(location.pathname,function(){$.Dialog.close()})):$.Dialog.fail(e,this.message)}))})})}),r.on("click",function(){var e=(r.hasClass("un-banish")?"Un-ban":"Ban")+"ish",n=e.toLowerCase(),t=e+"ing "+a+("banish"==n?" to the moon":"");$.Dialog.request(t,("Banish"===e?"<p>"+e+"ing "+a+" will immediately sign them out of every session and won't allow them to log in again. Please, only do this if it's absolutely necessary.</p>":"<p>"+e+"ing "+a+" will allow them to sign in to the site again.</p>")+"<form id="+n+"-form>   <p>You must provide a reason (5-255 chars.) for the "+n.replace(/ish$/,"")+' which will be added to the log entry and appear in the user\'s ban history.</p>   <input type="text" name="reason" placeholder="Enter a reason" required pattern="^.{5,255}$"></form>'+("Banish"===e?'<img src="/img/pre-ban.svg" alt="Sad twilight" height=200>':""),n+"-form",e,function(){var o=$("#"+n+"-form"),i=o.find("input");i.val(e+"ing because "),o.on("submit",function(e){e.preventDefault();var o=$(this).mkData();$.Dialog.wait(t,"Gathering the Elements of Harmony"),$.post(n+"/"+a,o,$.mkAjaxHandler(function(){return this.status?("banish"===n?$.Dialog.success(t,'<p>What had to be done, has been done.</p><img src="/img/post-ban.svg">'):$.Dialog.success(t,this.message),void HandleNav(location.pathname,function(){setTimeout(function(){$.Dialog.close()},2e3)})):$.Dialog.fail(t,this.message)}))})})})}});
//# sourceMappingURL=user-manage.min.js.map