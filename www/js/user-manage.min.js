DocReady.push(function(){if(null!=typeof window.ROLES){var e=($(window),$("#content")),t=window.ROLES,n=e.children("h1"),a=n.text().trim(),i=e.find(".avatar-wrap").children(".badge"),o=n.next(),s=o.children("span").text(),r=$.mk("form").attr("id","rolemod").html('<select name=newrole required><optgroup label="Possible roles"></optgroup></select>'),l=r.find("optgroup"),h=$("#ban-toggle"),g=$("#change-role");$.each(t,function(e,t){l.append("<option value="+e+">"+t+"</option>")}),g.on("click",function(){var e="Change group";$.Dialog.request(e,r.clone(),"rolemod","Change",function(n){var r=n.find("option").filter(function(){return this.innerHTML===s}).attr("selected",!0);n.on("submit",function(l){if(l.preventDefault(),n.children("select").val()===r.attr("value"))return $.Dialog.close();var g=n.mkData();$.Dialog.wait(e,"Moving user to the new group"),$.post("newgroup/"+a,g,$.mkAjaxHandler(function(){return this.already_in===!0?$.Dialog.close():void(this.status?(o.children("span").text(s=t[this.ng]),i.text(this.badge),$.Dialog.close(),h[(this.canbebanned?"remove":"add")+"Class"]("hidden")):$.Dialog.fail(e,this.message))}))})})}),h.on("click",function(){var e=(h.hasClass("un-banish")?"Un-ban":"Ban")+"ish",t=e.toLowerCase(),n=e+"ing "+a+("banish"==t?" to the moon":"");$.Dialog.request(n,("Banish"===e?"<p>"+e+"ing "+a+" will immediately sign them out of every session and won't allow them to log in again. Please, only do this if it's absolutely necessary.</p>":"<p>"+e+"ing "+a+" will allow them to sign in to the site again.</p>")+"<form id="+t+"-form>   <p>Please provide a reason (5-255 chars.) for the "+t.replace(/ish$/,"")+' which will be added to the log entry and appear in the user\'s ban history.</p>   <input type="text" name="reason" placeholder="Enter a reason" required pattern="^.{5,255}$"></form>'+("Banish"===e?'<img src="/img/ban-before.png" alt="Sad twilight" height=200>':""),t+"-form",e,function(){var r=$("#"+t+"-form"),l=r.find("input");l.val(e+"ing because "),r.on("submit",function(e){e.preventDefault();var r=$(this).mkData();$.Dialog.wait(n,"Gathering the Elements of Harmony"),$.post(t+"/"+a,r,$.mkAjaxHandler(function(){return this.status?("banish"===t?$.Dialog.info(n,'<p>What had to be done, has been done.</p><img src="/img/ban-after.png">'):$.Dialog.success(n,this.message,!0),o.children("span").text(s=this.role),i.text(this.badge),h.toggleClass("un-banish banish typcn-world typcn-weather-night"),void g.toggleClass("hidden")):$.Dialog.fail(n,this.message)}))})})})}});
//# sourceMappingURL=user-manage.min.js.map